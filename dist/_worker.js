var Fs=Object.defineProperty;var or=t=>{throw TypeError(t)};var zs=(t,r,s)=>r in t?Fs(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s;var m=(t,r,s)=>zs(t,typeof r!="symbol"?r+"":r,s),Rt=(t,r,s)=>r.has(t)||or("Cannot "+s);var u=(t,r,s)=>(Rt(t,r,"read from private field"),s?s.call(t):r.get(t)),w=(t,r,s)=>r.has(t)?or("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(t):r.set(t,s),g=(t,r,s,n)=>(Rt(t,r,"write to private field"),n?n.call(t,s):r.set(t,s),s),k=(t,r,s)=>(Rt(t,r,"access private method"),s);var dr=(t,r,s,n)=>({set _(a){g(t,r,a,s)},get _(){return u(t,r,n)}});var Gr={Stringify:1},M=(t,r)=>{const s=new String(t);return s.isEscaped=!0,s.callbacks=r,s},Gs=/[&<>'"]/,qr=async(t,r)=>{let s="";r||(r=[]);const n=await Promise.all(t);for(let a=n.length-1;s+=n[a],a--,!(a<0);a--){let i=n[a];typeof i=="object"&&r.push(...i.callbacks||[]);const l=i.isEscaped;if(i=await(typeof i=="object"?i.toString():i),typeof i=="object"&&r.push(...i.callbacks||[]),i.isEscaped??l)s+=i;else{const c=[s];ue(i,c),s=c[0]}}return M(s,r)},ue=(t,r)=>{const s=t.search(Gs);if(s===-1){r[0]+=t;return}let n,a,i=0;for(a=s;a<t.length;a++){switch(t.charCodeAt(a)){case 34:n="&quot;";break;case 39:n="&#39;";break;case 38:n="&amp;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}r[0]+=t.substring(i,a)+n,i=a+1}r[0]+=t.substring(i,a)},Vr=t=>{const r=t.callbacks;if(!(r!=null&&r.length))return t;const s=[t],n={};return r.forEach(a=>a({phase:Gr.Stringify,buffer:s,context:n})),s[0]},Zr=async(t,r,s,n,a)=>{typeof t=="object"&&!(t instanceof String)&&(t instanceof Promise||(t=t.toString()),t instanceof Promise&&(t=await t));const i=t.callbacks;return i!=null&&i.length?(a?a[0]+=t:a=[t],Promise.all(i.map(c=>c({phase:r,buffer:a,context:n}))).then(c=>Promise.all(c.filter(Boolean).map(o=>Zr(o,r,!1,n,a))).then(()=>a[0]))):Promise.resolve(t)},qs=(t,...r)=>{const s=[""];for(let n=0,a=t.length-1;n<a;n++){s[0]+=t[n];const i=Array.isArray(r[n])?r[n].flat(1/0):[r[n]];for(let l=0,c=i.length;l<c;l++){const o=i[l];if(typeof o=="string")ue(o,s);else if(typeof o=="number")s[0]+=o;else{if(typeof o=="boolean"||o===null||o===void 0)continue;if(typeof o=="object"&&o.isEscaped)if(o.callbacks)s.unshift("",o);else{const d=o.toString();d instanceof Promise?s.unshift("",d):s[0]+=d}else o instanceof Promise?s.unshift("",o):ue(o.toString(),s)}}}return s[0]+=t.at(-1),s.length===1?"callbacks"in s?M(Vr(M(s[0],s.callbacks))):M(s[0]):qr(s,s.callbacks)},Yt=Symbol("RENDERER"),Ut=Symbol("ERROR_HANDLER"),C=Symbol("STASH"),Yr=Symbol("INTERNAL"),Vs=Symbol("MEMO"),St=Symbol("PERMALINK"),ur=t=>(t[Yr]=!0,t),Xr=t=>({value:r,children:s})=>{if(!s)return;const n={children:[{tag:ur(()=>{t.push(r)}),props:{}}]};Array.isArray(s)?n.children.push(...s.flat()):n.children.push(s),n.children.push({tag:ur(()=>{t.pop()}),props:{}});const a={tag:"",props:n,type:""};return a[Ut]=i=>{throw t.pop(),i},a},Qr=t=>{const r=[t],s=Xr(r);return s.values=r,s.Provider=s,_e.push(s),s},_e=[],Xt=t=>{const r=[t],s=n=>{r.push(n.value);let a;try{a=n.children?(Array.isArray(n.children)?new ss("",{},n.children):n.children).toString():""}finally{r.pop()}return a instanceof Promise?a.then(i=>M(i,i.callbacks)):M(a)};return s.values=r,s.Provider=s,s[Yt]=Xr(r),_e.push(s),s},Ke=t=>t.values.at(-1),pt={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},Ht={},gt="data-precedence",lt=t=>Array.isArray(t)?t:[t],hr=new WeakMap,fr=(t,r,s,n)=>({buffer:a,context:i})=>{if(!a)return;const l=hr.get(i)||{};hr.set(i,l);const c=l[t]||(l[t]=[]);let o=!1;const d=pt[t];if(d.length>0){e:for(const[,h]of c)for(const f of d)if(((h==null?void 0:h[f])??null)===(s==null?void 0:s[f])){o=!0;break e}}if(o?a[0]=a[0].replaceAll(r,""):d.length>0?c.push([r,s,n]):c.unshift([r,s,n]),a[0].indexOf("</head>")!==-1){let h;if(n===void 0)h=c.map(([f])=>f);else{const f=[];h=c.map(([b,,y])=>{let x=f.indexOf(y);return x===-1&&(f.push(y),x=f.length-1),[b,x]}).sort((b,y)=>b[1]-y[1]).map(([b])=>b)}h.forEach(f=>{a[0]=a[0].replaceAll(f,"")}),a[0]=a[0].replace(/(?=<\/head>)/,h.join(""))}},ct=(t,r,s)=>M(new W(t,s,lt(r??[])).toString()),ot=(t,r,s,n)=>{if("itemProp"in s)return ct(t,r,s);let{precedence:a,blocking:i,...l}=s;a=n?a??"":void 0,n&&(l[gt]=a);const c=new W(t,l,lt(r||[])).toString();return c instanceof Promise?c.then(o=>M(c,[...o.callbacks||[],fr(t,o,l,a)])):M(c,[fr(t,c,l,a)])},Zs=({children:t,...r})=>{const s=Qt();if(s){const n=Ke(s);if(n==="svg"||n==="head")return new W("title",r,lt(t??[]))}return ot("title",t,r,!1)},Ys=({children:t,...r})=>{const s=Qt();return["src","async"].some(n=>!r[n])||s&&Ke(s)==="head"?ct("script",t,r):ot("script",t,r,!1)},Xs=({children:t,...r})=>["href","precedence"].every(s=>s in r)?(r["data-href"]=r.href,delete r.href,ot("style",t,r,!0)):ct("style",t,r),Qs=({children:t,...r})=>["onLoad","onError"].some(s=>s in r)||r.rel==="stylesheet"&&(!("precedence"in r)||"disabled"in r)?ct("link",t,r):ot("link",t,r,"precedence"in r),en=({children:t,...r})=>{const s=Qt();return s&&Ke(s)==="head"?ct("meta",t,r):ot("meta",t,r,!1)},es=(t,{children:r,...s})=>new W(t,s,lt(r??[])),tn=t=>(typeof t.action=="function"&&(t.action=St in t.action?t.action[St]:void 0),es("form",t)),ts=(t,r)=>(typeof r.formAction=="function"&&(r.formAction=St in r.formAction?r.formAction[St]:void 0),es(t,r)),rn=t=>ts("input",t),sn=t=>ts("button",t);const Tt=Object.freeze(Object.defineProperty({__proto__:null,button:sn,form:tn,input:rn,link:Qs,meta:en,script:Ys,style:Xs,title:Zs},Symbol.toStringTag,{value:"Module"}));var nn=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),kt=t=>nn.get(t)||t,rs=(t,r)=>{for(const[s,n]of Object.entries(t)){const a=s[0]==="-"||!/[A-Z]/.test(s)?s:s.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`);r(a,n==null?null:typeof n=="number"?a.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${n}`:`${n}px`:n)}},ze=void 0,Qt=()=>ze,an=t=>/[A-Z]/.test(t)&&t.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,ln=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],cn=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],er=(t,r)=>{for(let s=0,n=t.length;s<n;s++){const a=t[s];if(typeof a=="string")ue(a,r);else{if(typeof a=="boolean"||a===null||a===void 0)continue;a instanceof W?a.toStringToBuffer(r):typeof a=="number"||a.isEscaped?r[0]+=a:a instanceof Promise?r.unshift("",a):er(a,r)}}},W=class{constructor(t,r,s){m(this,"tag");m(this,"props");m(this,"key");m(this,"children");m(this,"isEscaped",!0);m(this,"localContexts");this.tag=t,this.props=r,this.children=s}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){var r,s;const t=[""];(r=this.localContexts)==null||r.forEach(([n,a])=>{n.values.push(a)});try{this.toStringToBuffer(t)}finally{(s=this.localContexts)==null||s.forEach(([n])=>{n.values.pop()})}return t.length===1?"callbacks"in t?Vr(M(t[0],t.callbacks)).toString():t[0]:qr(t,t.callbacks)}toStringToBuffer(t){const r=this.tag,s=this.props;let{children:n}=this;t[0]+=`<${r}`;const a=ze&&Ke(ze)==="svg"?i=>an(kt(i)):i=>kt(i);for(let[i,l]of Object.entries(s))if(i=a(i),i!=="children"){if(i==="style"&&typeof l=="object"){let c="";rs(l,(o,d)=>{d!=null&&(c+=`${c?";":""}${o}:${d}`)}),t[0]+=' style="',ue(c,t),t[0]+='"'}else if(typeof l=="string")t[0]+=` ${i}="`,ue(l,t),t[0]+='"';else if(l!=null)if(typeof l=="number"||l.isEscaped)t[0]+=` ${i}="${l}"`;else if(typeof l=="boolean"&&cn.includes(i))l&&(t[0]+=` ${i}=""`);else if(i==="dangerouslySetInnerHTML"){if(n.length>0)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");n=[M(l.__html)]}else if(l instanceof Promise)t[0]+=` ${i}="`,t.unshift('"',l);else if(typeof l=="function"){if(!i.startsWith("on")&&i!=="ref")throw new Error(`Invalid prop '${i}' of type 'function' supplied to '${r}'.`)}else t[0]+=` ${i}="`,ue(l.toString(),t),t[0]+='"'}if(ln.includes(r)&&n.length===0){t[0]+="/>";return}t[0]+=">",er(n,t),t[0]+=`</${r}>`}},jt=class extends W{toStringToBuffer(t){const{children:r}=this,s=this.tag.call(null,{...this.props,children:r.length<=1?r[0]:r});if(!(typeof s=="boolean"||s==null))if(s instanceof Promise)if(_e.length===0)t.unshift("",s);else{const n=_e.map(a=>[a,a.values.at(-1)]);t.unshift("",s.then(a=>(a instanceof W&&(a.localContexts=n),a)))}else s instanceof W?s.toStringToBuffer(t):typeof s=="number"||s.isEscaped?(t[0]+=s,s.callbacks&&(t.callbacks||(t.callbacks=[]),t.callbacks.push(...s.callbacks))):ue(s,t)}},ss=class extends W{toStringToBuffer(t){er(this.children,t)}},br=(t,r,...s)=>{r??(r={}),s.length&&(r.children=s.length===1?s[0]:s);const n=r.key;delete r.key;const a=yt(t,r,s);return a.key=n,a},mr=!1,yt=(t,r,s)=>{if(!mr){for(const n in Ht)Tt[n][Yt]=Ht[n];mr=!0}return typeof t=="function"?new jt(t,r,s):Tt[t]?new jt(Tt[t],r,s):t==="svg"||t==="head"?(ze||(ze=Xt("")),new W(t,r,[new jt(ze,{value:t},s)])):new W(t,r,s)},on=({children:t})=>new ss("",{children:t},Array.isArray(t)?t:t?[t]:[]);function e(t,r,s){let n;if(!r||!("children"in r))n=yt(t,r,[]);else{const a=r.children;n=Array.isArray(a)?yt(t,r,a):yt(t,r,[a])}return n.key=s,n}var pr=(t,r,s)=>(n,a)=>{let i=-1;return l(0);async function l(c){if(c<=i)throw new Error("next() called multiple times");i=c;let o,d=!1,h;if(t[c]?(h=t[c][0][0],n.req.routeIndex=c):h=c===t.length&&a||void 0,h)try{o=await h(n,()=>l(c+1))}catch(f){if(f instanceof Error&&r)n.error=f,o=await r(f,n),d=!0;else throw f}else n.finalized===!1&&s&&(o=await s(n));return o&&(n.finalized===!1||d)&&(n.res=o),n}},dn=Symbol(),un=async(t,r=Object.create(null))=>{const{all:s=!1,dot:n=!1}=r,i=(t instanceof os?t.raw.headers:t.headers).get("Content-Type");return i!=null&&i.startsWith("multipart/form-data")||i!=null&&i.startsWith("application/x-www-form-urlencoded")?hn(t,{all:s,dot:n}):{}};async function hn(t,r){const s=await t.formData();return s?fn(s,r):{}}function fn(t,r){const s=Object.create(null);return t.forEach((n,a)=>{r.all||a.endsWith("[]")?bn(s,a,n):s[a]=n}),r.dot&&Object.entries(s).forEach(([n,a])=>{n.includes(".")&&(mn(s,n,a),delete s[n])}),s}var bn=(t,r,s)=>{t[r]!==void 0?Array.isArray(t[r])?t[r].push(s):t[r]=[t[r],s]:r.endsWith("[]")?t[r]=[s]:t[r]=s},mn=(t,r,s)=>{let n=t;const a=r.split(".");a.forEach((i,l)=>{l===a.length-1?n[i]=s:((!n[i]||typeof n[i]!="object"||Array.isArray(n[i])||n[i]instanceof File)&&(n[i]=Object.create(null)),n=n[i])})},ns=t=>{const r=t.split("/");return r[0]===""&&r.shift(),r},pn=t=>{const{groups:r,path:s}=gn(t),n=ns(s);return yn(n,r)},gn=t=>{const r=[];return t=t.replace(/\{[^}]+\}/g,(s,n)=>{const a=`@${n}`;return r.push([a,s]),a}),{groups:r,path:t}},yn=(t,r)=>{for(let s=r.length-1;s>=0;s--){const[n]=r[s];for(let a=t.length-1;a>=0;a--)if(t[a].includes(n)){t[a]=t[a].replace(n,r[s][1]);break}}return t},ht={},xn=(t,r)=>{if(t==="*")return"*";const s=t.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(s){const n=`${t}#${r}`;return ht[n]||(s[2]?ht[n]=r&&r[0]!==":"&&r[0]!=="*"?[n,s[1],new RegExp(`^${s[2]}(?=/${r})`)]:[t,s[1],new RegExp(`^${s[2]}$`)]:ht[n]=[t,s[1],!0]),ht[n]}return null},tr=(t,r)=>{try{return r(t)}catch{return t.replace(/(?:%[0-9A-Fa-f]{2})+/g,s=>{try{return r(s)}catch{return s}})}},vn=t=>tr(t,decodeURI),as=t=>{const r=t.url,s=r.indexOf("/",r.charCodeAt(9)===58?13:8);let n=s;for(;n<r.length;n++){const a=r.charCodeAt(n);if(a===37){const i=r.indexOf("?",n),l=r.slice(s,i===-1?void 0:i);return vn(l.includes("%25")?l.replace(/%25/g,"%2525"):l)}else if(a===63)break}return r.slice(s,n)},wn=t=>{const r=as(t);return r.length>1&&r.at(-1)==="/"?r.slice(0,-1):r},Se=(t,r,...s)=>(s.length&&(r=Se(r,...s)),`${(t==null?void 0:t[0])==="/"?"":"/"}${t}${r==="/"?"":`${(t==null?void 0:t.at(-1))==="/"?"":"/"}${(r==null?void 0:r[0])==="/"?r.slice(1):r}`}`),is=t=>{if(t.charCodeAt(t.length-1)!==63||!t.includes(":"))return null;const r=t.split("/"),s=[];let n="";return r.forEach(a=>{if(a!==""&&!/\:/.test(a))n+="/"+a;else if(/\:/.test(a))if(/\?/.test(a)){s.length===0&&n===""?s.push("/"):s.push(n);const i=a.replace("?","");n+="/"+i,s.push(n)}else n+="/"+a}),s.filter((a,i,l)=>l.indexOf(a)===i)},Ot=t=>/[%+]/.test(t)?(t.indexOf("+")!==-1&&(t=t.replace(/\+/g," ")),t.indexOf("%")!==-1?tr(t,cs):t):t,ls=(t,r,s)=>{let n;if(!s&&r&&!/[%+]/.test(r)){let l=t.indexOf(`?${r}`,8);for(l===-1&&(l=t.indexOf(`&${r}`,8));l!==-1;){const c=t.charCodeAt(l+r.length+1);if(c===61){const o=l+r.length+2,d=t.indexOf("&",o);return Ot(t.slice(o,d===-1?void 0:d))}else if(c==38||isNaN(c))return"";l=t.indexOf(`&${r}`,l+1)}if(n=/[%+]/.test(t),!n)return}const a={};n??(n=/[%+]/.test(t));let i=t.indexOf("?",8);for(;i!==-1;){const l=t.indexOf("&",i+1);let c=t.indexOf("=",i);c>l&&l!==-1&&(c=-1);let o=t.slice(i+1,c===-1?l===-1?void 0:l:c);if(n&&(o=Ot(o)),i=l,o==="")continue;let d;c===-1?d="":(d=t.slice(c+1,l===-1?void 0:l),n&&(d=Ot(d))),s?(a[o]&&Array.isArray(a[o])||(a[o]=[]),a[o].push(d)):a[o]??(a[o]=d)}return r?a[r]:a},En=ls,An=(t,r)=>ls(t,r,!0),cs=decodeURIComponent,gr=t=>tr(t,cs),Re,N,se,ds,us,Wt,ae,Dr,os=(Dr=class{constructor(t,r="/",s=[[]]){w(this,se);m(this,"raw");w(this,Re);w(this,N);m(this,"routeIndex",0);m(this,"path");m(this,"bodyCache",{});w(this,ae,t=>{const{bodyCache:r,raw:s}=this,n=r[t];if(n)return n;const a=Object.keys(r)[0];return a?r[a].then(i=>(a==="json"&&(i=JSON.stringify(i)),new Response(i)[t]())):r[t]=s[t]()});this.raw=t,this.path=r,g(this,N,s),g(this,Re,{})}param(t){return t?k(this,se,ds).call(this,t):k(this,se,us).call(this)}query(t){return En(this.url,t)}queries(t){return An(this.url,t)}header(t){if(t)return this.raw.headers.get(t)??void 0;const r={};return this.raw.headers.forEach((s,n)=>{r[n]=s}),r}async parseBody(t){var r;return(r=this.bodyCache).parsedBody??(r.parsedBody=await un(this,t))}json(){return u(this,ae).call(this,"text").then(t=>JSON.parse(t))}text(){return u(this,ae).call(this,"text")}arrayBuffer(){return u(this,ae).call(this,"arrayBuffer")}blob(){return u(this,ae).call(this,"blob")}formData(){return u(this,ae).call(this,"formData")}addValidatedData(t,r){u(this,Re)[t]=r}valid(t){return u(this,Re)[t]}get url(){return this.raw.url}get method(){return this.raw.method}get[dn](){return u(this,N)}get matchedRoutes(){return u(this,N)[0].map(([[,t]])=>t)}get routePath(){return u(this,N)[0].map(([[,t]])=>t)[this.routeIndex].path}},Re=new WeakMap,N=new WeakMap,se=new WeakSet,ds=function(t){const r=u(this,N)[0][this.routeIndex][1][t],s=k(this,se,Wt).call(this,r);return s?/\%/.test(s)?gr(s):s:void 0},us=function(){const t={},r=Object.keys(u(this,N)[0][this.routeIndex][1]);for(const s of r){const n=k(this,se,Wt).call(this,u(this,N)[0][this.routeIndex][1][s]);n&&typeof n=="string"&&(t[s]=/\%/.test(n)?gr(n):n)}return t},Wt=function(t){return u(this,N)[1]?u(this,N)[1][t]:t},ae=new WeakMap,Dr),Sn="text/plain; charset=UTF-8",Bt=(t,r)=>({"Content-Type":t,...r}),Ze,Ye,Z,Te,Y,D,Xe,je,Oe,pe,Qe,et,ie,ke,_r,kn=(_r=class{constructor(t,r){w(this,ie);w(this,Ze);w(this,Ye);m(this,"env",{});w(this,Z);m(this,"finalized",!1);m(this,"error");w(this,Te);w(this,Y);w(this,D);w(this,Xe);w(this,je);w(this,Oe);w(this,pe);w(this,Qe);w(this,et);m(this,"render",(...t)=>(u(this,je)??g(this,je,r=>this.html(r)),u(this,je).call(this,...t)));m(this,"setLayout",t=>g(this,Xe,t));m(this,"getLayout",()=>u(this,Xe));m(this,"setRenderer",t=>{g(this,je,t)});m(this,"header",(t,r,s)=>{this.finalized&&g(this,D,new Response(u(this,D).body,u(this,D)));const n=u(this,D)?u(this,D).headers:u(this,pe)??g(this,pe,new Headers);r===void 0?n.delete(t):s!=null&&s.append?n.append(t,r):n.set(t,r)});m(this,"status",t=>{g(this,Te,t)});m(this,"set",(t,r)=>{u(this,Z)??g(this,Z,new Map),u(this,Z).set(t,r)});m(this,"get",t=>u(this,Z)?u(this,Z).get(t):void 0);m(this,"newResponse",(...t)=>k(this,ie,ke).call(this,...t));m(this,"body",(t,r,s)=>k(this,ie,ke).call(this,t,r,s));m(this,"text",(t,r,s)=>!u(this,pe)&&!u(this,Te)&&!r&&!s&&!this.finalized?new Response(t):k(this,ie,ke).call(this,t,r,Bt(Sn,s)));m(this,"json",(t,r,s)=>k(this,ie,ke).call(this,JSON.stringify(t),r,Bt("application/json",s)));m(this,"html",(t,r,s)=>{const n=a=>k(this,ie,ke).call(this,a,r,Bt("text/html; charset=UTF-8",s));return typeof t=="object"?Zr(t,Gr.Stringify,!1,{}).then(n):n(t)});m(this,"redirect",(t,r)=>{const s=String(t);return this.header("Location",/[^\x00-\xFF]/.test(s)?encodeURI(s):s),this.newResponse(null,r??302)});m(this,"notFound",()=>(u(this,Oe)??g(this,Oe,()=>new Response),u(this,Oe).call(this,this)));g(this,Ze,t),r&&(g(this,Y,r.executionCtx),this.env=r.env,g(this,Oe,r.notFoundHandler),g(this,et,r.path),g(this,Qe,r.matchResult))}get req(){return u(this,Ye)??g(this,Ye,new os(u(this,Ze),u(this,et),u(this,Qe))),u(this,Ye)}get event(){if(u(this,Y)&&"respondWith"in u(this,Y))return u(this,Y);throw Error("This context has no FetchEvent")}get executionCtx(){if(u(this,Y))return u(this,Y);throw Error("This context has no ExecutionContext")}get res(){return u(this,D)||g(this,D,new Response(null,{headers:u(this,pe)??g(this,pe,new Headers)}))}set res(t){if(u(this,D)&&t){t=new Response(t.body,t);for(const[r,s]of u(this,D).headers.entries())if(r!=="content-type")if(r==="set-cookie"){const n=u(this,D).headers.getSetCookie();t.headers.delete("set-cookie");for(const a of n)t.headers.append("set-cookie",a)}else t.headers.set(r,s)}g(this,D,t),this.finalized=!0}get var(){return u(this,Z)?Object.fromEntries(u(this,Z)):{}}},Ze=new WeakMap,Ye=new WeakMap,Z=new WeakMap,Te=new WeakMap,Y=new WeakMap,D=new WeakMap,Xe=new WeakMap,je=new WeakMap,Oe=new WeakMap,pe=new WeakMap,Qe=new WeakMap,et=new WeakMap,ie=new WeakSet,ke=function(t,r,s){const n=u(this,D)?new Headers(u(this,D).headers):u(this,pe)??new Headers;if(typeof r=="object"&&"headers"in r){const i=r.headers instanceof Headers?r.headers:new Headers(r.headers);for(const[l,c]of i)l.toLowerCase()==="set-cookie"?n.append(l,c):n.set(l,c)}if(s)for(const[i,l]of Object.entries(s))if(typeof l=="string")n.set(i,l);else{n.delete(i);for(const c of l)n.append(i,c)}const a=typeof r=="number"?r:(r==null?void 0:r.status)??u(this,Te);return new Response(t,{status:a,headers:n})},_r),R="ALL",In="all",Pn=["get","post","put","delete","options","patch"],hs="Can not add a route since the matcher is already built.",fs=class extends Error{},Cn="__COMPOSED_HANDLER",Rn=t=>t.text("404 Not Found",404),yr=(t,r)=>{if("getResponse"in t){const s=t.getResponse();return r.newResponse(s.body,s)}return console.error(t),r.text("Internal Server Error",500)},$,T,ms,U,be,xt,vt,Nr,bs=(Nr=class{constructor(r={}){w(this,T);m(this,"get");m(this,"post");m(this,"put");m(this,"delete");m(this,"options");m(this,"patch");m(this,"all");m(this,"on");m(this,"use");m(this,"router");m(this,"getPath");m(this,"_basePath","/");w(this,$,"/");m(this,"routes",[]);w(this,U,Rn);m(this,"errorHandler",yr);m(this,"onError",r=>(this.errorHandler=r,this));m(this,"notFound",r=>(g(this,U,r),this));m(this,"fetch",(r,...s)=>k(this,T,vt).call(this,r,s[1],s[0],r.method));m(this,"request",(r,s,n,a)=>r instanceof Request?this.fetch(s?new Request(r,s):r,n,a):(r=r.toString(),this.fetch(new Request(/^https?:\/\//.test(r)?r:`http://localhost${Se("/",r)}`,s),n,a)));m(this,"fire",()=>{addEventListener("fetch",r=>{r.respondWith(k(this,T,vt).call(this,r.request,r,void 0,r.request.method))})});[...Pn,In].forEach(i=>{this[i]=(l,...c)=>(typeof l=="string"?g(this,$,l):k(this,T,be).call(this,i,u(this,$),l),c.forEach(o=>{k(this,T,be).call(this,i,u(this,$),o)}),this)}),this.on=(i,l,...c)=>{for(const o of[l].flat()){g(this,$,o);for(const d of[i].flat())c.map(h=>{k(this,T,be).call(this,d.toUpperCase(),u(this,$),h)})}return this},this.use=(i,...l)=>(typeof i=="string"?g(this,$,i):(g(this,$,"*"),l.unshift(i)),l.forEach(c=>{k(this,T,be).call(this,R,u(this,$),c)}),this);const{strict:n,...a}=r;Object.assign(this,a),this.getPath=n??!0?r.getPath??as:wn}route(r,s){const n=this.basePath(r);return s.routes.map(a=>{var l;let i;s.errorHandler===yr?i=a.handler:(i=async(c,o)=>(await pr([],s.errorHandler)(c,()=>a.handler(c,o))).res,i[Cn]=a.handler),k(l=n,T,be).call(l,a.method,a.path,i)}),this}basePath(r){const s=k(this,T,ms).call(this);return s._basePath=Se(this._basePath,r),s}mount(r,s,n){let a,i;n&&(typeof n=="function"?i=n:(i=n.optionHandler,n.replaceRequest===!1?a=o=>o:a=n.replaceRequest));const l=i?o=>{const d=i(o);return Array.isArray(d)?d:[d]}:o=>{let d;try{d=o.executionCtx}catch{}return[o.env,d]};a||(a=(()=>{const o=Se(this._basePath,r),d=o==="/"?0:o.length;return h=>{const f=new URL(h.url);return f.pathname=f.pathname.slice(d)||"/",new Request(f,h)}})());const c=async(o,d)=>{const h=await s(a(o.req.raw),...l(o));if(h)return h;await d()};return k(this,T,be).call(this,R,Se(r,"*"),c),this}},$=new WeakMap,T=new WeakSet,ms=function(){const r=new bs({router:this.router,getPath:this.getPath});return r.errorHandler=this.errorHandler,g(r,U,u(this,U)),r.routes=this.routes,r},U=new WeakMap,be=function(r,s,n){r=r.toUpperCase(),s=Se(this._basePath,s);const a={basePath:this._basePath,path:s,method:r,handler:n};this.router.add(r,s,[n,a]),this.routes.push(a)},xt=function(r,s){if(r instanceof Error)return this.errorHandler(r,s);throw r},vt=function(r,s,n,a){if(a==="HEAD")return(async()=>new Response(null,await k(this,T,vt).call(this,r,s,n,"GET")))();const i=this.getPath(r,{env:n}),l=this.router.match(a,i),c=new kn(r,{path:i,matchResult:l,env:n,executionCtx:s,notFoundHandler:u(this,U)});if(l[0].length===1){let d;try{d=l[0][0][0][0](c,async()=>{c.res=await u(this,U).call(this,c)})}catch(h){return k(this,T,xt).call(this,h,c)}return d instanceof Promise?d.then(h=>h||(c.finalized?c.res:u(this,U).call(this,c))).catch(h=>k(this,T,xt).call(this,h,c)):d??u(this,U).call(this,c)}const o=pr(l[0],this.errorHandler,u(this,U));return(async()=>{try{const d=await o(c);if(!d.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return d.res}catch(d){return k(this,T,xt).call(this,d,c)}})()},Nr),It="[^/]+",We=".*",Je="(?:|/.*)",Ie=Symbol(),Tn=new Set(".\\+*[^]$()");function jn(t,r){return t.length===1?r.length===1?t<r?-1:1:-1:r.length===1||t===We||t===Je?1:r===We||r===Je?-1:t===It?1:r===It?-1:t.length===r.length?t<r?-1:1:r.length-t.length}var ge,ye,H,Mr,Jt=(Mr=class{constructor(){w(this,ge);w(this,ye);w(this,H,Object.create(null))}insert(r,s,n,a,i){if(r.length===0){if(u(this,ge)!==void 0)throw Ie;if(i)return;g(this,ge,s);return}const[l,...c]=r,o=l==="*"?c.length===0?["","",We]:["","",It]:l==="/*"?["","",Je]:l.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let d;if(o){const h=o[1];let f=o[2]||It;if(h&&o[2]&&(f===".*"||(f=f.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(f))))throw Ie;if(d=u(this,H)[f],!d){if(Object.keys(u(this,H)).some(b=>b!==We&&b!==Je))throw Ie;if(i)return;d=u(this,H)[f]=new Jt,h!==""&&g(d,ye,a.varIndex++)}!i&&h!==""&&n.push([h,u(d,ye)])}else if(d=u(this,H)[l],!d){if(Object.keys(u(this,H)).some(h=>h.length>1&&h!==We&&h!==Je))throw Ie;if(i)return;d=u(this,H)[l]=new Jt}d.insert(c,s,n,a,i)}buildRegExpStr(){const s=Object.keys(u(this,H)).sort(jn).map(n=>{const a=u(this,H)[n];return(typeof u(a,ye)=="number"?`(${n})@${u(a,ye)}`:Tn.has(n)?`\\${n}`:n)+a.buildRegExpStr()});return typeof u(this,ge)=="number"&&s.unshift(`#${u(this,ge)}`),s.length===0?"":s.length===1?s[0]:"(?:"+s.join("|")+")"}},ge=new WeakMap,ye=new WeakMap,H=new WeakMap,Mr),Pt,tt,Kr,On=(Kr=class{constructor(){w(this,Pt,{varIndex:0});w(this,tt,new Jt)}insert(t,r,s){const n=[],a=[];for(let l=0;;){let c=!1;if(t=t.replace(/\{[^}]+\}/g,o=>{const d=`@\\${l}`;return a[l]=[d,o],l++,c=!0,d}),!c)break}const i=t.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let l=a.length-1;l>=0;l--){const[c]=a[l];for(let o=i.length-1;o>=0;o--)if(i[o].indexOf(c)!==-1){i[o]=i[o].replace(c,a[l][1]);break}}return u(this,tt).insert(i,r,n,u(this,Pt),s),n}buildRegExp(){let t=u(this,tt).buildRegExpStr();if(t==="")return[/^$/,[],[]];let r=0;const s=[],n=[];return t=t.replace(/#(\d+)|@(\d+)|\.\*\$/g,(a,i,l)=>i!==void 0?(s[++r]=Number(i),"$()"):(l!==void 0&&(n[Number(l)]=++r),"")),[new RegExp(`^${t}`),s,n]}},Pt=new WeakMap,tt=new WeakMap,Kr),ps=[],Bn=[/^$/,[],Object.create(null)],wt=Object.create(null);function gs(t){return wt[t]??(wt[t]=new RegExp(t==="*"?"":`^${t.replace(/\/\*$|([.\\+*[^\]$()])/g,(r,s)=>s?`\\${s}`:"(?:|/.*)")}$`))}function Ln(){wt=Object.create(null)}function Dn(t){var d;const r=new On,s=[];if(t.length===0)return Bn;const n=t.map(h=>[!/\*|\/:/.test(h[0]),...h]).sort(([h,f],[b,y])=>h?1:b?-1:f.length-y.length),a=Object.create(null);for(let h=0,f=-1,b=n.length;h<b;h++){const[y,x,p]=n[h];y?a[x]=[p.map(([E])=>[E,Object.create(null)]),ps]:f++;let v;try{v=r.insert(x,f,y)}catch(E){throw E===Ie?new fs(x):E}y||(s[f]=p.map(([E,A])=>{const I=Object.create(null);for(A-=1;A>=0;A--){const[S,B]=v[A];I[S]=B}return[E,I]}))}const[i,l,c]=r.buildRegExp();for(let h=0,f=s.length;h<f;h++)for(let b=0,y=s[h].length;b<y;b++){const x=(d=s[h][b])==null?void 0:d[1];if(!x)continue;const p=Object.keys(x);for(let v=0,E=p.length;v<E;v++)x[p[v]]=c[x[p[v]]]}const o=[];for(const h in l)o[h]=s[l[h]];return[i,o,a]}function Ee(t,r){if(t){for(const s of Object.keys(t).sort((n,a)=>a.length-n.length))if(gs(s).test(r))return[...t[s]]}}var le,ce,Me,ys,xs,$r,_n=($r=class{constructor(){w(this,Me);m(this,"name","RegExpRouter");w(this,le);w(this,ce);g(this,le,{[R]:Object.create(null)}),g(this,ce,{[R]:Object.create(null)})}add(t,r,s){var c;const n=u(this,le),a=u(this,ce);if(!n||!a)throw new Error(hs);n[t]||[n,a].forEach(o=>{o[t]=Object.create(null),Object.keys(o[R]).forEach(d=>{o[t][d]=[...o[R][d]]})}),r==="/*"&&(r="*");const i=(r.match(/\/:/g)||[]).length;if(/\*$/.test(r)){const o=gs(r);t===R?Object.keys(n).forEach(d=>{var h;(h=n[d])[r]||(h[r]=Ee(n[d],r)||Ee(n[R],r)||[])}):(c=n[t])[r]||(c[r]=Ee(n[t],r)||Ee(n[R],r)||[]),Object.keys(n).forEach(d=>{(t===R||t===d)&&Object.keys(n[d]).forEach(h=>{o.test(h)&&n[d][h].push([s,i])})}),Object.keys(a).forEach(d=>{(t===R||t===d)&&Object.keys(a[d]).forEach(h=>o.test(h)&&a[d][h].push([s,i]))});return}const l=is(r)||[r];for(let o=0,d=l.length;o<d;o++){const h=l[o];Object.keys(a).forEach(f=>{var b;(t===R||t===f)&&((b=a[f])[h]||(b[h]=[...Ee(n[f],h)||Ee(n[R],h)||[]]),a[f][h].push([s,i-d+o+1]))})}}match(t,r){Ln();const s=k(this,Me,ys).call(this);return this.match=(n,a)=>{const i=s[n]||s[R],l=i[2][a];if(l)return l;const c=a.match(i[0]);if(!c)return[[],ps];const o=c.indexOf("",1);return[i[1][o],c]},this.match(t,r)}},le=new WeakMap,ce=new WeakMap,Me=new WeakSet,ys=function(){const t=Object.create(null);return Object.keys(u(this,ce)).concat(Object.keys(u(this,le))).forEach(r=>{t[r]||(t[r]=k(this,Me,xs).call(this,r))}),g(this,le,g(this,ce,void 0)),t},xs=function(t){const r=[];let s=t===R;return[u(this,le),u(this,ce)].forEach(n=>{const a=n[t]?Object.keys(n[t]).map(i=>[i,n[t][i]]):[];a.length!==0?(s||(s=!0),r.push(...a)):t!==R&&r.push(...Object.keys(n[R]).map(i=>[i,n[R][i]]))}),s?Dn(r):null},$r),oe,X,Ur,Nn=(Ur=class{constructor(t){m(this,"name","SmartRouter");w(this,oe,[]);w(this,X,[]);g(this,oe,t.routers)}add(t,r,s){if(!u(this,X))throw new Error(hs);u(this,X).push([t,r,s])}match(t,r){if(!u(this,X))throw new Error("Fatal error");const s=u(this,oe),n=u(this,X),a=s.length;let i=0,l;for(;i<a;i++){const c=s[i];try{for(let o=0,d=n.length;o<d;o++)c.add(...n[o]);l=c.match(t,r)}catch(o){if(o instanceof fs)continue;throw o}this.match=c.match.bind(c),g(this,oe,[c]),g(this,X,void 0);break}if(i===a)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,l}get activeRouter(){if(u(this,X)||u(this,oe).length!==1)throw new Error("No active router has been determined yet.");return u(this,oe)[0]}},oe=new WeakMap,X=new WeakMap,Ur),$e=Object.create(null),de,L,xe,Be,O,Q,me,Hr,vs=(Hr=class{constructor(t,r,s){w(this,Q);w(this,de);w(this,L);w(this,xe);w(this,Be,0);w(this,O,$e);if(g(this,L,s||Object.create(null)),g(this,de,[]),t&&r){const n=Object.create(null);n[t]={handler:r,possibleKeys:[],score:0},g(this,de,[n])}g(this,xe,[])}insert(t,r,s){g(this,Be,++dr(this,Be)._);let n=this;const a=pn(r),i=[];for(let l=0,c=a.length;l<c;l++){const o=a[l],d=a[l+1],h=xn(o,d),f=Array.isArray(h)?h[0]:o;if(f in u(n,L)){n=u(n,L)[f],h&&i.push(h[1]);continue}u(n,L)[f]=new vs,h&&(u(n,xe).push(h),i.push(h[1])),n=u(n,L)[f]}return u(n,de).push({[t]:{handler:s,possibleKeys:i.filter((l,c,o)=>o.indexOf(l)===c),score:u(this,Be)}}),n}search(t,r){var c;const s=[];g(this,O,$e);let a=[this];const i=ns(r),l=[];for(let o=0,d=i.length;o<d;o++){const h=i[o],f=o===d-1,b=[];for(let y=0,x=a.length;y<x;y++){const p=a[y],v=u(p,L)[h];v&&(g(v,O,u(p,O)),f?(u(v,L)["*"]&&s.push(...k(this,Q,me).call(this,u(v,L)["*"],t,u(p,O))),s.push(...k(this,Q,me).call(this,v,t,u(p,O)))):b.push(v));for(let E=0,A=u(p,xe).length;E<A;E++){const I=u(p,xe)[E],S=u(p,O)===$e?{}:{...u(p,O)};if(I==="*"){const ne=u(p,L)["*"];ne&&(s.push(...k(this,Q,me).call(this,ne,t,u(p,O))),g(ne,O,S),b.push(ne));continue}const[B,we,fe]=I;if(!h&&!(fe instanceof RegExp))continue;const G=u(p,L)[B],Js=i.slice(o).join("/");if(fe instanceof RegExp){const ne=fe.exec(Js);if(ne){if(S[we]=ne[0],s.push(...k(this,Q,me).call(this,G,t,u(p,O),S)),Object.keys(u(G,L)).length){g(G,O,S);const Ct=((c=ne[0].match(/\//))==null?void 0:c.length)??0;(l[Ct]||(l[Ct]=[])).push(G)}continue}}(fe===!0||fe.test(h))&&(S[we]=h,f?(s.push(...k(this,Q,me).call(this,G,t,S,u(p,O))),u(G,L)["*"]&&s.push(...k(this,Q,me).call(this,u(G,L)["*"],t,S,u(p,O)))):(g(G,O,S),b.push(G)))}}a=b.concat(l.shift()??[])}return s.length>1&&s.sort((o,d)=>o.score-d.score),[s.map(({handler:o,params:d})=>[o,d])]}},de=new WeakMap,L=new WeakMap,xe=new WeakMap,Be=new WeakMap,O=new WeakMap,Q=new WeakSet,me=function(t,r,s,n){const a=[];for(let i=0,l=u(t,de).length;i<l;i++){const c=u(t,de)[i],o=c[r]||c[R],d={};if(o!==void 0&&(o.params=Object.create(null),a.push(o),s!==$e||n&&n!==$e))for(let h=0,f=o.possibleKeys.length;h<f;h++){const b=o.possibleKeys[h],y=d[o.score];o.params[b]=n!=null&&n[b]&&!y?n[b]:s[b]??(n==null?void 0:n[b]),d[o.score]=!0}}return a},Hr),ve,Wr,Mn=(Wr=class{constructor(){m(this,"name","TrieRouter");w(this,ve);g(this,ve,new vs)}add(t,r,s){const n=is(r);if(n){for(let a=0,i=n.length;a<i;a++)u(this,ve).insert(t,n[a],s);return}u(this,ve).insert(t,r,s)}match(t,r){return u(this,ve).search(t,r)}},ve=new WeakMap,Wr),ws=class extends bs{constructor(t={}){super(t),this.router=t.router??new Nn({routers:[new _n,new Mn]})}},Kn=t=>{const s={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...t},n=(i=>typeof i=="string"?i==="*"?()=>i:l=>i===l?l:null:typeof i=="function"?i:l=>i.includes(l)?l:null)(s.origin),a=(i=>typeof i=="function"?i:Array.isArray(i)?()=>i:()=>[])(s.allowMethods);return async function(l,c){var h;function o(f,b){l.res.headers.set(f,b)}const d=n(l.req.header("origin")||"",l);if(d&&o("Access-Control-Allow-Origin",d),s.origin!=="*"){const f=l.req.header("Vary");f?o("Vary",f):o("Vary","Origin")}if(s.credentials&&o("Access-Control-Allow-Credentials","true"),(h=s.exposeHeaders)!=null&&h.length&&o("Access-Control-Expose-Headers",s.exposeHeaders.join(",")),l.req.method==="OPTIONS"){s.maxAge!=null&&o("Access-Control-Max-Age",s.maxAge.toString());const f=a(l.req.header("origin")||"",l);f.length&&o("Access-Control-Allow-Methods",f.join(","));let b=s.allowHeaders;if(!(b!=null&&b.length)){const y=l.req.header("Access-Control-Request-Headers");y&&(b=y.split(/\s*,\s*/))}return b!=null&&b.length&&(o("Access-Control-Allow-Headers",b.join(",")),l.res.headers.append("Vary","Access-Control-Request-Headers")),l.res.headers.delete("Content-Length"),l.res.headers.delete("Content-Type"),new Response(null,{headers:l.res.headers,status:204,statusText:"No Content"})}await c()}},$n=/^\s*(?:text\/(?!event-stream(?:[;\s]|$))[^;\s]+|application\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\.dart|vnd\.ms-fontobject|vnd\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\/(?:otf|ttf)|image\/(?:bmp|vnd\.adobe\.photoshop|vnd\.microsoft\.icon|vnd\.ms-dds|x-icon|x-ms-bmp)|message\/rfc822|model\/gltf-binary|x-shader\/x-fragment|x-shader\/x-vertex|[^;\s]+?\+(?:json|text|xml|yaml))(?:[;\s]|$)/i,xr=(t,r=Hn)=>{const s=/\.([a-zA-Z0-9]+?)$/,n=t.match(s);if(!n)return;let a=r[n[1]];return a&&a.startsWith("text")&&(a+="; charset=utf-8"),a},Un={aac:"audio/aac",avi:"video/x-msvideo",avif:"image/avif",av1:"video/av1",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",map:"application/json",mid:"audio/x-midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",pdf:"application/pdf",png:"image/png",rtf:"application/rtf",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",wasm:"application/wasm",webm:"video/webm",weba:"audio/webm",webmanifest:"application/manifest+json",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xml:"application/xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2",gltf:"model/gltf+json",glb:"model/gltf-binary"},Hn=Un,Wn=(...t)=>{let r=t.filter(a=>a!=="").join("/");r=r.replace(new RegExp("(?<=\\/)\\/+","g"),"");const s=r.split("/"),n=[];for(const a of s)a===".."&&n.length>0&&n.at(-1)!==".."?n.pop():a!=="."&&n.push(a);return n.join("/")||"."},Es={br:".br",zstd:".zst",gzip:".gz"},Jn=Object.keys(Es),Fn="index.html",zn=t=>{const r=t.root??"./",s=t.path,n=t.join??Wn;return async(a,i)=>{var h,f,b,y;if(a.finalized)return i();let l;if(t.path)l=t.path;else try{if(l=decodeURIComponent(a.req.path),/(?:^|[\/\\])\.\.(?:$|[\/\\])/.test(l))throw new Error}catch{return await((h=t.onNotFound)==null?void 0:h.call(t,a.req.path,a)),i()}let c=n(r,!s&&t.rewriteRequestPath?t.rewriteRequestPath(l):l);t.isDir&&await t.isDir(c)&&(c=n(c,Fn));const o=t.getContent;let d=await o(c,a);if(d instanceof Response)return a.newResponse(d.body,d);if(d){const x=t.mimes&&xr(c,t.mimes)||xr(c);if(a.header("Content-Type",x||"application/octet-stream"),t.precompressed&&(!x||$n.test(x))){const p=new Set((f=a.req.header("Accept-Encoding"))==null?void 0:f.split(",").map(v=>v.trim()));for(const v of Jn){if(!p.has(v))continue;const E=await o(c+Es[v],a);if(E){d=E,a.header("Content-Encoding",v),a.header("Vary","Accept-Encoding",{append:!0});break}}}return await((b=t.onFound)==null?void 0:b.call(t,c,a)),a.body(d)}await((y=t.onNotFound)==null?void 0:y.call(t,c,a)),await i()}},Gn=async(t,r)=>{let s;r&&r.manifest?typeof r.manifest=="string"?s=JSON.parse(r.manifest):s=r.manifest:typeof __STATIC_CONTENT_MANIFEST=="string"?s=JSON.parse(__STATIC_CONTENT_MANIFEST):s=__STATIC_CONTENT_MANIFEST;let n;r&&r.namespace?n=r.namespace:n=__STATIC_CONTENT;const a=s[t]||t;if(!a)return null;const i=await n.get(a,{type:"stream"});return i||null},qn=t=>async function(s,n){return zn({...t,getContent:async i=>Gn(i,{manifest:t.manifest,namespace:t.namespace?t.namespace:s.env?s.env.__STATIC_CONTENT:void 0})})(s,n)},Vn=t=>qn(t);const ft=new TextEncoder,Ge=new TextDecoder;function Zn(...t){const r=t.reduce((a,{length:i})=>a+i,0),s=new Uint8Array(r);let n=0;for(const a of t)s.set(a,n),n+=a.length;return s}function Yn(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(t);const r=atob(t),s=new Uint8Array(r.length);for(let n=0;n<r.length;n++)s[n]=r.charCodeAt(n);return s}function Fe(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof t=="string"?t:Ge.decode(t),{alphabet:"base64url"});let r=t;r instanceof Uint8Array&&(r=Ge.decode(r)),r=r.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Yn(r)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}class _ extends Error{constructor(s,n){var a;super(s,n);m(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(a=Error.captureStackTrace)==null||a.call(Error,this,this.constructor)}}m(_,"code","ERR_JOSE_GENERIC");class K extends _{constructor(s,n,a="unspecified",i="unspecified"){super(s,{cause:{claim:a,reason:i,payload:n}});m(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");m(this,"claim");m(this,"reason");m(this,"payload");this.claim=a,this.reason=i,this.payload=n}}m(K,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class Ft extends _{constructor(s,n,a="unspecified",i="unspecified"){super(s,{cause:{claim:a,reason:i,payload:n}});m(this,"code","ERR_JWT_EXPIRED");m(this,"claim");m(this,"reason");m(this,"payload");this.claim=a,this.reason=i,this.payload=n}}m(Ft,"code","ERR_JWT_EXPIRED");class As extends _{constructor(){super(...arguments);m(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}m(As,"code","ERR_JOSE_ALG_NOT_ALLOWED");class z extends _{constructor(){super(...arguments);m(this,"code","ERR_JOSE_NOT_SUPPORTED")}}m(z,"code","ERR_JOSE_NOT_SUPPORTED");class j extends _{constructor(){super(...arguments);m(this,"code","ERR_JWS_INVALID")}}m(j,"code","ERR_JWS_INVALID");class rr extends _{constructor(){super(...arguments);m(this,"code","ERR_JWT_INVALID")}}m(rr,"code","ERR_JWT_INVALID");class sr extends _{constructor(){super(...arguments);m(this,"code","ERR_JWKS_INVALID")}}m(sr,"code","ERR_JWKS_INVALID");class nr extends _{constructor(s="no applicable key found in the JSON Web Key Set",n){super(s,n);m(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}m(nr,"code","ERR_JWKS_NO_MATCHING_KEY");var Jr,Fr;class Ss extends(Fr=_,Jr=Symbol.asyncIterator,Fr){constructor(s="multiple matching keys found in the JSON Web Key Set",n){super(s,n);m(this,Jr);m(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}m(Ss,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class ks extends _{constructor(s="request timed out",n){super(s,n);m(this,"code","ERR_JWKS_TIMEOUT")}}m(ks,"code","ERR_JWKS_TIMEOUT");class Is extends _{constructor(s="signature verification failed",n){super(s,n);m(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}m(Is,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function q(t,r="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${r} must be ${t}`)}function Ue(t,r){return t.name===r}function Lt(t){return parseInt(t.name.slice(4),10)}function Xn(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Qn(t,r){if(!t.usages.includes(r))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${r}.`)}function ea(t,r,s){switch(r){case"HS256":case"HS384":case"HS512":{if(!Ue(t.algorithm,"HMAC"))throw q("HMAC");const n=parseInt(r.slice(2),10);if(Lt(t.algorithm.hash)!==n)throw q(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Ue(t.algorithm,"RSASSA-PKCS1-v1_5"))throw q("RSASSA-PKCS1-v1_5");const n=parseInt(r.slice(2),10);if(Lt(t.algorithm.hash)!==n)throw q(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Ue(t.algorithm,"RSA-PSS"))throw q("RSA-PSS");const n=parseInt(r.slice(2),10);if(Lt(t.algorithm.hash)!==n)throw q(`SHA-${n}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!Ue(t.algorithm,"Ed25519"))throw q("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!Ue(t.algorithm,"ECDSA"))throw q("ECDSA");const n=Xn(r);if(t.algorithm.namedCurve!==n)throw q(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Qn(t,s)}function Ps(t,r,...s){var n;if(s=s.filter(Boolean),s.length>2){const a=s.pop();t+=`one of type ${s.join(", ")}, or ${a}.`}else s.length===2?t+=`one of type ${s[0]} or ${s[1]}.`:t+=`of type ${s[0]}.`;return r==null?t+=` Received ${r}`:typeof r=="function"&&r.name?t+=` Received function ${r.name}`:typeof r=="object"&&r!=null&&(n=r.constructor)!=null&&n.name&&(t+=` Received an instance of ${r.constructor.name}`),t}const ta=(t,...r)=>Ps("Key must be ",t,...r);function Cs(t,r,...s){return Ps(`Key for the ${t} algorithm must be `,r,...s)}function Rs(t){return(t==null?void 0:t[Symbol.toStringTag])==="CryptoKey"}function Ts(t){return(t==null?void 0:t[Symbol.toStringTag])==="KeyObject"}const js=t=>Rs(t)||Ts(t),ra=(...t)=>{const r=t.filter(Boolean);if(r.length===0||r.length===1)return!0;let s;for(const n of r){const a=Object.keys(n);if(!s||s.size===0){s=new Set(a);continue}for(const i of a){if(s.has(i))return!1;s.add(i)}}return!0};function sa(t){return typeof t=="object"&&t!==null}const he=t=>{if(!sa(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r},na=(t,r)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:s}=r.algorithm;if(typeof s!="number"||s<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}};function aa(t){let r,s;switch(t.kty){case"RSA":{switch(t.alg){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},s=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},s=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},s=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new z('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(t.alg){case"ES256":r={name:"ECDSA",namedCurve:"P-256"},s=t.d?["sign"]:["verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},s=t.d?["sign"]:["verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},s=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:"ECDH",namedCurve:t.crv},s=t.d?["deriveBits"]:[];break;default:throw new z('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(t.alg){case"Ed25519":case"EdDSA":r={name:"Ed25519"},s=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:t.crv},s=t.d?["deriveBits"]:[];break;default:throw new z('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new z('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:r,keyUsages:s}}const Os=async t=>{if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:r,keyUsages:s}=aa(t),n={...t};return delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,r,t.ext??!t.d,t.key_ops??s)};async function ia(t,r,s){if(!he(t))throw new TypeError("JWK must be an object");let n;switch(r??(r=t.alg),n??(n=t.ext),t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Fe(t.k);case"RSA":if("oth"in t&&t.oth!==void 0)throw new z('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Os({...t,alg:r,ext:n});default:throw new z('Unsupported "kty" (Key Type) Parameter value')}}const la=(t,r,s,n,a)=>{if(a.crit!==void 0&&(n==null?void 0:n.crit)===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(l=>typeof l!="string"||l.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;s!==void 0?i=new Map([...Object.entries(s),...r.entries()]):i=r;for(const l of n.crit){if(!i.has(l))throw new z(`Extension Header Parameter "${l}" is not recognized`);if(a[l]===void 0)throw new t(`Extension Header Parameter "${l}" is missing`);if(i.get(l)&&n[l]===void 0)throw new t(`Extension Header Parameter "${l}" MUST be integrity protected`)}return new Set(n.crit)},ca=(t,r)=>{if(r!==void 0&&(!Array.isArray(r)||r.some(s=>typeof s!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(r)return new Set(r)};function ar(t){return he(t)&&typeof t.kty=="string"}function oa(t){return t.kty!=="oct"&&typeof t.d=="string"}function da(t){return t.kty!=="oct"&&typeof t.d>"u"}function ua(t){return t.kty==="oct"&&typeof t.k=="string"}let Ce;const vr=async(t,r,s,n=!1)=>{Ce||(Ce=new WeakMap);let a=Ce.get(t);if(a!=null&&a[s])return a[s];const i=await Os({...r,alg:s});return n&&Object.freeze(t),a?a[s]=i:Ce.set(t,{[s]:i}),i},ha=(t,r)=>{var l;Ce||(Ce=new WeakMap);let s=Ce.get(t);if(s!=null&&s[r])return s[r];const n=t.type==="public",a=!!n;let i;if(t.asymmetricKeyType==="x25519"){switch(r){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}i=t.toCryptoKey(t.asymmetricKeyType,a,n?[]:["deriveBits"])}if(t.asymmetricKeyType==="ed25519"){if(r!=="EdDSA"&&r!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");i=t.toCryptoKey(t.asymmetricKeyType,a,[n?"verify":"sign"])}if(t.asymmetricKeyType==="rsa"){let c;switch(r){case"RSA-OAEP":c="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":c="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":c="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":c="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(r.startsWith("RSA-OAEP"))return t.toCryptoKey({name:"RSA-OAEP",hash:c},a,n?["encrypt"]:["decrypt"]);i=t.toCryptoKey({name:r.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:c},a,[n?"verify":"sign"])}if(t.asymmetricKeyType==="ec"){const o=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((l=t.asymmetricKeyDetails)==null?void 0:l.namedCurve);if(!o)throw new TypeError("given KeyObject instance cannot be used for this algorithm");r==="ES256"&&o==="P-256"&&(i=t.toCryptoKey({name:"ECDSA",namedCurve:o},a,[n?"verify":"sign"])),r==="ES384"&&o==="P-384"&&(i=t.toCryptoKey({name:"ECDSA",namedCurve:o},a,[n?"verify":"sign"])),r==="ES512"&&o==="P-521"&&(i=t.toCryptoKey({name:"ECDSA",namedCurve:o},a,[n?"verify":"sign"])),r.startsWith("ECDH-ES")&&(i=t.toCryptoKey({name:"ECDH",namedCurve:o},a,n?[]:["deriveBits"]))}if(!i)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return s?s[r]=i:Ce.set(t,{[r]:i}),i},fa=async(t,r)=>{if(t instanceof Uint8Array||Rs(t))return t;if(Ts(t)){if(t.type==="secret")return t.export();if("toCryptoKey"in t&&typeof t.toCryptoKey=="function")try{return ha(t,r)}catch(n){if(n instanceof TypeError)throw n}let s=t.export({format:"jwk"});return vr(t,s,r)}if(ar(t))return t.k?Fe(t.k):vr(t,t,r,!0);throw new Error("unreachable")},Pe=t=>t==null?void 0:t[Symbol.toStringTag],zt=(t,r,s)=>{var n,a;if(r.use!==void 0){let i;switch(s){case"sign":case"verify":i="sig";break;case"encrypt":case"decrypt":i="enc";break}if(r.use!==i)throw new TypeError(`Invalid key for this operation, its "use" must be "${i}" when present`)}if(r.alg!==void 0&&r.alg!==t)throw new TypeError(`Invalid key for this operation, its "alg" must be "${t}" when present`);if(Array.isArray(r.key_ops)){let i;switch(!0){case s==="verify":case t==="dir":case t.includes("CBC-HS"):i=s;break;case t.startsWith("PBES2"):i="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(t):!t.includes("GCM")&&t.endsWith("KW")?i="unwrapKey":i=s;break;case s==="encrypt":i="wrapKey";break;case s==="decrypt":i=t.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(i&&((a=(n=r.key_ops)==null?void 0:n.includes)==null?void 0:a.call(n,i))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${i}" when present`)}return!0},ba=(t,r,s)=>{if(!(r instanceof Uint8Array)){if(ar(r)){if(ua(r)&&zt(t,r,s))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!js(r))throw new TypeError(Cs(t,r,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(r.type!=="secret")throw new TypeError(`${Pe(r)} instances for symmetric algorithms must be of type "secret"`)}},ma=(t,r,s)=>{if(ar(r))switch(s){case"decrypt":case"sign":if(oa(r)&&zt(t,r,s))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(da(r)&&zt(t,r,s))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!js(r))throw new TypeError(Cs(t,r,"CryptoKey","KeyObject","JSON Web Key"));if(r.type==="secret")throw new TypeError(`${Pe(r)} instances for asymmetric algorithms must not be of type "secret"`);if(r.type==="public")switch(s){case"sign":throw new TypeError(`${Pe(r)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Pe(r)} instances for asymmetric algorithm decryption must be of type "private"`)}if(r.type==="private")switch(s){case"verify":throw new TypeError(`${Pe(r)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Pe(r)} instances for asymmetric algorithm encryption must be of type "public"`)}},pa=(t,r,s)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(t)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(t)?ba(t,r,s):ma(t,r,s)},ga=(t,r)=>{const s=`SHA-${t.slice(-3)}`;switch(t){case"HS256":case"HS384":case"HS512":return{hash:s,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:s,name:"RSA-PSS",saltLength:parseInt(t.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:s,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:s,name:"ECDSA",namedCurve:r.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new z(`alg ${t} is not supported either by JOSE or your javascript runtime`)}},ya=async(t,r,s)=>{if(r instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(ta(r,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",r,{hash:`SHA-${t.slice(-3)}`,name:"HMAC"},!1,[s])}return ea(r,t,s),r},xa=async(t,r,s,n)=>{const a=await ya(t,r,"verify");na(t,a);const i=ga(t,a.algorithm);try{return await crypto.subtle.verify(i,a,s,n)}catch{return!1}};async function va(t,r,s){if(!he(t))throw new j("Flattened JWS must be an object");if(t.protected===void 0&&t.header===void 0)throw new j('Flattened JWS must have either of the "protected" or "header" members');if(t.protected!==void 0&&typeof t.protected!="string")throw new j("JWS Protected Header incorrect type");if(t.payload===void 0)throw new j("JWS Payload missing");if(typeof t.signature!="string")throw new j("JWS Signature missing or incorrect type");if(t.header!==void 0&&!he(t.header))throw new j("JWS Unprotected Header incorrect type");let n={};if(t.protected)try{const v=Fe(t.protected);n=JSON.parse(Ge.decode(v))}catch{throw new j("JWS Protected Header is invalid")}if(!ra(n,t.header))throw new j("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...n,...t.header},i=la(j,new Map([["b64",!0]]),s==null?void 0:s.crit,n,a);let l=!0;if(i.has("b64")&&(l=n.b64,typeof l!="boolean"))throw new j('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:c}=a;if(typeof c!="string"||!c)throw new j('JWS "alg" (Algorithm) Header Parameter missing or invalid');const o=s&&ca("algorithms",s.algorithms);if(o&&!o.has(c))throw new As('"alg" (Algorithm) Header Parameter value not allowed');if(l){if(typeof t.payload!="string")throw new j("JWS Payload must be a string")}else if(typeof t.payload!="string"&&!(t.payload instanceof Uint8Array))throw new j("JWS Payload must be a string or an Uint8Array instance");let d=!1;typeof r=="function"&&(r=await r(n,t),d=!0),pa(c,r,"verify");const h=Zn(ft.encode(t.protected??""),ft.encode("."),typeof t.payload=="string"?ft.encode(t.payload):t.payload);let f;try{f=Fe(t.signature)}catch{throw new j("Failed to base64url decode the signature")}const b=await fa(r,c);if(!await xa(c,b,f,h))throw new Is;let x;if(l)try{x=Fe(t.payload)}catch{throw new j("Failed to base64url decode the payload")}else typeof t.payload=="string"?x=ft.encode(t.payload):x=t.payload;const p={payload:x};return t.protected!==void 0&&(p.protectedHeader=n),t.header!==void 0&&(p.unprotectedHeader=t.header),d?{...p,key:b}:p}async function wa(t,r,s){if(t instanceof Uint8Array&&(t=Ge.decode(t)),typeof t!="string")throw new j("Compact JWS must be a string or Uint8Array");const{0:n,1:a,2:i,length:l}=t.split(".");if(l!==3)throw new j("Invalid Compact JWS");const c=await va({payload:a,protected:n,signature:i},r,s),o={payload:c.payload,protectedHeader:c.protectedHeader};return typeof r=="function"?{...o,key:c.key}:o}const Ea=t=>Math.floor(t.getTime()/1e3),Bs=60,Ls=Bs*60,ir=Ls*24,Aa=ir*7,Sa=ir*365.25,ka=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,wr=t=>{const r=ka.exec(t);if(!r||r[4]&&r[1])throw new TypeError("Invalid time period format");const s=parseFloat(r[2]),n=r[3].toLowerCase();let a;switch(n){case"sec":case"secs":case"second":case"seconds":case"s":a=Math.round(s);break;case"minute":case"minutes":case"min":case"mins":case"m":a=Math.round(s*Bs);break;case"hour":case"hours":case"hr":case"hrs":case"h":a=Math.round(s*Ls);break;case"day":case"days":case"d":a=Math.round(s*ir);break;case"week":case"weeks":case"w":a=Math.round(s*Aa);break;default:a=Math.round(s*Sa);break}return r[1]==="-"||r[4]==="ago"?-a:a},Er=t=>t.includes("/")?t.toLowerCase():`application/${t.toLowerCase()}`,Ia=(t,r)=>typeof t=="string"?r.includes(t):Array.isArray(t)?r.some(Set.prototype.has.bind(new Set(t))):!1;function Pa(t,r,s={}){let n;try{n=JSON.parse(Ge.decode(r))}catch{}if(!he(n))throw new rr("JWT Claims Set must be a top-level JSON object");const{typ:a}=s;if(a&&(typeof t.typ!="string"||Er(t.typ)!==Er(a)))throw new K('unexpected "typ" JWT header value',n,"typ","check_failed");const{requiredClaims:i=[],issuer:l,subject:c,audience:o,maxTokenAge:d}=s,h=[...i];d!==void 0&&h.push("iat"),o!==void 0&&h.push("aud"),c!==void 0&&h.push("sub"),l!==void 0&&h.push("iss");for(const x of new Set(h.reverse()))if(!(x in n))throw new K(`missing required "${x}" claim`,n,x,"missing");if(l&&!(Array.isArray(l)?l:[l]).includes(n.iss))throw new K('unexpected "iss" claim value',n,"iss","check_failed");if(c&&n.sub!==c)throw new K('unexpected "sub" claim value',n,"sub","check_failed");if(o&&!Ia(n.aud,typeof o=="string"?[o]:o))throw new K('unexpected "aud" claim value',n,"aud","check_failed");let f;switch(typeof s.clockTolerance){case"string":f=wr(s.clockTolerance);break;case"number":f=s.clockTolerance;break;case"undefined":f=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:b}=s,y=Ea(b||new Date);if((n.iat!==void 0||d)&&typeof n.iat!="number")throw new K('"iat" claim must be a number',n,"iat","invalid");if(n.nbf!==void 0){if(typeof n.nbf!="number")throw new K('"nbf" claim must be a number',n,"nbf","invalid");if(n.nbf>y+f)throw new K('"nbf" claim timestamp check failed',n,"nbf","check_failed")}if(n.exp!==void 0){if(typeof n.exp!="number")throw new K('"exp" claim must be a number',n,"exp","invalid");if(n.exp<=y-f)throw new Ft('"exp" claim timestamp check failed',n,"exp","check_failed")}if(d){const x=y-n.iat,p=typeof d=="number"?d:wr(d);if(x-f>p)throw new Ft('"iat" claim timestamp check failed (too far in the past)',n,"iat","check_failed");if(x<0-f)throw new K('"iat" claim timestamp check failed (it should be in the past)',n,"iat","check_failed")}return n}async function Ca(t,r,s){var l;const n=await wa(t,r,s);if((l=n.protectedHeader.crit)!=null&&l.includes("b64")&&n.protectedHeader.b64===!1)throw new rr("JWTs MUST NOT use unencoded payload");const i={payload:Pa(n.protectedHeader,n.payload,s),protectedHeader:n.protectedHeader};return typeof r=="function"?{...i,key:n.key}:i}function Ra(t){switch(typeof t=="string"&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new z('Unsupported "alg" value for a JSON Web Key Set')}}function Ta(t){return t&&typeof t=="object"&&Array.isArray(t.keys)&&t.keys.every(ja)}function ja(t){return he(t)}var Le,rt;class Oa{constructor(r){w(this,Le);w(this,rt,new WeakMap);if(!Ta(r))throw new sr("JSON Web Key Set malformed");g(this,Le,structuredClone(r))}jwks(){return u(this,Le)}async getKey(r,s){const{alg:n,kid:a}={...r,...s==null?void 0:s.header},i=Ra(n),l=u(this,Le).keys.filter(d=>{let h=i===d.kty;if(h&&typeof a=="string"&&(h=a===d.kid),h&&typeof d.alg=="string"&&(h=n===d.alg),h&&typeof d.use=="string"&&(h=d.use==="sig"),h&&Array.isArray(d.key_ops)&&(h=d.key_ops.includes("verify")),h)switch(n){case"ES256":h=d.crv==="P-256";break;case"ES384":h=d.crv==="P-384";break;case"ES512":h=d.crv==="P-521";break;case"Ed25519":case"EdDSA":h=d.crv==="Ed25519";break}return h}),{0:c,length:o}=l;if(o===0)throw new nr;if(o!==1){const d=new Ss,h=u(this,rt);throw d[Symbol.asyncIterator]=async function*(){for(const f of l)try{yield await Ar(h,f,n)}catch{}},d}return Ar(u(this,rt),c,n)}}Le=new WeakMap,rt=new WeakMap;async function Ar(t,r,s){const n=t.get(r)||t.set(r,{}).get(r);if(n[s]===void 0){const a=await ia({...r,ext:!0},s);if(a instanceof Uint8Array||a.type!=="public")throw new sr("JSON Web Key Set members must be public keys");n[s]=a}return n[s]}function Sr(t){const r=new Oa(t),s=async(n,a)=>r.getKey(n,a);return Object.defineProperties(s,{jwks:{value:()=>structuredClone(r.jwks()),enumerable:!1,configurable:!1,writable:!1}}),s}function Ba(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}let Gt;var mt,zr;(typeof navigator>"u"||!((zr=(mt=navigator.userAgent)==null?void 0:mt.startsWith)!=null&&zr.call(mt,"Mozilla/5.0 ")))&&(Gt="jose/v6.0.13");const La=Symbol();async function Da(t,r,s,n=fetch){const a=await n(t,{method:"GET",signal:s,redirect:"manual",headers:r}).catch(i=>{throw i.name==="TimeoutError"?new ks:i});if(a.status!==200)throw new _("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await a.json()}catch{throw new _("Failed to parse the JSON Web Key Set HTTP response as JSON")}}const Dt=Symbol();function _a(t,r){return!(typeof t!="object"||t===null||!("uat"in t)||typeof t.uat!="number"||Date.now()-t.uat>=r||!("jwks"in t)||!he(t.jwks)||!Array.isArray(t.jwks.keys)||!Array.prototype.every.call(t.jwks.keys,he))}var st,nt,at,De,ee,J,F,it,te,re;class Na{constructor(r,s){w(this,st);w(this,nt);w(this,at);w(this,De);w(this,ee);w(this,J);w(this,F);w(this,it);w(this,te);w(this,re);if(!(r instanceof URL))throw new TypeError("url must be an instance of URL");g(this,st,new URL(r.href)),g(this,nt,typeof(s==null?void 0:s.timeoutDuration)=="number"?s==null?void 0:s.timeoutDuration:5e3),g(this,at,typeof(s==null?void 0:s.cooldownDuration)=="number"?s==null?void 0:s.cooldownDuration:3e4),g(this,De,typeof(s==null?void 0:s.cacheMaxAge)=="number"?s==null?void 0:s.cacheMaxAge:6e5),g(this,F,new Headers(s==null?void 0:s.headers)),Gt&&!u(this,F).has("User-Agent")&&u(this,F).set("User-Agent",Gt),u(this,F).has("accept")||(u(this,F).set("accept","application/json"),u(this,F).append("accept","application/jwk-set+json")),g(this,it,s==null?void 0:s[La]),(s==null?void 0:s[Dt])!==void 0&&(g(this,re,s==null?void 0:s[Dt]),_a(s==null?void 0:s[Dt],u(this,De))&&(g(this,ee,u(this,re).uat),g(this,te,Sr(u(this,re).jwks))))}pendingFetch(){return!!u(this,J)}coolingDown(){return typeof u(this,ee)=="number"?Date.now()<u(this,ee)+u(this,at):!1}fresh(){return typeof u(this,ee)=="number"?Date.now()<u(this,ee)+u(this,De):!1}jwks(){var r;return(r=u(this,te))==null?void 0:r.jwks()}async getKey(r,s){(!u(this,te)||!this.fresh())&&await this.reload();try{return await u(this,te).call(this,r,s)}catch(n){if(n instanceof nr&&this.coolingDown()===!1)return await this.reload(),u(this,te).call(this,r,s);throw n}}async reload(){u(this,J)&&Ba()&&g(this,J,void 0),u(this,J)||g(this,J,Da(u(this,st).href,u(this,F),AbortSignal.timeout(u(this,nt)),u(this,it)).then(r=>{g(this,te,Sr(r)),u(this,re)&&(u(this,re).uat=Date.now(),u(this,re).jwks=r),g(this,ee,Date.now()),g(this,J,void 0)}).catch(r=>{throw g(this,J,void 0),r})),await u(this,J)}}st=new WeakMap,nt=new WeakMap,at=new WeakMap,De=new WeakMap,ee=new WeakMap,J=new WeakMap,F=new WeakMap,it=new WeakMap,te=new WeakMap,re=new WeakMap;function Ma(t,r){const s=new Na(t,r),n=async(a,i)=>s.getKey(a,i);return Object.defineProperties(n,{coolingDown:{get:()=>s.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>s.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>s.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>s.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>s.jwks(),enumerable:!0,configurable:!1,writable:!1}}),n}var qe="_hp",Ka={Change:"Input",DoubleClick:"DblClick"},$a={svg:"2000/svg",math:"1998/Math/MathML"},Ve=[],qt=new WeakMap,Ne=void 0,Ua=()=>Ne,V=t=>"t"in t,_t={onClick:["click",!1]},kr=t=>{if(!t.startsWith("on"))return;if(_t[t])return _t[t];const r=t.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(r){const[,s,n]=r;return _t[t]=[(Ka[s]||s).toLowerCase(),!!n]}},Ir=(t,r)=>Ne&&t instanceof SVGElement&&/[A-Z]/.test(r)&&(r in t.style||r.match(/^(?:o|pai|str|u|ve)/))?r.replace(/([A-Z])/g,"-$1").toLowerCase():r,Ha=(t,r,s)=>{var n;r||(r={});for(let a in r){const i=r[a];if(a!=="children"&&(!s||s[a]!==i)){a=kt(a);const l=kr(a);if(l){if((s==null?void 0:s[a])!==i&&(s&&t.removeEventListener(l[0],s[a],l[1]),i!=null)){if(typeof i!="function")throw new Error(`Event handler for "${a}" is not a function`);t.addEventListener(l[0],i,l[1])}}else if(a==="dangerouslySetInnerHTML"&&i)t.innerHTML=i.__html;else if(a==="ref"){let c;typeof i=="function"?c=i(t)||(()=>i(null)):i&&"current"in i&&(i.current=t,c=()=>i.current=null),qt.set(t,c)}else if(a==="style"){const c=t.style;typeof i=="string"?c.cssText=i:(c.cssText="",i!=null&&rs(i,c.setProperty.bind(c)))}else{if(a==="value"){const o=t.nodeName;if(o==="INPUT"||o==="TEXTAREA"||o==="SELECT"){if(t.value=i==null||i===!1?null:i,o==="TEXTAREA"){t.textContent=i;continue}else if(o==="SELECT"){t.selectedIndex===-1&&(t.selectedIndex=0);continue}}}else(a==="checked"&&t.nodeName==="INPUT"||a==="selected"&&t.nodeName==="OPTION")&&(t[a]=i);const c=Ir(t,a);i==null||i===!1?t.removeAttribute(c):i===!0?t.setAttribute(c,""):typeof i=="string"||typeof i=="number"?t.setAttribute(c,i):t.setAttribute(c,i.toString())}}}if(s)for(let a in s){const i=s[a];if(a!=="children"&&!(a in r)){a=kt(a);const l=kr(a);l?t.removeEventListener(l[0],i,l[1]):a==="ref"?(n=qt.get(t))==null||n():t.removeAttribute(Ir(t,a))}}},Wa=(t,r)=>{r[C][0]=0,Ve.push([t,r]);const s=r.tag[Yt]||r.tag,n=s.defaultProps?{...s.defaultProps,...r.props}:r.props;try{return[s.call(null,n)]}finally{Ve.pop()}},Ds=(t,r,s,n,a)=>{var i,l;(i=t.vR)!=null&&i.length&&(n.push(...t.vR),delete t.vR),typeof t.tag=="function"&&((l=t[C][1][Ks])==null||l.forEach(c=>a.push(c))),t.vC.forEach(c=>{var o;if(V(c))s.push(c);else if(typeof c.tag=="function"||c.tag===""){c.c=r;const d=s.length;if(Ds(c,r,s,n,a),c.s){for(let h=d;h<s.length;h++)s[h].s=!0;c.s=!1}}else s.push(c),(o=c.vR)!=null&&o.length&&(n.push(...c.vR),delete c.vR)})},Ja=t=>{for(;;t=t.tag===qe||!t.vC||!t.pP?t.nN:t.vC[0]){if(!t)return null;if(t.tag!==qe&&t.e)return t.e}},_s=t=>{var r,s,n,a,i,l;V(t)||((s=(r=t[C])==null?void 0:r[1][Ks])==null||s.forEach(c=>{var o;return(o=c[2])==null?void 0:o.call(c)}),(n=qt.get(t.e))==null||n(),t.p===2&&((a=t.vC)==null||a.forEach(c=>c.p=2)),(i=t.vC)==null||i.forEach(_s)),t.p||((l=t.e)==null||l.remove(),delete t.e),typeof t.tag=="function"&&(He.delete(t),Et.delete(t),delete t[C][3],t.a=!0)},Ns=(t,r,s)=>{t.c=r,Ms(t,r,s)},Pr=(t,r)=>{if(r){for(let s=0,n=t.length;s<n;s++)if(t[s]===r)return s}},Cr=Symbol(),Ms=(t,r,s)=>{var d;const n=[],a=[],i=[];Ds(t,r,n,a,i),a.forEach(_s);const l=s?void 0:r.childNodes;let c,o=null;if(s)c=-1;else if(!l.length)c=0;else{const h=Pr(l,Ja(t.nN));h!==void 0?(o=l[h],c=h):c=Pr(l,(d=n.find(f=>f.tag!==qe&&f.e))==null?void 0:d.e)??-1,c===-1&&(s=!0)}for(let h=0,f=n.length;h<f;h++,c++){const b=n[h];let y;if(b.s&&b.e)y=b.e,b.s=!1;else{const x=s||!b.e;V(b)?(b.e&&b.d&&(b.e.textContent=b.t),b.d=!1,y=b.e||(b.e=document.createTextNode(b.t))):(y=b.e||(b.e=b.n?document.createElementNS(b.n,b.tag):document.createElement(b.tag)),Ha(y,b.props,b.pP),Ms(b,y,x))}b.tag===qe?c--:s?y.parentNode||r.appendChild(y):l[c]!==y&&l[c-1]!==y&&(l[c+1]===y?r.appendChild(l[c]):r.insertBefore(y,o||l[c]||null))}if(t.pP&&delete t.pP,i.length){const h=[],f=[];i.forEach(([,b,,y,x])=>{b&&h.push(b),y&&f.push(y),x==null||x()}),h.forEach(b=>b()),f.length&&requestAnimationFrame(()=>{f.forEach(b=>b())})}},Fa=(t,r)=>!!(t&&t.length===r.length&&t.every((s,n)=>s[1]===r[n][1])),Et=new WeakMap,Vt=(t,r,s)=>{var i,l,c,o,d,h;const n=!s&&r.pC;s&&(r.pC||(r.pC=r.vC));let a;try{s||(s=typeof r.tag=="function"?Wa(t,r):lt(r.props.children)),((i=s[0])==null?void 0:i.tag)===""&&s[0][Ut]&&(a=s[0][Ut],t[5].push([t,a,r]));const f=n?[...r.pC]:r.vC?[...r.vC]:void 0,b=[];let y;for(let x=0;x<s.length;x++){Array.isArray(s[x])&&s.splice(x,1,...s[x].flat());let p=za(s[x]);if(p){typeof p.tag=="function"&&!p.tag[Yr]&&(_e.length>0&&(p[C][2]=_e.map(E=>[E,E.values.at(-1)])),(l=t[5])!=null&&l.length&&(p[C][3]=t[5].at(-1)));let v;if(f&&f.length){const E=f.findIndex(V(p)?A=>V(A):p.key!==void 0?A=>A.key===p.key&&A.tag===p.tag:A=>A.tag===p.tag);E!==-1&&(v=f[E],f.splice(E,1))}if(v)if(V(p))v.t!==p.t&&(v.t=p.t,v.d=!0),p=v;else{const E=v.pP=v.props;if(v.props=p.props,v.f||(v.f=p.f||r.f),typeof p.tag=="function"){const A=v[C][2];v[C][2]=p[C][2]||[],v[C][3]=p[C][3],!v.f&&((v.o||v)===p.o||(o=(c=v.tag)[Vs])!=null&&o.call(c,E,v.props))&&Fa(A,v[C][2])&&(v.s=!0)}p=v}else if(!V(p)&&Ne){const E=Ke(Ne);E&&(p.n=E)}if(!V(p)&&!p.s&&(Vt(t,p),delete p.f),b.push(p),y&&!y.s&&!p.s)for(let E=y;E&&!V(E);E=(d=E.vC)==null?void 0:d.at(-1))E.nN=p;y=p}}r.vR=n?[...r.vC,...f||[]]:f||[],r.vC=b,n&&delete r.pC}catch(f){if(r.f=!0,f===Cr){if(a)return;throw f}const[b,y,x]=((h=r[C])==null?void 0:h[3])||[];if(y){const p=()=>At([0,!1,t[2]],x),v=Et.get(x)||[];v.push(p),Et.set(x,v);const E=y(f,()=>{const A=Et.get(x);if(A){const I=A.indexOf(p);if(I!==-1)return A.splice(I,1),p()}});if(E){if(t[0]===1)t[1]=!0;else if(Vt(t,x,[E]),(y.length===1||t!==b)&&x.c){Ns(x,x.c,!1);return}throw Cr}}throw f}finally{a&&t[5].pop()}},za=t=>{if(!(t==null||typeof t=="boolean")){if(typeof t=="string"||typeof t=="number")return{t:t.toString(),d:!0};if("vR"in t&&(t={tag:t.tag,props:t.props,key:t.key,f:t.f,type:t.tag,ref:t.props.ref,o:t.o||t}),typeof t.tag=="function")t[C]=[0,[]];else{const r=$a[t.tag];r&&(Ne||(Ne=Qr("")),t.props.children=[{tag:Ne,props:{value:t.n=`http://www.w3.org/${r}`,children:t.props.children}}])}return t}},Rr=(t,r)=>{var s,n;(s=r[C][2])==null||s.forEach(([a,i])=>{a.values.push(i)});try{Vt(t,r,void 0)}catch{return}if(r.a){delete r.a;return}(n=r[C][2])==null||n.forEach(([a])=>{a.values.pop()}),(t[0]!==1||!t[1])&&Ns(r,r.c,!1)},He=new WeakMap,Tr=[],At=async(t,r)=>{t[5]||(t[5]=[]);const s=He.get(r);s&&s[0](void 0);let n;const a=new Promise(i=>n=i);if(He.set(r,[n,()=>{t[2]?t[2](t,r,i=>{Rr(i,r)}).then(()=>n(r)):(Rr(t,r),n(r))}]),Tr.length)Tr.at(-1).add(r);else{await Promise.resolve();const i=He.get(r);i&&(He.delete(r),i[1]())}return a},Ga=(t,r,s)=>({tag:qe,props:{children:t},key:s,e:r,p:1}),Nt=0,Ks=1,Mt=2,Kt=3,$t=new WeakMap,$s=(t,r)=>!t||!r||t.length!==r.length||r.some((s,n)=>s!==t[n]),qa=void 0,jr=[],Va=t=>{var l;const r=()=>typeof t=="function"?t():t,s=Ve.at(-1);if(!s)return[r(),()=>{}];const[,n]=s,a=(l=n[C][1])[Nt]||(l[Nt]=[]),i=n[C][0]++;return a[i]||(a[i]=[r(),c=>{const o=qa,d=a[i];if(typeof c=="function"&&(c=c(d[0])),!Object.is(c,d[0]))if(d[0]=c,jr.length){const[h,f]=jr.at(-1);Promise.all([h===3?n:At([h,!1,o],n),f]).then(([b])=>{if(!b||!(h===2||h===3))return;const y=b.vC;requestAnimationFrame(()=>{setTimeout(()=>{y===b.vC&&At([h===3?1:0,!1,o],b)})})})}else At([0,!1,o],n)}])},lr=(t,r)=>{var c;const s=Ve.at(-1);if(!s)return t;const[,n]=s,a=(c=n[C][1])[Mt]||(c[Mt]=[]),i=n[C][0]++,l=a[i];return $s(l==null?void 0:l[1],r)?a[i]=[t,r]:t=a[i][0],t},Za=t=>{const r=$t.get(t);if(r){if(r.length===2)throw r[1];return r[0]}throw t.then(s=>$t.set(t,[s]),s=>$t.set(t,[void 0,s])),t},Ya=(t,r)=>{var c;const s=Ve.at(-1);if(!s)return t();const[,n]=s,a=(c=n[C][1])[Kt]||(c[Kt]=[]),i=n[C][0]++,l=a[i];return $s(l==null?void 0:l[1],r)&&(a[i]=[t(),r]),a[i][0]},Xa=Qr({pending:!1,data:null,method:null,action:null}),Or=new Set,Qa=t=>{Or.add(t),t.finally(()=>Or.delete(t))},cr=(t,r)=>Ya(()=>s=>{let n;t&&(typeof t=="function"?n=t(s)||(()=>{t(null)}):t&&"current"in t&&(t.current=s,n=()=>{t.current=null}));const a=r(s);return()=>{a==null||a(),n==null||n()}},[t]),Ae=Object.create(null),bt=Object.create(null),dt=(t,r,s,n,a)=>{if(r!=null&&r.itemProp)return{tag:t,props:r,type:t,ref:r.ref};const i=document.head;let{onLoad:l,onError:c,precedence:o,blocking:d,...h}=r,f=null,b=!1;const y=pt[t];let x;if(y.length>0){const A=i.querySelectorAll(t);e:for(const I of A)for(const S of pt[t])if(I.getAttribute(S)===r[S]){f=I;break e}if(!f){const I=y.reduce((S,B)=>r[B]===void 0?S:`${S}-${B}-${r[B]}`,t);b=!bt[I],f=bt[I]||(bt[I]=(()=>{const S=document.createElement(t);for(const B of y)r[B]!==void 0&&S.setAttribute(B,r[B]),r.rel&&S.setAttribute("rel",r.rel);return S})())}}else x=i.querySelectorAll(t);o=n?o??"":void 0,n&&(h[gt]=o);const p=lr(A=>{if(y.length>0){let I=!1;for(const S of i.querySelectorAll(t)){if(I&&S.getAttribute(gt)!==o){i.insertBefore(A,S);return}S.getAttribute(gt)===o&&(I=!0)}i.appendChild(A)}else if(x){let I=!1;for(const S of x)if(S===A){I=!0;break}I||i.insertBefore(A,i.contains(x[0])?x[0]:i.querySelector(t)),x=void 0}},[o]),v=cr(r.ref,A=>{var B;const I=y[0];if(s===2&&(A.innerHTML=""),(b||x)&&p(A),!c&&!l)return;let S=Ae[B=A.getAttribute(I)]||(Ae[B]=new Promise((we,fe)=>{A.addEventListener("load",we),A.addEventListener("error",fe)}));l&&(S=S.then(l)),c&&(S=S.catch(c)),S.catch(()=>{})});if(a&&d==="render"){const A=pt[t][0];if(r[A]){const I=r[A],S=Ae[I]||(Ae[I]=new Promise((B,we)=>{p(f),f.addEventListener("load",B),f.addEventListener("error",we)}));Za(S)}}const E={tag:t,type:t,props:{...h,ref:v},ref:v};return E.p=s,f&&(E.e=f),Ga(E,i)},ei=t=>{const r=Ua(),s=r&&Ke(r);return s!=null&&s.endsWith("svg")?{tag:"title",props:t,type:"title",ref:t.ref}:dt("title",t,void 0,!1,!1)},ti=t=>!t||["src","async"].some(r=>!t[r])?{tag:"script",props:t,type:"script",ref:t.ref}:dt("script",t,1,!1,!0),ri=t=>!t||!["href","precedence"].every(r=>r in t)?{tag:"style",props:t,type:"style",ref:t.ref}:(t["data-href"]=t.href,delete t.href,dt("style",t,2,!0,!0)),si=t=>!t||["onLoad","onError"].some(r=>r in t)||t.rel==="stylesheet"&&(!("precedence"in t)||"disabled"in t)?{tag:"link",props:t,type:"link",ref:t.ref}:dt("link",t,1,"precedence"in t,!0),ni=t=>dt("meta",t,void 0,!1,!1),Us=Symbol(),ai=t=>{const{action:r,...s}=t;typeof r!="function"&&(s.action=r);const[n,a]=Va([null,!1]),i=lr(async d=>{const h=d.isTrusted?r:d.detail[Us];if(typeof h!="function")return;d.preventDefault();const f=new FormData(d.target);a([f,!0]);const b=h(f);b instanceof Promise&&(Qa(b),await b),a([null,!0])},[]),l=cr(t.ref,d=>(d.addEventListener("submit",i),()=>{d.removeEventListener("submit",i)})),[c,o]=n;return n[1]=!1,{tag:Xa,props:{value:{pending:c!==null,data:c,method:c?"post":null,action:c?r:null},children:{tag:"form",props:{...s,ref:l},type:"form",ref:l}},f:o}},Hs=(t,{formAction:r,...s})=>{if(typeof r=="function"){const n=lr(a=>{a.preventDefault(),a.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[Us]:r}}))},[]);s.ref=cr(s.ref,a=>(a.addEventListener("click",n),()=>{a.removeEventListener("click",n)}))}return{tag:t,props:s,type:t,ref:s.ref}},ii=t=>Hs("input",t),li=t=>Hs("button",t);Object.assign(Ht,{title:ei,script:ti,style:ri,link:si,meta:ni,form:ai,input:ii,button:li});Xt(null);new TextEncoder;var ci=Xt(null),oi=(t,r,s,n)=>(a,i)=>{const l="<!DOCTYPE html>",c=s?br(d=>s(d,t),{Layout:r,...i},a):a,o=qs`${M(l)}${br(ci.Provider,{value:t},c)}`;return t.html(o)},di=(t,r)=>function(n,a){const i=n.getLayout()??on;return t&&n.setLayout(l=>t({...l,Layout:i},n)),n.setRenderer(oi(n,i,t)),a()};const ui=di(({children:t})=>e("html",{lang:"ja",children:[e("head",{children:[e("meta",{charset:"UTF-8"}),e("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),e("title",{children:"バナスコAI - AI広告診断ツール"}),e("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),e("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:!0}),e("link",{href:"https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap",rel:"stylesheet"}),e("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css",rel:"stylesheet"}),e("script",{src:"https://cdn.tailwindcss.com"}),e("link",{href:"/static/style.css",rel:"stylesheet"}),e("script",{dangerouslySetInnerHTML:{__html:`
            tailwind.config = {
              theme: {
                extend: {
                  fontFamily: {
                    'orbitron': ['Orbitron', 'monospace'],
                    'noto': ['Noto Sans JP', 'sans-serif']
                  },
                  colors: {
                    'cyber-blue': '#00f5ff',
                    'cyber-purple': '#8b5cf6',
                    'cyber-pink': '#ff6b9d',
                    'cyber-green': '#00ff88',
                    'cyber-orange': '#ff8c00',
                    'navy': {
                      900: '#0a0a1f',
                      800: '#1a1a2e',
                      700: '#16213e',
                      600: '#2d3561',
                      500: '#4682b4'
                    }
                  },
                  animation: {
                    'pulse-glow': 'pulse-glow 2s ease-in-out infinite alternate',
                    'float': 'float 3s ease-in-out infinite',
                    'slide-up': 'slide-up 0.5s ease-out',
                    'fade-in': 'fade-in 0.3s ease-out'
                  },
                  keyframes: {
                    'pulse-glow': {
                      'from': { boxShadow: '0 0 20px rgba(0, 245, 255, 0.3)' },
                      'to': { boxShadow: '0 0 30px rgba(0, 245, 255, 0.8)' }
                    },
                    'float': {
                      '0%, 100%': { transform: 'translateY(0px)' },
                      '50%': { transform: 'translateY(-10px)' }
                    },
                    'slide-up': {
                      'from': { transform: 'translateY(20px)', opacity: '0' },
                      'to': { transform: 'translateY(0)', opacity: '1' }
                    },
                    'fade-in': {
                      'from': { opacity: '0' },
                      'to': { opacity: '1' }
                    }
                  }
                }
              }
            }
          `}}),e("meta",{name:"description",content:"AI広告診断ツール バナスコAI - バナー広告の効果を瞬時に分析し、改善提案を行うプロフェッショナルツール"}),e("meta",{name:"keywords",content:"AI, 広告分析, バナー診断, マーケティング, 広告効果測定"}),e("meta",{name:"author",content:"バナスコAI"}),e("meta",{property:"og:title",content:"バナスコAI - AI広告診断ツール"}),e("meta",{property:"og:description",content:"AIがバナー広告を詳細分析し、効果予測と改善提案を提供"}),e("meta",{property:"og:type",content:"website"}),e("link",{rel:"icon",type:"image/svg+xml",href:"/static/favicon.svg"})]}),e("body",{class:"bg-gradient-to-br from-navy-900 via-navy-800 to-navy-700 min-h-screen text-white font-noto",children:[e("div",{class:"fixed inset-0 overflow-hidden pointer-events-none",children:[e("div",{class:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-cyber-blue/10 to-transparent rounded-full blur-3xl animate-pulse"}),e("div",{class:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tl from-cyber-purple/10 to-transparent rounded-full blur-3xl animate-pulse delay-1000"})]}),e("nav",{class:"relative z-50 bg-navy-900/80 backdrop-blur-lg border-b border-cyber-blue/20",children:[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e("div",{class:"flex items-center justify-between h-16",children:[e("div",{class:"flex items-center",children:e("a",{href:"/",class:"flex items-center space-x-3 group",children:[e("div",{class:"w-10 h-10 bg-gradient-to-br from-cyber-blue to-cyber-purple rounded-lg flex items-center justify-center group-hover:animate-pulse-glow transition-all",children:e("i",{class:"fas fa-chart-line text-white text-xl"})}),e("div",{children:e("h1",{class:"text-xl font-orbitron font-bold bg-gradient-to-r from-cyber-blue to-cyber-purple bg-clip-text text-transparent",children:"バナスコAI"})})]})}),e("div",{class:"hidden md:block",children:e("div",{class:"ml-10 flex items-baseline space-x-8",children:[e("a",{href:"/",class:"nav-link text-gray-300 hover:text-cyber-blue px-3 py-2 rounded-md text-sm font-medium transition-all duration-300",children:[e("i",{class:"fas fa-home mr-2"}),"ホーム"]}),e("a",{href:"/analysis",class:"nav-link text-gray-300 hover:text-cyber-green px-3 py-2 rounded-md text-sm font-medium transition-all duration-300",children:[e("i",{class:"fas fa-chart-bar mr-2"}),"AI診断"]}),e("a",{href:"/copy-generation",class:"nav-link text-gray-300 hover:text-cyber-pink px-3 py-2 rounded-md text-sm font-medium transition-all duration-300",children:[e("i",{class:"fas fa-magic mr-2"}),"コピー生成"]}),e("a",{href:"/login",class:"nav-link text-gray-300 hover:text-cyber-orange px-3 py-2 rounded-md text-sm font-medium transition-all duration-300",children:[e("i",{class:"fas fa-sign-in-alt mr-2"}),"ログイン"]})]})}),e("div",{class:"md:hidden",children:e("button",{id:"mobile-menu-btn",class:"text-gray-400 hover:text-white focus:outline-none focus:text-white",children:e("i",{class:"fas fa-bars text-xl"})})})]})}),e("div",{id:"mobile-menu",class:"hidden md:hidden bg-navy-800/95 backdrop-blur-lg border-t border-cyber-blue/20",children:e("div",{class:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[e("a",{href:"/",class:"block px-3 py-2 text-base font-medium text-gray-300 hover:text-cyber-blue transition-colors",children:[e("i",{class:"fas fa-home mr-2"}),"ホーム"]}),e("a",{href:"/analysis",class:"block px-3 py-2 text-base font-medium text-gray-300 hover:text-cyber-green transition-colors",children:[e("i",{class:"fas fa-chart-bar mr-2"}),"AI診断"]}),e("a",{href:"/copy-generation",class:"block px-3 py-2 text-base font-medium text-gray-300 hover:text-cyber-pink transition-colors",children:[e("i",{class:"fas fa-magic mr-2"}),"コピー生成"]}),e("a",{href:"/login",class:"block px-3 py-2 text-base font-medium text-gray-300 hover:text-cyber-orange transition-colors",children:[e("i",{class:"fas fa-sign-in-alt mr-2"}),"ログイン"]})]})})]}),e("main",{class:"relative z-10",children:t}),e("footer",{class:"relative z-10 bg-navy-900/50 backdrop-blur-lg border-t border-cyber-blue/10 mt-20",children:e("div",{class:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[e("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e("div",{children:[e("h3",{class:"text-lg font-orbitron font-semibold text-cyber-blue mb-4",children:"バナスコAI"}),e("p",{class:"text-gray-400 text-sm leading-relaxed",children:"AI技術を活用したプロフェッショナル広告分析ツール。バナー広告の効果を瞬時に診断し、データに基づいた改善提案を提供します。"})]}),e("div",{children:[e("h3",{class:"text-lg font-semibold text-cyber-green mb-4",children:"機能"}),e("ul",{class:"text-gray-400 text-sm space-y-2",children:[e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-green"}),"AI広告診断"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-green"}),"A/B比較分析"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-green"}),"コピー自動生成"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-green"}),"効果予測レポート"]})]})]}),e("div",{children:[e("h3",{class:"text-lg font-semibold text-cyber-pink mb-4",children:"技術スタック"}),e("ul",{class:"text-gray-400 text-sm space-y-2",children:[e("li",{children:[e("i",{class:"fas fa-code mr-2 text-cyber-pink"}),"Hono Framework"]}),e("li",{children:[e("i",{class:"fas fa-cloud mr-2 text-cyber-pink"}),"Cloudflare Pages"]}),e("li",{children:[e("i",{class:"fas fa-robot mr-2 text-cyber-pink"}),"最先端banaAI Vision"]}),e("li",{children:[e("i",{class:"fas fa-mobile-alt mr-2 text-cyber-pink"}),"レスポンシブデザイン"]})]})]})]}),e("div",{class:"mt-8 pt-8 border-t border-gray-700 text-center",children:e("p",{class:"text-gray-400 text-sm",children:"© 2024 バナスコAI. All rights reserved. | AI-Powered Banner Analysis Engine"})})]})}),e("script",{src:"/static/app.js"})]})]})),hi=()=>e("div",{class:"min-h-screen",children:[e("section",{class:"relative pt-20 pb-32 overflow-hidden",children:e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e("div",{class:"text-center animate-slide-up",children:[e("div",{class:"mb-8",children:[e("h1",{class:"text-5xl md:text-7xl font-orbitron font-bold mb-6",children:[e("span",{class:"bg-gradient-to-r from-cyber-blue via-cyber-purple to-cyber-pink bg-clip-text text-transparent animate-pulse-glow",children:"AI広告診断"}),e("br",{}),e("span",{class:"text-white",children:"バナスコAI"})]}),e("p",{class:"text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:["最先端banaAI Vision技術を活用した次世代広告分析ツール",e("br",{}),e("span",{class:"text-cyber-blue font-semibold",children:"瞬時に診断、的確に改善提案"})]})]}),e("div",{class:"flex flex-col sm:flex-row gap-6 justify-center items-center mb-16",children:[e("a",{href:"/analysis",class:"group relative px-8 py-4 bg-gradient-to-r from-cyber-blue to-cyber-purple rounded-full text-white font-semibold text-lg shadow-lg hover:shadow-cyber-blue/50 transition-all duration-300 transform hover:scale-105 hover:animate-pulse-glow",children:[e("i",{class:"fas fa-chart-line mr-3"}),"AI診断を開始",e("div",{class:"absolute inset-0 rounded-full bg-gradient-to-r from-cyber-blue to-cyber-purple opacity-0 group-hover:opacity-20 transition-opacity duration-300"})]}),e("a",{href:"/copy-generation",class:"group relative px-8 py-4 bg-gradient-to-r from-cyber-pink to-cyber-orange rounded-full text-white font-semibold text-lg shadow-lg hover:shadow-cyber-pink/50 transition-all duration-300 transform hover:scale-105 hover:animate-pulse-glow",children:[e("i",{class:"fas fa-magic mr-3"}),"コピー生成",e("div",{class:"absolute inset-0 rounded-full bg-gradient-to-r from-cyber-pink to-cyber-orange opacity-0 group-hover:opacity-20 transition-opacity duration-300"})]})]}),e("div",{class:"max-w-4xl mx-auto",children:e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-3xl border border-cyber-blue/20 p-8 shadow-2xl",children:[e("h3",{class:"text-2xl font-orbitron font-semibold text-cyber-blue mb-6",children:[e("i",{class:"fas fa-eye mr-3"}),"プレビュー機能"]}),e("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e("div",{class:"space-y-4",children:[e("h4",{class:"text-lg font-semibold text-cyber-green",children:[e("i",{class:"fas fa-chart-bar mr-2"}),"AI分析結果"]}),e("div",{class:"bg-navy-700/50 rounded-xl p-4 border border-cyber-green/20",children:[e("div",{class:"flex justify-between items-center mb-2",children:[e("span",{class:"text-sm text-gray-400",children:"総合スコア"}),e("span",{class:"text-2xl font-bold text-cyber-green",children:"82"})]}),e("div",{class:"w-full bg-navy-600 rounded-full h-2",children:e("div",{class:"bg-gradient-to-r from-cyber-green to-cyber-blue h-2 rounded-full",style:"width: 82%"})}),e("p",{class:"text-xs text-cyber-green mt-2",children:"優秀レベル"})]})]}),e("div",{class:"space-y-4",children:[e("h4",{class:"text-lg font-semibold text-cyber-pink",children:[e("i",{class:"fas fa-magic mr-2"}),"生成コピー例"]}),e("div",{class:"bg-navy-700/50 rounded-xl p-4 border border-cyber-pink/20",children:[e("p",{class:"text-sm text-white mb-2",children:'"美肌への近道、ここにあり。今すぐ体験してください。"'}),e("div",{class:"flex justify-between items-center",children:[e("span",{class:"text-xs text-gray-400",children:"効果予測"}),e("span",{class:"text-sm font-semibold text-cyber-pink",children:"92%"})]})]})]})]})]})})]})})}),e("section",{class:"py-20 bg-navy-800/30",children:e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e("div",{class:"text-center mb-16",children:[e("h2",{class:"text-4xl font-orbitron font-bold text-white mb-4",children:"プロフェッショナル機能"}),e("p",{class:"text-xl text-gray-300 max-w-2xl mx-auto",children:"AIが提供する高精度分析で、広告効果を最大化"})]}),e("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e("div",{class:"group bg-navy-800/50 backdrop-blur-lg rounded-2xl p-8 border border-cyber-blue/20 hover:border-cyber-blue/50 transition-all duration-300 hover:transform hover:scale-105 animate-float",children:[e("div",{class:"w-16 h-16 bg-gradient-to-br from-cyber-blue to-cyber-purple rounded-2xl flex items-center justify-center mb-6 group-hover:animate-pulse-glow",children:e("i",{class:"fas fa-chart-line text-2xl text-white"})}),e("h3",{class:"text-xl font-semibold text-white mb-4",children:"AI広告診断"}),e("p",{class:"text-gray-400 mb-4",children:"5つの重要指標で広告を詳細分析。瞬間伝達力、視認性、行動喚起力など、効果に直結する要素を評価。"}),e("ul",{class:"text-sm text-gray-500 space-y-1",children:[e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-blue"}),"総合スコア算出"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-blue"}),"項目別詳細評価"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-blue"}),"改善提案レポート"]})]})]}),e("div",{class:"group bg-navy-800/50 backdrop-blur-lg rounded-2xl p-8 border border-cyber-green/20 hover:border-cyber-green/50 transition-all duration-300 hover:transform hover:scale-105 animate-float delay-200",children:[e("div",{class:"w-16 h-16 bg-gradient-to-br from-cyber-green to-cyber-blue rounded-2xl flex items-center justify-center mb-6 group-hover:animate-pulse-glow",children:e("i",{class:"fas fa-balance-scale text-2xl text-white"})}),e("h3",{class:"text-xl font-semibold text-white mb-4",children:"A/B比較分析"}),e("p",{class:"text-gray-400 mb-4",children:"2つのバナーを同時比較し、統計的有意性に基づいた勝者判定。CVR改善予測も提供。"}),e("ul",{class:"text-sm text-gray-500 space-y-1",children:[e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-green"}),"勝者自動判定"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-green"}),"統計的有意性表示"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-green"}),"効果予測レポート"]})]})]}),e("div",{class:"group bg-navy-800/50 backdrop-blur-lg rounded-2xl p-8 border border-cyber-pink/20 hover:border-cyber-pink/50 transition-all duration-300 hover:transform hover:scale-105 animate-float delay-400",children:[e("div",{class:"w-16 h-16 bg-gradient-to-br from-cyber-pink to-cyber-orange rounded-2xl flex items-center justify-center mb-6 group-hover:animate-pulse-glow",children:e("i",{class:"fas fa-magic text-2xl text-white"})}),e("h3",{class:"text-xl font-semibold text-white mb-4",children:"AIコピー生成"}),e("p",{class:"text-gray-400 mb-4",children:"画像から効果的な広告コピーを自動生成。業界別最適化で、ターゲットに響くメッセージを作成。"}),e("ul",{class:"text-sm text-gray-500 space-y-1",children:[e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-pink"}),"複数バリエーション生成"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-pink"}),"業界別最適化"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-pink"}),"効果予測スコア"]})]})]}),e("div",{class:"group bg-navy-800/50 backdrop-blur-lg rounded-2xl p-8 border border-cyber-orange/20 hover:border-cyber-orange/50 transition-all duration-300 hover:transform hover:scale-105 animate-float delay-600",children:[e("div",{class:"w-16 h-16 bg-gradient-to-br from-cyber-orange to-yellow-500 rounded-2xl flex items-center justify-center mb-6 group-hover:animate-pulse-glow",children:e("i",{class:"fas fa-industry text-2xl text-white"})}),e("h3",{class:"text-xl font-semibold text-white mb-4",children:"業界別最適化"}),e("p",{class:"text-gray-400 mb-4",children:"美容、飲食、不動産など、業界特性を考慮した専門的な分析とアドバイスを提供。"}),e("ul",{class:"text-sm text-gray-500 space-y-1",children:[e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-orange"}),"業界特化分析"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-orange"}),"競合ベンチマーク"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-cyber-orange"}),"薬機法チェック"]})]})]}),e("div",{class:"group bg-navy-800/50 backdrop-blur-lg rounded-2xl p-8 border border-purple-500/20 hover:border-purple-500/50 transition-all duration-300 hover:transform hover:scale-105 animate-float delay-800",children:[e("div",{class:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mb-6 group-hover:animate-pulse-glow",children:e("i",{class:"fas fa-mobile-alt text-2xl text-white"})}),e("h3",{class:"text-xl font-semibold text-white mb-4",children:"媒体別最適化"}),e("p",{class:"text-gray-400 mb-4",children:"Instagram、GDN、YDNなど、各媒体の特性に合わせた最適化提案を実施。"}),e("ul",{class:"text-sm text-gray-500 space-y-1",children:[e("li",{children:[e("i",{class:"fas fa-check mr-2 text-purple-500"}),"媒体特化アドバイス"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-purple-500"}),"サイズ最適化"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-purple-500"}),"表示環境考慮"]})]})]}),e("div",{class:"group bg-navy-800/50 backdrop-blur-lg rounded-2xl p-8 border border-teal-500/20 hover:border-teal-500/50 transition-all duration-300 hover:transform hover:scale-105 animate-float delay-1000",children:[e("div",{class:"w-16 h-16 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-2xl flex items-center justify-center mb-6 group-hover:animate-pulse-glow",children:e("i",{class:"fas fa-chart-area text-2xl text-white"})}),e("h3",{class:"text-xl font-semibold text-white mb-4",children:"効果予測レポート"}),e("p",{class:"text-gray-400 mb-4",children:"クリック率、コンバージョン率、ROI改善など、具体的な数値で効果を予測。"}),e("ul",{class:"text-sm text-gray-500 space-y-1",children:[e("li",{children:[e("i",{class:"fas fa-check mr-2 text-teal-500"}),"CTR予測"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-teal-500"}),"CVR改善試算"]}),e("li",{children:[e("i",{class:"fas fa-check mr-2 text-teal-500"}),"ROI分析"]})]})]})]})]})}),e("section",{class:"py-20",children:e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e("div",{class:"text-center mb-16",children:[e("h2",{class:"text-4xl font-orbitron font-bold text-white mb-4",children:"プロフェッショナル実績"}),e("p",{class:"text-xl text-gray-300",children:"AIが支援する広告改善の成果"})]}),e("div",{class:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e("div",{class:"text-center group",children:e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl p-8 border border-cyber-blue/20 group-hover:border-cyber-blue/50 transition-all duration-300",children:[e("div",{class:"text-4xl font-orbitron font-bold text-cyber-blue mb-2",children:"92%"}),e("p",{class:"text-gray-300",children:"分析精度"})]})}),e("div",{class:"text-center group",children:e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl p-8 border border-cyber-green/20 group-hover:border-cyber-green/50 transition-all duration-300",children:[e("div",{class:"text-4xl font-orbitron font-bold text-cyber-green mb-2",children:"+28%"}),e("p",{class:"text-gray-300",children:"平均CVR改善"})]})}),e("div",{class:"text-center group",children:e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl p-8 border border-cyber-pink/20 group-hover:border-cyber-pink/50 transition-all duration-300",children:[e("div",{class:"text-4xl font-orbitron font-bold text-cyber-pink mb-2",children:"3.2秒"}),e("p",{class:"text-gray-300",children:"分析完了時間"})]})}),e("div",{class:"text-center group",children:e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl p-8 border border-cyber-orange/20 group-hover:border-cyber-orange/50 transition-all duration-300",children:[e("div",{class:"text-4xl font-orbitron font-bold text-cyber-orange mb-2",children:"5+"}),e("p",{class:"text-gray-300",children:"対応業界"})]})})]})]})}),e("section",{class:"py-20 bg-gradient-to-r from-navy-800/50 to-navy-700/50",children:e("div",{class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[e("h2",{class:"text-4xl font-orbitron font-bold text-white mb-6",children:"今すぐAI診断を体験"}),e("p",{class:"text-xl text-gray-300 mb-8",children:"デモアカウントでお試しいただけます。登録不要で即座に体験可能。"}),e("div",{class:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[e("a",{href:"/analysis",class:"group relative px-10 py-4 bg-gradient-to-r from-cyber-blue to-cyber-purple rounded-full text-white font-bold text-lg shadow-2xl hover:shadow-cyber-blue/50 transition-all duration-300 transform hover:scale-110 hover:animate-pulse-glow",children:[e("i",{class:"fas fa-rocket mr-3"}),"AI診断を開始"]}),e("a",{href:"/login",class:"group relative px-10 py-4 bg-transparent border-2 border-cyber-blue rounded-full text-cyber-blue font-bold text-lg hover:bg-cyber-blue hover:text-white transition-all duration-300 transform hover:scale-105",children:[e("i",{class:"fas fa-user mr-3"}),"デモログイン"]})]}),e("div",{class:"mt-8 text-sm text-gray-400",children:e("p",{children:["デモアカウント: ",e("span",{class:"text-cyber-blue font-mono",children:"demo"})," / ",e("span",{class:"text-cyber-blue font-mono",children:"demo123"})]})})]})})]}),fi=()=>e("div",{class:"min-h-screen pt-20 pb-20",children:[e("div",{class:"max-w-md mx-auto px-4 sm:px-6 lg:px-8",children:[e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-3xl border border-cyber-blue/20 p-8 shadow-2xl animate-slide-up",children:[e("div",{class:"text-center mb-8",children:[e("div",{class:"w-20 h-20 bg-gradient-to-br from-cyber-blue to-cyber-purple rounded-2xl flex items-center justify-center mx-auto mb-6 animate-pulse-glow",children:e("i",{class:"fas fa-user-circle text-3xl text-white"})}),e("h1",{class:"text-3xl font-orbitron font-bold text-white mb-2",children:"ログイン"}),e("p",{class:"text-gray-400",children:"バナスコAIにアクセス"})]}),e("div",{id:"errorMessage",class:"hidden bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:e("div",{class:"flex items-center text-red-400",children:[e("i",{class:"fas fa-exclamation-triangle mr-2"}),e("span",{id:"errorText",children:"エラーメッセージ"})]})}),e("div",{id:"successMessage",class:"hidden bg-green-500/10 border border-green-500/20 rounded-xl p-4",children:e("div",{class:"flex items-center text-green-400",children:[e("i",{class:"fas fa-check-circle mr-2"}),e("span",{id:"successText",children:"ログイン成功"})]})}),e("form",{id:"loginForm",class:"space-y-6",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:[e("i",{class:"fas fa-envelope mr-2 text-cyber-blue"}),"メールアドレス"]}),e("input",{type:"email",id:"email",name:"email",class:"w-full px-4 py-3 bg-navy-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyber-blue focus:ring-2 focus:ring-cyber-blue/20 transition-all duration-300",placeholder:"メールアドレスを入力",required:!0,autocomplete:"email"})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:[e("i",{class:"fas fa-lock mr-2 text-cyber-blue"}),"パスワード"]}),e("input",{type:"password",id:"password",name:"password",class:"w-full px-4 py-3 bg-navy-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyber-blue focus:ring-2 focus:ring-cyber-blue/20 transition-all duration-300",placeholder:"パスワードを入力",required:!0})]}),e("button",{type:"submit",id:"loginButton",class:"w-full py-3 bg-gradient-to-r from-cyber-blue to-cyber-purple rounded-xl text-white font-semibold hover:from-cyber-purple hover:to-cyber-pink transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-cyber-blue/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e("span",{id:"loginButtonText",children:[e("i",{class:"fas fa-sign-in-alt mr-2"}),"ログイン"]}),e("span",{id:"loginSpinner",class:"hidden",children:[e("i",{class:"fas fa-spinner fa-spin mr-2"}),"ログイン中..."]})]})]}),e("div",{class:"my-8 flex items-center",children:[e("div",{class:"flex-1 border-t border-gray-600"}),e("span",{class:"px-4 text-gray-400 text-sm",children:"または"}),e("div",{class:"flex-1 border-t border-gray-600"})]}),e("div",{class:"bg-cyber-blue/10 border border-cyber-blue/20 rounded-xl p-6 mb-6",children:[e("h3",{class:"text-lg font-semibold text-cyber-blue mb-3",children:[e("i",{class:"fas fa-rocket mr-2"}),"デモアカウント"]}),e("p",{class:"text-gray-300 text-sm mb-4",children:"すぐにお試しいただけるデモアカウントをご用意しています"}),e("div",{class:"bg-navy-700/50 rounded-lg p-4 mb-4",children:e("div",{class:"grid grid-cols-2 gap-4 text-sm",children:[e("div",{children:[e("span",{class:"text-gray-400",children:"メールアドレス:"}),e("div",{class:"text-cyber-blue font-mono font-semibold",children:"demo@banasuko.com"})]}),e("div",{children:[e("span",{class:"text-gray-400",children:"パスワード:"}),e("div",{class:"text-cyber-blue font-mono font-semibold",children:"demo123456"})]})]})}),e("div",{class:"space-y-2",children:[e("button",{type:"button",id:"demoLoginBtn",class:"w-full py-2 bg-cyber-blue/20 border border-cyber-blue/30 rounded-lg text-cyber-blue font-medium hover:bg-cyber-blue/30 transition-all duration-300",children:[e("i",{class:"fas fa-magic mr-2"}),"デモアカウントでログイン"]}),e("button",{type:"button",id:"createDemoBtn",class:"w-full py-2 bg-cyber-pink/20 border border-cyber-pink/30 rounded-lg text-cyber-pink font-medium hover:bg-cyber-pink/30 transition-all duration-300",children:[e("i",{class:"fas fa-user-plus mr-2"}),"デモアカウント作成"]})]})]}),e("div",{class:"text-center",children:e("button",{id:"showRegisterForm",class:"text-cyber-pink hover:text-cyber-orange transition-colors duration-300",children:[e("i",{class:"fas fa-user-plus mr-2"}),"新規アカウント作成"]})})]}),e("div",{id:"registerForm",class:"hidden mt-8 bg-navy-800/50 backdrop-blur-lg rounded-3xl border border-cyber-pink/20 p-8 shadow-2xl animate-slide-up",children:[e("div",{class:"text-center mb-8",children:[e("div",{class:"w-20 h-20 bg-gradient-to-br from-cyber-pink to-cyber-orange rounded-2xl flex items-center justify-center mx-auto mb-6 animate-pulse-glow",children:e("i",{class:"fas fa-user-plus text-3xl text-white"})}),e("h1",{class:"text-3xl font-orbitron font-bold text-white mb-2",children:"新規登録"}),e("p",{class:"text-gray-400",children:"バナスコAIアカウント作成"})]}),e("form",{id:"registerFormElement",class:"space-y-6",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:[e("i",{class:"fas fa-envelope mr-2 text-cyber-pink"}),"メールアドレス"]}),e("input",{type:"email",id:"registerEmail",name:"email",class:"w-full px-4 py-3 bg-navy-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyber-pink focus:ring-2 focus:ring-cyber-pink/20 transition-all duration-300",placeholder:"メールアドレスを入力",required:!0})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:[e("i",{class:"fas fa-lock mr-2 text-cyber-pink"}),"パスワード"]}),e("input",{type:"password",id:"registerPassword",name:"password",class:"w-full px-4 py-3 bg-navy-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyber-pink focus:ring-2 focus:ring-cyber-pink/20 transition-all duration-300",placeholder:"パスワードを入力",required:!0})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:[e("i",{class:"fas fa-lock mr-2 text-cyber-pink"}),"パスワード（確認）"]}),e("input",{type:"password",id:"confirmPassword",name:"confirmPassword",class:"w-full px-4 py-3 bg-navy-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyber-pink focus:ring-2 focus:ring-cyber-pink/20 transition-all duration-300",placeholder:"パスワードを再入力",required:!0})]}),e("div",{id:"regErrorMessage",class:"hidden bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:e("div",{class:"flex items-center text-red-400",children:[e("i",{class:"fas fa-exclamation-triangle mr-2"}),e("span",{id:"regErrorText",children:"エラーメッセージ"})]})}),e("div",{id:"regSuccessMessage",class:"hidden bg-green-500/10 border border-green-500/20 rounded-xl p-4",children:e("div",{class:"flex items-center text-green-400",children:[e("i",{class:"fas fa-check-circle mr-2"}),e("span",{id:"regSuccessText",children:"登録成功"})]})}),e("button",{type:"submit",id:"registerButton",class:"w-full py-3 bg-gradient-to-r from-cyber-pink to-cyber-orange rounded-xl text-white font-semibold hover:from-cyber-orange hover:to-yellow-500 transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-cyber-pink/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e("span",{id:"registerButtonText",children:[e("i",{class:"fas fa-user-plus mr-2"}),"アカウント作成"]}),e("span",{id:"registerSpinner",class:"hidden",children:[e("i",{class:"fas fa-spinner fa-spin mr-2"}),"作成中..."]})]})]}),e("div",{class:"text-center mt-6",children:e("button",{id:"showLoginForm",class:"text-cyber-blue hover:text-cyber-purple transition-colors duration-300",children:[e("i",{class:"fas fa-arrow-left mr-2"}),"ログインに戻る"]})})]}),e("div",{class:"mt-12 bg-navy-800/30 backdrop-blur-lg rounded-2xl border border-gray-700/30 p-6",children:[e("h3",{class:"text-lg font-semibold text-white mb-4 text-center",children:[e("i",{class:"fas fa-star mr-2 text-cyber-blue"}),"ログイン後の機能"]}),e("div",{class:"space-y-3 text-sm",children:[e("div",{class:"flex items-center text-gray-300",children:[e("i",{class:"fas fa-chart-line mr-3 text-cyber-blue w-4"}),e("span",{children:"AI広告診断 - 詳細分析とスコアリング"})]}),e("div",{class:"flex items-center text-gray-300",children:[e("i",{class:"fas fa-balance-scale mr-3 text-cyber-green w-4"}),e("span",{children:"A/B比較分析 - 統計的有意性に基づく判定"})]}),e("div",{class:"flex items-center text-gray-300",children:[e("i",{class:"fas fa-magic mr-3 text-cyber-pink w-4"}),e("span",{children:"AIコピー生成 - 効果的な広告文の自動生成"})]}),e("div",{class:"flex items-center text-gray-300",children:[e("i",{class:"fas fa-chart-area mr-3 text-cyber-orange w-4"}),e("span",{children:"効果予測レポート - ROI・CVR改善予測"})]})]})]})]}),e("div",{class:"fixed inset-0 pointer-events-none overflow-hidden",children:[e("div",{class:"absolute top-1/4 left-1/4 w-2 h-2 bg-cyber-blue rounded-full animate-ping opacity-20"}),e("div",{class:"absolute top-3/4 right-1/4 w-1 h-1 bg-cyber-pink rounded-full animate-ping opacity-30 delay-1000"}),e("div",{class:"absolute bottom-1/4 left-1/3 w-1.5 h-1.5 bg-cyber-green rounded-full animate-ping opacity-25 delay-2000"})]}),e("script",{type:"module",src:"/static/js/firebase-auth.js"})]}),bi=()=>e("div",{class:"min-h-screen pt-20 pb-20",children:[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e("div",{class:"text-center mb-12 animate-slide-up",children:[e("h1",{class:"text-4xl md:text-5xl font-orbitron font-bold mb-4",children:e("span",{class:"bg-gradient-to-r from-cyber-blue to-cyber-green bg-clip-text text-transparent",children:"AI広告診断"})}),e("p",{class:"text-xl text-gray-300 max-w-3xl mx-auto",children:"最先端banaAI Vision技術が画像を詳細分析し、効果予測と改善提案を提供"})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-blue/20 p-6",children:[e("h3",{class:"text-xl font-semibold text-cyber-blue mb-6",children:[e("i",{class:"fas fa-user-cog mr-2"}),"基本情報"]}),e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"表示名"}),e("input",{type:"text",id:"userName",class:"w-full px-4 py-2 bg-navy-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyber-blue transition-colors",placeholder:"あなたの名前"})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"ターゲット年代"}),e("select",{id:"ageGroup",class:"w-full px-4 py-2 bg-navy-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-cyber-blue transition-colors",children:[e("option",{value:"",children:"指定なし"}),e("option",{value:"10代",children:"10代"}),e("option",{value:"20代",children:"20代"}),e("option",{value:"30代",children:"30代"}),e("option",{value:"40代",children:"40代"}),e("option",{value:"50代",children:"50代"}),e("option",{value:"60代以上",children:"60代以上"})]})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"媒体"}),e("select",{id:"platform",class:"w-full px-4 py-2 bg-navy-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-cyber-blue transition-colors",onchange:"handlePlatformChange(this.value)",children:[e("option",{value:"",children:"媒体を選択してください"}),e("option",{value:"instagram-post",children:"Instagram（投稿）"}),e("option",{value:"instagram-ad",children:"Instagram（広告）"}),e("option",{value:"gdn",children:"Googleディスプレイ広告"}),e("option",{value:"yahoo",children:"Yahooディスプレイ広告"})]})]}),e("div",{id:"instagramAdType",class:"hidden",children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:[e("i",{class:"fab fa-instagram mr-2 text-cyber-pink"}),"Instagram広告タイプ"]}),e("select",{id:"instagramAdSubtype",class:"w-full px-4 py-2 bg-navy-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-cyber-pink transition-colors",children:[e("option",{value:"feed",children:"フィード広告"}),e("option",{value:"stories",children:"ストーリーズ広告"}),e("option",{value:"reels",children:"リール広告"}),e("option",{value:"explore",children:"発見タブ広告"})]})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"目的"}),e("select",{id:"purpose",class:"w-full px-4 py-2 bg-navy-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-cyber-blue transition-colors",children:[e("option",{value:"プロフィール誘導",children:"プロフィール誘導"}),e("option",{value:"リンククリック",children:"リンククリック"}),e("option",{value:"保存数増加",children:"保存数増加"}),e("option",{value:"インプレッション増加",children:"インプレッション増加"})]})]})]}),e("div",{id:"scoringTypeInfo",class:"mt-4 p-3 bg-navy-800/30 rounded-lg border border-gray-700/50",children:e("p",{class:"text-gray-400 text-sm font-medium",children:"📋 媒体を選択してください"})})]}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-green/20 p-6",children:[e("h3",{class:"text-xl font-semibold text-cyber-green mb-6",children:[e("i",{class:"fas fa-industry mr-2"}),"業界情報"]}),e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"業界"}),e("select",{id:"industry",class:"w-full px-4 py-2 bg-navy-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-cyber-green transition-colors",children:[e("option",{value:"美容",children:"美容"}),e("option",{value:"飲食",children:"飲食"}),e("option",{value:"不動産",children:"不動産"}),e("option",{value:"子ども写真館",children:"子ども写真館"}),e("option",{value:"その他",children:"その他"})]})]}),e("div",{class:"flex items-center",children:[e("input",{type:"checkbox",id:"abMode",class:"w-4 h-4 text-cyber-green bg-navy-700 border-gray-600 rounded focus:ring-cyber-green/20 focus:ring-2"}),e("label",{for:"abMode",class:"ml-2 text-sm font-medium text-gray-300",children:"🆚 A/B比較分析モード"})]}),e("p",{class:"text-xs text-gray-400",children:"2つの画像を比較分析する場合にチェック"})]}),e("div",{class:"mt-6 p-4 bg-navy-700/30 rounded-lg border border-cyber-green/10",children:[e("h4",{class:"text-sm font-semibold text-cyber-green mb-3",children:[e("i",{class:"fas fa-clipboard-list mr-2"}),"採点基準"]}),e("div",{class:"space-y-2 text-xs",children:[e("div",{class:"flex items-center text-gray-400",children:[e("i",{class:"fas fa-bolt mr-2 text-cyber-blue w-4"}),e("span",{children:"瞬間伝達力 - 1秒で内容が理解できるか"})]}),e("div",{class:"flex items-center text-gray-400",children:[e("i",{class:"fas fa-eye mr-2 text-cyber-green w-4"}),e("span",{children:"視認性 - 文字が読みやすく配色が適切か"})]}),e("div",{class:"flex items-center text-gray-400",children:[e("i",{class:"fas fa-bullseye mr-2 text-cyber-pink w-4"}),e("span",{children:"行動喚起 - 明確なCTAでユーザーを誘導"})]}),e("div",{class:"flex items-center text-gray-400",children:[e("i",{class:"fas fa-sync mr-2 text-cyber-orange w-4"}),e("span",{children:"整合性 - 画像と文字内容の一致度"})]}),e("div",{class:"flex items-center text-gray-400",children:[e("i",{class:"fas fa-balance-scale mr-2 text-purple-400 w-4"}),e("span",{children:"情報バランス - 情報過多にならないか"})]})]})]})]})]}),e("div",{id:"singleUpload",class:"mb-12",children:e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-purple/20 p-8",children:[e("h3",{class:"text-2xl font-semibold text-cyber-purple mb-6 text-center",children:[e("i",{class:"fas fa-cloud-upload-alt mr-2"}),"画像アップロード"]}),e("div",{class:"border-2 border-dashed border-cyber-purple/30 rounded-xl p-6 sm:p-8 text-center hover:border-cyber-purple/50 transition-colors duration-300",children:e("div",{id:"dropZone",class:"cursor-pointer",children:[e("i",{class:"fas fa-image text-4xl sm:text-6xl text-cyber-purple/50 mb-4"}),e("p",{class:"text-base sm:text-lg text-gray-300 mb-2",children:[e("span",{class:"hidden sm:inline",children:"画像をドラッグ&ドロップまたは"}),"クリックしてアップロード"]}),e("p",{class:"text-xs sm:text-sm text-gray-400 mb-4",children:"PNG, JPG, JPEG対応（最大10MB）"}),e("div",{class:"flex flex-col sm:flex-row gap-2 sm:gap-4 justify-center items-center",children:[e("button",{type:"button",onclick:"document.getElementById('imageUpload').click()",class:"w-full sm:w-auto bg-cyber-purple/20 border border-cyber-purple/50 text-cyber-purple px-4 py-2 rounded-lg hover:bg-cyber-purple/30 transition-colors",children:[e("i",{class:"fas fa-folder-open mr-2"}),"ファイルを選択"]}),e("button",{type:"button",onclick:"document.getElementById('cameraUpload').click()",class:"w-full sm:w-auto bg-cyber-blue/20 border border-cyber-blue/50 text-cyber-blue px-4 py-2 rounded-lg hover:bg-cyber-blue/30 transition-colors sm:hidden",children:[e("i",{class:"fas fa-camera mr-2"}),"カメラで撮影"]})]}),e("input",{type:"file",id:"imageUpload",class:"hidden",accept:"image/png,image/jpeg,image/jpg,image/webp",capture:"environment"}),e("input",{type:"file",id:"cameraUpload",class:"hidden",accept:"image/*",capture:"environment"})]})}),e("div",{id:"imagePreview",class:"hidden mt-6",children:[e("img",{id:"previewImage",class:"max-w-xs h-auto max-h-64 rounded-lg border border-gray-600 mx-auto block"}),e("p",{id:"imageName",class:"text-sm text-gray-400 mt-2 text-center"})]})]})}),e("div",{id:"abUpload",class:"hidden mb-12",children:e("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-blue/20 p-6",children:[e("h3",{class:"text-xl font-semibold text-cyber-blue mb-4 text-center",children:"🅰️ パターンA"}),e("div",{class:"border-2 border-dashed border-cyber-blue/30 rounded-xl p-4 sm:p-6 text-center hover:border-cyber-blue/50 transition-colors duration-300",children:e("div",{id:"dropZoneA",class:"cursor-pointer",children:[e("i",{class:"fas fa-image text-3xl sm:text-4xl text-cyber-blue/50 mb-3"}),e("p",{class:"text-sm sm:text-base text-gray-300 mb-2",children:"画像Aをアップロード"}),e("div",{class:"flex flex-col gap-2",children:[e("button",{type:"button",onclick:"document.getElementById('imageUploadA').click()",class:"w-full bg-cyber-blue/20 border border-cyber-blue/50 text-cyber-blue px-3 py-1.5 rounded text-sm hover:bg-cyber-blue/30 transition-colors",children:[e("i",{class:"fas fa-folder-open mr-1"}),"選択"]}),e("button",{type:"button",onclick:"document.getElementById('cameraUploadA').click()",class:"w-full bg-cyber-green/20 border border-cyber-green/50 text-cyber-green px-3 py-1.5 rounded text-sm hover:bg-cyber-green/30 transition-colors sm:hidden",children:[e("i",{class:"fas fa-camera mr-1"}),"撮影"]})]}),e("input",{type:"file",id:"imageUploadA",class:"hidden",accept:"image/png,image/jpeg,image/jpg,image/webp"}),e("input",{type:"file",id:"cameraUploadA",class:"hidden",accept:"image/*",capture:"environment"})]})}),e("div",{id:"imagePreviewA",class:"hidden mt-4",children:e("img",{id:"previewImageA",class:"max-w-full h-auto max-h-48 rounded-lg border border-gray-600 mx-auto block"})})]}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-pink/20 p-6",children:[e("h3",{class:"text-xl font-semibold text-cyber-pink mb-4 text-center",children:"🅱️ パターンB"}),e("div",{class:"border-2 border-dashed border-cyber-pink/30 rounded-xl p-4 sm:p-6 text-center hover:border-cyber-pink/50 transition-colors duration-300",children:e("div",{id:"dropZoneB",class:"cursor-pointer",children:[e("i",{class:"fas fa-image text-3xl sm:text-4xl text-cyber-pink/50 mb-3"}),e("p",{class:"text-sm sm:text-base text-gray-300 mb-2",children:"画像Bをアップロード"}),e("div",{class:"flex flex-col gap-2",children:[e("button",{type:"button",onclick:"document.getElementById('imageUploadB').click()",class:"w-full bg-cyber-pink/20 border border-cyber-pink/50 text-cyber-pink px-3 py-1.5 rounded text-sm hover:bg-cyber-pink/30 transition-colors",children:[e("i",{class:"fas fa-folder-open mr-1"}),"選択"]}),e("button",{type:"button",onclick:"document.getElementById('cameraUploadB').click()",class:"w-full bg-cyber-green/20 border border-cyber-green/50 text-cyber-green px-3 py-1.5 rounded text-sm hover:bg-cyber-green/30 transition-colors sm:hidden",children:[e("i",{class:"fas fa-camera mr-1"}),"撮影"]})]}),e("input",{type:"file",id:"imageUploadB",class:"hidden",accept:"image/png,image/jpeg,image/jpg,image/webp"}),e("input",{type:"file",id:"cameraUploadB",class:"hidden",accept:"image/*",capture:"environment"})]})}),e("div",{id:"imagePreviewB",class:"hidden mt-4",children:e("img",{id:"previewImageB",class:"max-w-full h-auto max-h-48 rounded-lg border border-gray-600 mx-auto block"})})]})]})}),e("div",{class:"text-center mb-12",children:e("button",{id:"analyzeButton",onclick:"startSingleAnalysis()",disabled:!0,class:"px-12 py-4 bg-gradient-to-r from-cyber-blue to-cyber-purple rounded-full text-white font-bold text-lg shadow-2xl hover:shadow-cyber-blue/50 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e("span",{id:"analyzeButtonText",children:[e("i",{class:"fas fa-rocket mr-3"}),"AI分析開始"]}),e("span",{id:"analyzeSpinner",class:"hidden",children:[e("i",{class:"fas fa-spinner fa-spin mr-3"}),"AI分析中..."]})]})}),e("div",{id:"resultsSection",class:"hidden",children:[e("div",{id:"analysisResult"}),e("div",{id:"singleResults",class:"hidden",children:e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-green/20 p-8 mb-8 animate-slide-up",children:[e("h3",{class:"text-2xl font-semibold text-cyber-green mb-6 text-center",children:[e("i",{class:"fas fa-chart-line mr-2"}),"AI分析結果"]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e("div",{class:"space-y-4",children:[e("div",{class:"bg-gradient-to-br from-cyber-blue/20 to-cyber-purple/10 border border-cyber-blue/30 rounded-xl p-6 text-center",children:[e("div",{id:"totalScore",class:"text-5xl font-orbitron font-bold text-cyber-blue mb-2",children:"82"}),e("p",{class:"text-gray-300",children:"総合スコア"}),e("p",{id:"scoreLevel",class:"text-cyber-green text-sm",children:"優秀レベル"})]}),e("div",{id:"individualScores",class:"space-y-3"})]}),e("div",{class:"lg:col-span-2 space-y-6",children:[e("div",{class:"bg-navy-700/30 rounded-xl p-6",children:[e("h4",{class:"text-lg font-semibold text-cyber-blue mb-4",children:[e("i",{class:"fas fa-bullseye mr-2"}),"ターゲット適合度"]}),e("div",{class:"flex items-center mb-2",children:[e("span",{class:"text-2xl font-bold text-cyber-green",id:"targetMatch",children:"91%"}),e("span",{class:"ml-2 text-gray-400",children:"適合"})]}),e("p",{class:"text-gray-300 text-sm",children:"選択されたターゲット層に対する訴求力が非常に高く、適切なトーンとメッセージングが使用されています。"})]}),e("div",{class:"bg-navy-700/30 rounded-xl p-6",children:[e("h4",{class:"text-lg font-semibold text-cyber-green mb-4",children:[e("i",{class:"fas fa-check-circle mr-2"}),"強み・優秀なポイント"]}),e("ul",{id:"strengthsList",class:"space-y-2 text-sm text-gray-300"})]}),e("div",{class:"bg-navy-700/30 rounded-xl p-6",children:[e("h4",{class:"text-lg font-semibold text-cyber-orange mb-4",children:[e("i",{class:"fas fa-exclamation-triangle mr-2"}),"改善提案"]}),e("ul",{id:"improvementsList",class:"space-y-2 text-sm text-gray-300"})]}),e("div",{class:"bg-navy-700/30 rounded-xl p-6",children:[e("h4",{class:"text-lg font-semibold text-cyber-pink mb-4",children:[e("i",{class:"fas fa-chart-area mr-2"}),"予想パフォーマンス"]}),e("div",{id:"performanceMetrics",class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"})]})]})]})]})}),e("div",{id:"abResults",class:"hidden",children:e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-pink/20 p-8 mb-8 animate-slide-up",children:[e("h3",{class:"text-2xl font-semibold text-cyber-pink mb-6 text-center",children:[e("i",{class:"fas fa-trophy mr-2"}),"A/B比較分析結果"]}),e("div",{id:"winnerAnnouncement",class:"bg-gradient-to-r from-cyber-pink/20 to-cyber-orange/10 border border-cyber-pink/30 rounded-xl p-8 mb-8 text-center"}),e("div",{class:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e("div",{class:"bg-gradient-to-br from-cyber-blue/20 to-navy-700/30 border border-cyber-blue/30 rounded-xl p-6",children:[e("h4",{class:"text-xl font-semibold text-cyber-blue mb-4 text-center",children:"🥇 パターンA (勝者)"}),e("div",{class:"text-center mb-4",children:[e("div",{class:"text-3xl font-orbitron font-bold text-cyber-green",children:"87"}),e("p",{class:"text-gray-300 text-sm",children:"総合スコア"})]}),e("div",{id:"patternAScores",class:"space-y-2"})]}),e("div",{class:"flex flex-col justify-center items-center",children:[e("div",{class:"text-4xl font-orbitron font-bold text-cyber-pink mb-4",children:"VS"}),e("div",{class:"text-center",children:[e("p",{class:"text-gray-400 text-sm",children:"スコア差"}),e("p",{class:"text-2xl font-bold text-cyber-green",children:"+12点"})]})]}),e("div",{class:"bg-gradient-to-br from-gray-500/20 to-navy-700/30 border border-gray-500/30 rounded-xl p-6",children:[e("h4",{class:"text-xl font-semibold text-gray-400 mb-4 text-center",children:"🥈 パターンB"}),e("div",{class:"text-center mb-4",children:[e("div",{class:"text-3xl font-orbitron font-bold text-cyber-orange",children:"75"}),e("p",{class:"text-gray-300 text-sm",children:"総合スコア"})]}),e("div",{id:"patternBScores",class:"space-y-2"})]})]}),e("div",{class:"mt-8 bg-navy-700/30 rounded-xl p-6",children:[e("h4",{class:"text-lg font-semibold text-cyber-blue mb-4",children:[e("i",{class:"fas fa-clipboard-list mr-2"}),"詳細比較レポート"]}),e("div",{id:"comparisonReport",class:"space-y-4 text-sm text-gray-300"})]}),e("div",{class:"mt-6 bg-gradient-to-r from-cyber-green/20 to-green-600/10 border border-cyber-green/30 rounded-xl p-6",children:[e("h4",{class:"text-lg font-semibold text-cyber-green mb-4",children:[e("i",{class:"fas fa-bullseye mr-2"}),"実装推奨アクション"]}),e("div",{id:"actionRecommendations",class:"space-y-2 text-sm text-white"})]})]})})]})]}),e("script",{dangerouslySetInnerHTML:{__html:`
          document.addEventListener('DOMContentLoaded', function() {
            let uploadedImage = null;
            let uploadedImageA = null;
            let uploadedImageB = null;
            let isAnalyzing = false;
            
            // DOM Elements
            const abModeCheckbox = document.getElementById('abMode');
            const singleUpload = document.getElementById('singleUpload');
            const abUpload = document.getElementById('abUpload');
            const dropZone = document.getElementById('dropZone');
            const imageUpload = document.getElementById('imageUpload');
            const imagePreview = document.getElementById('imagePreview');
            const previewImage = document.getElementById('previewImage');
            const imageName = document.getElementById('imageName');
            const analyzeButton = document.getElementById('analyzeButton');
            const analyzeButtonText = document.getElementById('analyzeButtonText');
            const analyzeSpinner = document.getElementById('analyzeSpinner');
            const resultsSection = document.getElementById('resultsSection');
            const singleResults = document.getElementById('singleResults');
            const abResults = document.getElementById('abResults');
            
            // A/B mode toggle
            abModeCheckbox.addEventListener('change', function() {
              if (this.checked) {
                singleUpload.classList.add('hidden');
                abUpload.classList.remove('hidden');
                updateAnalyzeButton();
              } else {
                singleUpload.classList.remove('hidden');
                abUpload.classList.add('hidden');
                updateAnalyzeButton();
              }
            });
            
            // Single image upload
            dropZone.addEventListener('click', () => {
              imageUpload.click();
            });
            dropZone.addEventListener('dragover', (e) => {
              e.preventDefault();
              e.stopPropagation();
              dropZone.classList.add('border-cyber-purple');
            });
            dropZone.addEventListener('dragleave', (e) => {
              e.preventDefault();
              e.stopPropagation();
              dropZone.classList.remove('border-cyber-purple');
            });
            dropZone.addEventListener('drop', (e) => {
              e.preventDefault();
              e.stopPropagation();
              dropZone.classList.remove('border-cyber-purple');
              const files = e.dataTransfer.files;
              if (files.length > 0) {
                handleImageUpload(files[0]);
              }
            });
            
            imageUpload.addEventListener('change', (e) => {
              if (e.target.files.length > 0) {
                handleImageUpload(e.target.files[0]);
              }
            });
            
            function handleImageUpload(file) {
              if (!file.type.startsWith('image/')) {
                alert('画像ファイルを選択してください。');
                return;
              }
              
              if (file.size > 10 * 1024 * 1024) {
                alert('ファイルサイズは10MB以下にしてください。');
                return;
              }
              
              uploadedImage = file;
              const reader = new FileReader();
              reader.onload = (e) => {
                previewImage.src = e.target.result;
                imageName.textContent = file.name;
                imagePreview.classList.remove('hidden');
                updateAnalyzeButton();
              };
              reader.readAsDataURL(file);
            }
            
            // A/B upload handlers
            setupABUpload('A');
            setupABUpload('B');
            
            function setupABUpload(pattern) {
              const dropZone = document.getElementById('dropZone' + pattern);
              const imageUpload = document.getElementById('imageUpload' + pattern);
              const imagePreview = document.getElementById('imagePreview' + pattern);
              const previewImage = document.getElementById('previewImage' + pattern);
              
              dropZone.addEventListener('click', () => {
                imageUpload.click();
              });
              dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                e.stopPropagation();
                dropZone.classList.add('border-cyber-' + (pattern === 'A' ? 'blue' : 'pink'));
              });
              dropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                e.stopPropagation();
                dropZone.classList.remove('border-cyber-' + (pattern === 'A' ? 'blue' : 'pink'));
              });
              dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                e.stopPropagation();
                dropZone.classList.remove('border-cyber-' + (pattern === 'A' ? 'blue' : 'pink'));
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                  handleABImageUpload(files[0], pattern);
                }
              });
              
              imageUpload.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                  handleABImageUpload(e.target.files[0], pattern);
                }
              });
            }
            
            function handleABImageUpload(file, pattern) {
              if (!file.type.startsWith('image/')) {
                alert('画像ファイルを選択してください。');
                return;
              }
              
              if (file.size > 10 * 1024 * 1024) {
                alert('ファイルサイズは10MB以下にしてください。');
                return;
              }
              
              if (pattern === 'A') {
                uploadedImageA = file;
              } else {
                uploadedImageB = file;
              }
              
              const reader = new FileReader();
              reader.onload = (e) => {
                document.getElementById('previewImage' + pattern).src = e.target.result;
                document.getElementById('imagePreview' + pattern).classList.remove('hidden');
                updateAnalyzeButton();
              };
              reader.readAsDataURL(file);
            }
            
            function updateAnalyzeButton() {
              if (isAnalyzing) return;
              
              if (abModeCheckbox.checked) {
                analyzeButton.disabled = !uploadedImageA || !uploadedImageB;
              } else {
                analyzeButton.disabled = !uploadedImage;
              }
            }
            
            // Analysis button handler
            analyzeButton.addEventListener('click', async function() {
              if (isAnalyzing) return;
              
              isAnalyzing = true;
              analyzeButton.disabled = true;
              analyzeButtonText.classList.add('hidden');
              analyzeSpinner.classList.remove('hidden');
              
              try {
                if (abModeCheckbox.checked) {
                  await performABAnalysis();
                } else {
                  await performSingleAnalysis();
                }
              } catch (error) {
                console.error('Analysis error:', error);
                alert('分析中にエラーが発生しました。もう一度お試しください。');
              } finally {
                isAnalyzing = false;
                analyzeButton.disabled = false;
                analyzeButtonText.classList.remove('hidden');
                analyzeSpinner.classList.add('hidden');
                updateAnalyzeButton();
              }
            });
            
            async function performSingleAnalysis() {
              const formData = new FormData();
              formData.append('image', uploadedImage);
              
              const response = await fetch('/api/analysis/single', {
                method: 'POST',
                body: formData
              });
              
              const data = await response.json();
              
              if (data.success) {
                displaySingleResults(data.result);
              } else {
                throw new Error(data.message || '分析に失敗しました');
              }
            }
            
            async function performABAnalysis() {
              const formData = new FormData();
              formData.append('imageA', uploadedImageA);
              formData.append('imageB', uploadedImageB);
              
              const response = await fetch('/api/analysis/compare', {
                method: 'POST',
                body: formData
              });
              
              const data = await response.json();
              
              if (data.success) {
                displayABResults(data.result);
              } else {
                throw new Error(data.message || 'A/B比較分析に失敗しました');
              }
            }
            
            function displaySingleResults(result) {
              resultsSection.classList.remove('hidden');
              singleResults.classList.remove('hidden');
              abResults.classList.add('hidden');
              
              // Update total score
              document.getElementById('totalScore').textContent = result.totalScore;
              document.getElementById('scoreLevel').textContent = result.level;
              
              // Update individual scores
              const scoresContainer = document.getElementById('individualScores');
              scoresContainer.innerHTML = '';
              
              for (const [key, scoreData] of Object.entries(result.scores)) {
                const scoreDiv = document.createElement('div');
                scoreDiv.className = 'bg-navy-700/50 border border-gray-600 rounded-lg p-3 text-center';
                scoreDiv.innerHTML = \`
                  <div class="flex items-center justify-between mb-1">
                    <span class="text-xs text-gray-400">\${scoreData.label}</span>
                    <span class="text-lg font-bold" style="color: \${scoreData.color}">\${scoreData.score}</span>
                  </div>
                  <div class="w-full bg-gray-700 rounded-full h-2">
                    <div class="h-2 rounded-full" style="width: \${scoreData.score}%; background-color: \${scoreData.color}"></div>
                  </div>
                \`;
                scoresContainer.appendChild(scoreDiv);
              }
              
              // Update target match
              document.getElementById('targetMatch').textContent = result.analysis.targetMatch + '%';
              
              // Update strengths
              const strengthsList = document.getElementById('strengthsList');
              strengthsList.innerHTML = '';
              result.analysis.strengths.forEach(strength => {
                const li = document.createElement('li');
                li.innerHTML = '<i class="fas fa-check text-cyber-green mr-2"></i>' + strength;
                strengthsList.appendChild(li);
              });
              
              // Update improvements
              const improvementsList = document.getElementById('improvementsList');
              improvementsList.innerHTML = '';
              result.analysis.improvements.forEach(improvement => {
                const li = document.createElement('li');
                li.innerHTML = '<i class="fas fa-arrow-up text-cyber-orange mr-2"></i>' + improvement;
                improvementsList.appendChild(li);
              });
              
              // Update performance metrics
              const performanceContainer = document.getElementById('performanceMetrics');
              performanceContainer.innerHTML = \`
                <div class="bg-gradient-to-r from-green-600/20 to-green-400/10 border border-green-400/30 rounded-lg p-4 text-center">
                  <div class="text-lg font-bold text-green-400">\${result.analysis.performance.clickRate.improved}%</div>
                  <div class="text-xs text-gray-400">クリック率（+\${result.analysis.performance.clickRate.change}%）</div>
                </div>
                <div class="bg-gradient-to-r from-blue-600/20 to-blue-400/10 border border-blue-400/30 rounded-lg p-4 text-center">
                  <div class="text-lg font-bold text-blue-400">\${result.analysis.performance.conversionRate.improved}%</div>
                  <div class="text-xs text-gray-400">コンバージョン率（+\${result.analysis.performance.conversionRate.change}%）</div>
                </div>
                <div class="bg-gradient-to-r from-purple-600/20 to-purple-400/10 border border-purple-400/30 rounded-lg p-4 text-center">
                  <div class="text-lg font-bold text-purple-400">+\${result.analysis.performance.brandAwareness.change}%</div>
                  <div class="text-xs text-gray-400">ブランド認知向上</div>
                </div>
              \`;
              
              // Show note if using demo data
              if (result.note) {
                const noteDiv = document.createElement('div');
                noteDiv.className = 'mt-4 p-3 bg-yellow-600/20 border border-yellow-400/30 rounded-lg text-center';
                noteDiv.innerHTML = '<i class="fas fa-info-circle mr-2 text-yellow-400"></i>' + result.note;
                performanceContainer.parentElement.appendChild(noteDiv);
              }
              
              // Scroll to results
              resultsSection.scrollIntoView({ behavior: 'smooth' });
            }
            
            function displayABResults(result) {
              resultsSection.classList.remove('hidden');
              abResults.classList.remove('hidden');
              singleResults.classList.add('hidden');
              
              // Show note if using demo data
              if (result.note) {
                const noteDiv = document.createElement('div');
                noteDiv.className = 'mb-6 p-3 bg-yellow-600/20 border border-yellow-400/30 rounded-lg text-center';
                noteDiv.innerHTML = '<i class="fas fa-info-circle mr-2 text-yellow-400"></i>' + result.note;
                document.querySelector('#abResults .bg-navy-800\\/50').prepend(noteDiv);
              }
              
              // Scroll to results
              resultsSection.scrollIntoView({ behavior: 'smooth' });
            }
          });
        `}}),e("script",{src:"/static/js/analysis.js"})]}),mi=()=>e("div",{class:"min-h-screen pt-20 pb-20",children:[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e("div",{class:"text-center mb-12 animate-slide-up",children:[e("h1",{class:"text-4xl md:text-5xl font-orbitron font-bold mb-4",children:e("span",{class:"bg-gradient-to-r from-cyber-pink to-cyber-orange bg-clip-text text-transparent",children:"AIコピー生成"})}),e("p",{class:"text-xl text-gray-300 max-w-3xl mx-auto",children:"画像から効果的な広告コピーを自動生成。業界特化型AIが最適なメッセージを提案"})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-pink/20 p-6",children:[e("h3",{class:"text-xl font-semibold text-cyber-pink mb-6",children:[e("i",{class:"fas fa-bullseye mr-2"}),"ターゲット設定"]}),e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"業界"}),e("select",{id:"copyIndustry",class:"w-full px-4 py-2 bg-navy-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-cyber-pink transition-colors",children:[e("option",{value:"美容",children:"美容"}),e("option",{value:"飲食",children:"飲食"}),e("option",{value:"不動産",children:"不動産"}),e("option",{value:"子ども写真館",children:"子ども写真館"}),e("option",{value:"ファッション",children:"ファッション"}),e("option",{value:"教育",children:"教育"}),e("option",{value:"その他",children:"その他"})]})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"媒体"}),e("select",{id:"copyPlatform",class:"w-full px-4 py-2 bg-navy-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-cyber-pink transition-colors",children:[e("option",{value:"Instagram",children:"Instagram"}),e("option",{value:"Facebook",children:"Facebook"}),e("option",{value:"GDN",children:"GDN"}),e("option",{value:"YDN",children:"YDN"}),e("option",{value:"Twitter",children:"Twitter"}),e("option",{value:"LINE",children:"LINE広告"})]})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"ターゲット年代"}),e("select",{id:"copyAgeGroup",class:"w-full px-4 py-2 bg-navy-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-cyber-pink transition-colors",children:[e("option",{value:"10代",children:"10代"}),e("option",{value:"20代",children:"20代"}),e("option",{value:"30代",children:"30代"}),e("option",{value:"40代",children:"40代"}),e("option",{value:"50代",children:"50代"}),e("option",{value:"60代以上",children:"60代以上"})]})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"トーン"}),e("select",{id:"copyTone",class:"w-full px-4 py-2 bg-navy-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-cyber-pink transition-colors",children:[e("option",{value:"フレンドリー",children:"フレンドリー"}),e("option",{value:"プロフェッショナル",children:"プロフェッショナル"}),e("option",{value:"カジュアル",children:"カジュアル"}),e("option",{value:"エレガント",children:"エレガント"}),e("option",{value:"エネルギッシュ",children:"エネルギッシュ"}),e("option",{value:"信頼感",children:"信頼感"})]})]})]})]}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-orange/20 p-6",children:[e("h3",{class:"text-xl font-semibold text-cyber-orange mb-6",children:[e("i",{class:"fas fa-cog mr-2"}),"生成オプション"]}),e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"コピータイプ"}),e("div",{class:"space-y-2",children:[e("label",{class:"flex items-center",children:[e("input",{type:"checkbox",checked:!0,class:"w-4 h-4 text-cyber-orange bg-navy-700 border-gray-600 rounded focus:ring-cyber-orange/20 focus:ring-2"}),e("span",{class:"ml-2 text-sm text-gray-300",children:"メインコピー"})]}),e("label",{class:"flex items-center",children:[e("input",{type:"checkbox",checked:!0,class:"w-4 h-4 text-cyber-orange bg-navy-700 border-gray-600 rounded focus:ring-cyber-orange/20 focus:ring-2"}),e("span",{class:"ml-2 text-sm text-gray-300",children:"キャッチコピー"})]}),e("label",{class:"flex items-center",children:[e("input",{type:"checkbox",checked:!0,class:"w-4 h-4 text-cyber-orange bg-navy-700 border-gray-600 rounded focus:ring-cyber-orange/20 focus:ring-2"}),e("span",{class:"ml-2 text-sm text-gray-300",children:"CTAコピー"})]}),e("label",{class:"flex items-center",children:[e("input",{type:"checkbox",class:"w-4 h-4 text-cyber-orange bg-navy-700 border-gray-600 rounded focus:ring-cyber-orange/20 focus:ring-2"}),e("span",{class:"ml-2 text-sm text-gray-300",children:"サブコピー"})]})]})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"生成数"}),e("select",{id:"copyCount",class:"w-full px-4 py-2 bg-navy-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-cyber-orange transition-colors",children:[e("option",{value:"3",children:"3パターン"}),e("option",{value:"5",selected:!0,children:"5パターン"}),e("option",{value:"7",children:"7パターン"}),e("option",{value:"10",children:"10パターン"})]})]}),e("div",{children:e("label",{class:"flex items-center",children:[e("input",{type:"checkbox",id:"includeEmoji",class:"w-4 h-4 text-cyber-orange bg-navy-700 border-gray-600 rounded focus:ring-cyber-orange/20 focus:ring-2"}),e("span",{class:"ml-2 text-sm text-gray-300",children:"絵文字を含める"})]})}),e("div",{children:e("label",{class:"flex items-center",children:[e("input",{type:"checkbox",id:"urgencyElement",class:"w-4 h-4 text-cyber-orange bg-navy-700 border-gray-600 rounded focus:ring-cyber-orange/20 focus:ring-2"}),e("span",{class:"ml-2 text-sm text-gray-300",children:"緊急性要素を含める"})]})})]}),e("div",{class:"mt-6 p-4 bg-cyber-orange/10 rounded-lg border border-cyber-orange/20",children:[e("h4",{class:"text-sm font-semibold text-cyber-orange mb-2",children:[e("i",{class:"fas fa-lightbulb mr-2"}),"AIのポイント"]}),e("ul",{class:"text-xs text-gray-300 space-y-1",children:[e("li",{children:"• 業界特性を考慮した最適化"}),e("li",{children:"• ターゲット層に響く言葉選び"}),e("li",{children:"• 媒体の文字制限に配慮"}),e("li",{children:"• 効果予測スコア付き"})]})]})]})]}),e("div",{class:"mb-12",children:e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-purple/20 p-8",children:[e("h3",{class:"text-2xl font-semibold text-cyber-purple mb-6 text-center",children:[e("i",{class:"fas fa-cloud-upload-alt mr-2"}),"バナー画像アップロード"]}),e("div",{class:"border-2 border-dashed border-cyber-purple/30 rounded-xl p-6 sm:p-8 text-center hover:border-cyber-purple/50 transition-colors duration-300",children:e("div",{id:"copyDropZone",class:"cursor-pointer",children:[e("i",{class:"fas fa-image text-4xl sm:text-6xl text-cyber-purple/50 mb-4"}),e("p",{class:"text-base sm:text-lg text-gray-300 mb-2",children:[e("span",{class:"hidden sm:inline",children:"コピー生成用の"}),"画像をアップロード"]}),e("p",{class:"text-xs sm:text-sm text-gray-400 mb-4",children:"PNG, JPG, JPEG対応（最大10MB）"}),e("div",{class:"flex flex-col sm:flex-row gap-2 sm:gap-4 justify-center items-center",children:[e("button",{type:"button",onclick:"document.getElementById('copyImageUpload').click()",class:"w-full sm:w-auto bg-cyber-purple/20 border border-cyber-purple/50 text-cyber-purple px-4 py-2 rounded-lg hover:bg-cyber-purple/30 transition-colors",children:[e("i",{class:"fas fa-folder-open mr-2"}),"ファイルを選択"]}),e("button",{type:"button",onclick:"document.getElementById('copyCameraUpload').click()",class:"w-full sm:w-auto bg-cyber-blue/20 border border-cyber-blue/50 text-cyber-blue px-4 py-2 rounded-lg hover:bg-cyber-blue/30 transition-colors sm:hidden",children:[e("i",{class:"fas fa-camera mr-2"}),"カメラで撮影"]})]}),e("input",{type:"file",id:"copyImageUpload",class:"hidden",accept:"image/png,image/jpeg,image/jpg,image/webp"}),e("input",{type:"file",id:"copyCameraUpload",class:"hidden",accept:"image/*",capture:"environment"})]})}),e("div",{id:"copyImagePreview",class:"hidden mt-6",children:[e("img",{id:"copyPreviewImage",class:"max-w-full h-auto rounded-lg border border-gray-600 mx-auto"}),e("p",{id:"copyImageName",class:"text-sm text-gray-400 mt-2 text-center"})]})]})}),e("div",{class:"text-center mb-12",children:e("button",{id:"generateButton",disabled:!0,class:"px-12 py-4 bg-gradient-to-r from-cyber-pink to-cyber-orange rounded-full text-white font-bold text-lg shadow-2xl hover:shadow-cyber-pink/50 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e("span",{id:"generateButtonText",children:[e("i",{class:"fas fa-magic mr-3"}),"AIコピー生成開始"]}),e("span",{id:"generateSpinner",class:"hidden",children:[e("i",{class:"fas fa-spinner fa-spin mr-3"}),"生成中..."]})]})}),e("div",{id:"copyResultsSection",class:"hidden",children:e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-green/20 p-8 animate-slide-up",children:[e("h3",{class:"text-2xl font-semibold text-cyber-green mb-6 text-center",children:[e("i",{class:"fas fa-magic mr-2"}),"生成結果"]}),e("div",{class:"mb-8 p-6 bg-navy-700/30 rounded-xl",children:[e("h4",{class:"text-lg font-semibold text-cyber-blue mb-4",children:[e("i",{class:"fas fa-chart-bar mr-2"}),"全体分析"]}),e("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e("div",{class:"text-center",children:[e("div",{class:"text-2xl font-bold text-cyber-green",id:"overallScore",children:"88"}),e("p",{class:"text-gray-400 text-sm",children:"総合スコア"})]}),e("div",{class:"text-center",children:[e("div",{class:"text-2xl font-bold text-cyber-blue",id:"industryMatch",children:"95%"}),e("p",{class:"text-gray-400 text-sm",children:"業界適合度"})]}),e("div",{class:"text-center",children:[e("div",{class:"text-lg font-semibold text-cyber-pink",id:"targetAudience",children:"美容意識の高い20-40代女性"}),e("p",{class:"text-gray-400 text-sm",children:"推定ターゲット"})]})]})]}),e("div",{id:"generatedCopies",class:"space-y-6"}),e("div",{class:"mt-8 p-6 bg-gradient-to-r from-cyber-green/20 to-green-600/10 border border-cyber-green/30 rounded-xl",children:[e("h4",{class:"text-lg font-semibold text-cyber-green mb-4",children:[e("i",{class:"fas fa-bullseye mr-2"}),"実装推奨事項"]}),e("div",{id:"copyRecommendations",class:"space-y-2 text-sm text-white"})]}),e("div",{class:"mt-6 text-center",children:e("button",{id:"copyAllButton",class:"px-8 py-3 bg-gradient-to-r from-cyber-blue to-cyber-purple rounded-full text-white font-semibold hover:from-cyber-purple hover:to-cyber-pink transition-all duration-300 transform hover:scale-105",children:[e("i",{class:"fas fa-copy mr-2"}),"全てのコピーをクリップボードにコピー"]})})]})}),e("div",{class:"mt-16 bg-navy-800/30 backdrop-blur-lg rounded-2xl border border-gray-700/30 p-8",children:[e("h3",{class:"text-2xl font-semibold text-white mb-6 text-center",children:[e("i",{class:"fas fa-lightbulb mr-2 text-cyber-blue"}),"生成例プレビュー"]}),e("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e("div",{class:"bg-navy-700/50 rounded-xl p-4 border border-cyber-blue/20",children:[e("div",{class:"flex items-center justify-between mb-3",children:[e("span",{class:"text-xs font-semibold text-cyber-blue bg-cyber-blue/20 px-2 py-1 rounded",children:"メインコピー"}),e("span",{class:"text-xs text-cyber-green font-semibold",children:"92%"})]}),e("p",{class:"text-white text-sm mb-2",children:'"美肌への近道、ここにあり。今すぐ体験してください。"'}),e("p",{class:"text-gray-400 text-xs",children:"緊急性と具体的なベネフィットを組み合わせた効果的なコピー"})]}),e("div",{class:"bg-navy-700/50 rounded-xl p-4 border border-cyber-green/20",children:[e("div",{class:"flex items-center justify-between mb-3",children:[e("span",{class:"text-xs font-semibold text-cyber-green bg-cyber-green/20 px-2 py-1 rounded",children:"キャッチコピー"}),e("span",{class:"text-xs text-cyber-green font-semibold",children:"89%"})]}),e("p",{class:"text-white text-sm mb-2",children:'"3日で実感！輝く美肌を手に入れる秘密"'}),e("p",{class:"text-gray-400 text-xs",children:"数字による具体性と期待感を高める表現が効果的"})]}),e("div",{class:"bg-navy-700/50 rounded-xl p-4 border border-cyber-pink/20",children:[e("div",{class:"flex items-center justify-between mb-3",children:[e("span",{class:"text-xs font-semibold text-cyber-pink bg-cyber-pink/20 px-2 py-1 rounded",children:"CTAコピー"}),e("span",{class:"text-xs text-cyber-green font-semibold",children:"87%"})]}),e("p",{class:"text-white text-sm mb-2",children:'"限定価格で今すぐ始める"'}),e("p",{class:"text-gray-400 text-xs",children:"限定性と行動喚起を組み合わせた強力なCTA"})]}),e("div",{class:"bg-navy-700/50 rounded-xl p-4 border border-cyber-orange/20",children:[e("div",{class:"flex items-center justify-between mb-3",children:[e("span",{class:"text-xs font-semibold text-cyber-orange bg-cyber-orange/20 px-2 py-1 rounded",children:"サブコピー"}),e("span",{class:"text-xs text-cyber-green font-semibold",children:"85%"})]}),e("p",{class:"text-white text-sm mb-2",children:'"94%のユーザーが満足した美容メソッド"'}),e("p",{class:"text-gray-400 text-xs",children:"社会的証明による信頼性向上"})]})]}),e("div",{class:"mt-6 text-center",children:e("p",{class:"text-gray-400 text-sm",children:[e("i",{class:"fas fa-info-circle mr-2 text-cyber-blue"}),"上記は生成例です。実際の画像をアップロードして、あなたのブランドに最適化されたコピーを生成してください。"]})})]})]}),e("script",{dangerouslySetInnerHTML:{__html:`
          document.addEventListener('DOMContentLoaded', function() {
            let uploadedImage = null;
            let isGenerating = false;
            
            // DOM Elements
            const dropZone = document.getElementById('copyDropZone');
            const imageUpload = document.getElementById('copyImageUpload');
            const imagePreview = document.getElementById('copyImagePreview');
            const previewImage = document.getElementById('copyPreviewImage');
            const generateButton = document.getElementById('generateButton');
            const generateButtonText = document.getElementById('generateButtonText');
            const generateSpinner = document.getElementById('generateSpinner');
            const resultsSection = document.getElementById('copyResultsSection');
            
            // Image upload handlers
            if (dropZone && imageUpload) {
              dropZone.addEventListener('click', () => {
                imageUpload.click();
              });
              dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                e.stopPropagation();
                dropZone.classList.add('border-cyber-orange');
              });
              dropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                e.stopPropagation();
                dropZone.classList.remove('border-cyber-orange');
              });
              dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                e.stopPropagation();
                dropZone.classList.remove('border-cyber-orange');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                  handleImageUpload(files[0]);
                }
              });
              
              imageUpload.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                  handleImageUpload(e.target.files[0]);
                }
              });
            }
            
            function handleImageUpload(file) {
              if (!file.type.startsWith('image/')) {
                alert('画像ファイルを選択してください。');
                return;
              }
              
              if (file.size > 10 * 1024 * 1024) {
                alert('ファイルサイズは10MB以下にしてください。');
                return;
              }
              
              uploadedImage = file;
              const reader = new FileReader();
              reader.onload = (e) => {
                if (previewImage && imagePreview) {
                  previewImage.src = e.target.result;
                  imagePreview.classList.remove('hidden');
                  updateGenerateButton();
                }
              };
              reader.readAsDataURL(file);
            }
            
            function updateGenerateButton() {
              if (generateButton && !isGenerating) {
                generateButton.disabled = !uploadedImage;
              }
            }
            
            // Generate button handler
            if (generateButton) {
              generateButton.addEventListener('click', async function() {
                if (isGenerating || !uploadedImage) return;
                
                isGenerating = true;
                generateButton.disabled = true;
                if (generateButtonText) generateButtonText.classList.add('hidden');
                if (generateSpinner) generateSpinner.classList.remove('hidden');
                
                try {
                  await performCopyGeneration();
                } catch (error) {
                  console.error('Copy generation error:', error);
                  alert('コピー生成中にエラーが発生しました。もう一度お試しください。');
                } finally {
                  isGenerating = false;
                  generateButton.disabled = false;
                  if (generateButtonText) generateButtonText.classList.remove('hidden');
                  if (generateSpinner) generateSpinner.classList.add('hidden');
                  updateGenerateButton();
                }
              });
            }
            
            async function performCopyGeneration() {
              const formData = new FormData();
              formData.append('image', uploadedImage);
              
              const response = await fetch('/api/copy-generation', {
                method: 'POST',
                body: formData
              });
              
              const data = await response.json();
              
              if (data.success) {
                displayCopyResults(data.result);
              } else {
                throw new Error(data.message || 'コピー生成に失敗しました');
              }
            }
            
            function displayCopyResults(result) {
              if (resultsSection) {
                resultsSection.classList.remove('hidden');
                
                // Clear existing results
                const existingResults = resultsSection.querySelector('.copy-results-container');
                if (existingResults) {
                  existingResults.remove();
                }
                
                // Create results container
                const resultsContainer = document.createElement('div');
                resultsContainer.className = 'copy-results-container bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-orange/20 p-8 mb-8 animate-slide-up';
                
                resultsContainer.innerHTML = \`
                  <h3 class="text-2xl font-semibold text-cyber-orange mb-6 text-center">
                    <i class="fas fa-magic mr-2"></i>生成されたコピー
                  </h3>
                  
                  \${result.note ? \`
                    <div class="mb-6 p-3 bg-yellow-600/20 border border-yellow-400/30 rounded-lg text-center">
                      <i class="fas fa-info-circle mr-2 text-yellow-400"></i>\${result.note}
                    </div>
                  \` : ''}
                  
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    \${result.copies.map(copy => \`
                      <div class="bg-navy-700/50 border border-gray-600/50 rounded-xl p-6 hover:border-cyber-orange/30 transition-colors">
                        <div class="flex justify-between items-start mb-4">
                          <h4 class="text-lg font-semibold text-cyber-orange">\${copy.type}</h4>
                          <span class="bg-gradient-to-r from-cyber-green/20 to-green-400/10 border border-cyber-green/30 px-3 py-1 rounded-full text-xs font-bold text-cyber-green">
                            効果度: \${copy.effectiveness}%
                          </span>
                        </div>
                        <p class="text-white text-lg mb-4 leading-relaxed">\${copy.text}</p>
                        <p class="text-gray-400 text-sm">\${copy.reasoning}</p>
                        <button class="mt-3 px-4 py-2 bg-cyber-orange/20 border border-cyber-orange/30 rounded-lg text-cyber-orange text-sm hover:bg-cyber-orange/30 transition-colors" onclick="navigator.clipboard.writeText('\${copy.text}'); this.textContent='コピー済み!'; setTimeout(() => this.textContent='コピー', 2000)">
                          <i class="fas fa-copy mr-2"></i>コピー
                        </button>
                      </div>
                    \`).join('')}
                  </div>
                  
                  <div class="bg-navy-700/30 rounded-xl p-6">
                    <h4 class="text-lg font-semibold text-cyber-green mb-4">
                      <i class="fas fa-chart-line mr-2"></i>分析サマリー
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                      <div class="text-center">
                        <div class="text-2xl font-bold text-cyber-green">\${result.analysis.overallScore}</div>
                        <p class="text-gray-400 text-sm">総合スコア</p>
                      </div>
                      <div class="text-center">
                        <div class="text-2xl font-bold text-cyber-blue">\${result.analysis.industryMatch}%</div>
                        <p class="text-gray-400 text-sm">業界適合度</p>
                      </div>
                      <div class="text-center">
                        <div class="text-lg font-semibold text-cyber-pink">\${result.analysis.targetAudience}</div>
                        <p class="text-gray-400 text-sm">想定ターゲット</p>
                      </div>
                    </div>
                    
                    <div class="mt-6">
                      <h5 class="text-md font-semibold text-cyber-orange mb-3">実装推奨事項</h5>
                      <ul class="space-y-2">
                        \${result.analysis.recommendations.map(rec => \`
                          <li class="text-gray-300 text-sm">
                            <i class="fas fa-check-circle text-cyber-green mr-2"></i>\${rec}
                          </li>
                        \`).join('')}
                      </ul>
                    </div>
                  </div>
                \`;
                
                resultsSection.appendChild(resultsContainer);
                
                // Scroll to results
                resultsContainer.scrollIntoView({ behavior: 'smooth' });
              }
            }
          });
        `}})]}),pi=()=>e("div",{class:"min-h-screen bg-gradient-to-br from-navy-900 via-navy-800 to-navy-900",children:[e("header",{class:"bg-navy-800/50 backdrop-blur-lg border-b border-cyber-blue/20",children:e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e("div",{class:"flex justify-between items-center py-6",children:[e("div",{class:"flex items-center",children:[e("div",{class:"w-12 h-12 bg-gradient-to-r from-cyber-blue to-cyber-purple rounded-xl flex items-center justify-center mr-4",children:e("i",{class:"fas fa-chart-line text-white text-xl"})}),e("div",{children:[e("h1",{class:"text-2xl font-orbitron font-bold text-white",children:"バナスコAI"}),e("p",{class:"text-cyber-blue text-sm",children:"運営管理ダッシュボード"})]})]}),e("div",{class:"flex items-center space-x-4",children:[e("div",{class:"text-right",children:[e("p",{class:"text-white font-medium",children:"管理者"}),e("p",{class:"text-gray-400 text-sm",children:"admin@banasuko.com"})]}),e("button",{class:"bg-red-500/20 text-red-400 px-4 py-2 rounded-lg hover:bg-red-500/30 transition-colors",children:[e("i",{class:"fas fa-sign-out-alt mr-2"}),"ログアウト"]})]})]})})}),e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-blue/20 p-6",children:e("div",{class:"flex items-center justify-between",children:[e("div",{children:[e("p",{class:"text-gray-400 text-sm font-medium",children:"総ユーザー数"}),e("p",{class:"text-3xl font-bold text-white mt-2",id:"totalUsers",children:"-"}),e("p",{class:"text-cyber-green text-sm mt-1",children:[e("i",{class:"fas fa-arrow-up mr-1"}),e("span",{id:"userGrowth",children:"-"})," 今月"]})]}),e("div",{class:"w-12 h-12 bg-cyber-blue/20 rounded-xl flex items-center justify-center",children:e("i",{class:"fas fa-users text-cyber-blue text-xl"})})]})}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-green/20 p-6",children:e("div",{class:"flex items-center justify-between",children:[e("div",{children:[e("p",{class:"text-gray-400 text-sm font-medium",children:"アクティブユーザー"}),e("p",{class:"text-3xl font-bold text-white mt-2",id:"activeUsers",children:"-"}),e("p",{class:"text-cyber-green text-sm mt-1",children:[e("span",{id:"activeRate",children:"-"}),"% アクティブ率"]})]}),e("div",{class:"w-12 h-12 bg-cyber-green/20 rounded-xl flex items-center justify-center",children:e("i",{class:"fas fa-user-check text-cyber-green text-xl"})})]})}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-pink/20 p-6",children:e("div",{class:"flex items-center justify-between",children:[e("div",{children:[e("p",{class:"text-gray-400 text-sm font-medium",children:"月間収益"}),e("p",{class:"text-3xl font-bold text-white mt-2",children:["¥",e("span",{id:"monthlyRevenue",children:"-"})]}),e("p",{class:"text-cyber-pink text-sm mt-1",children:[e("i",{class:"fas fa-arrow-up mr-1"}),e("span",{id:"revenueGrowth",children:"-"}),"% 前月比"]})]}),e("div",{class:"w-12 h-12 bg-cyber-pink/20 rounded-xl flex items-center justify-center",children:e("i",{class:"fas fa-yen-sign text-cyber-pink text-xl"})})]})}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-orange/20 p-6",children:e("div",{class:"flex items-center justify-between",children:[e("div",{children:[e("p",{class:"text-gray-400 text-sm font-medium",children:"月間API使用数"}),e("p",{class:"text-3xl font-bold text-white mt-2",id:"monthlyApiUsage",children:"-"}),e("p",{class:"text-cyber-orange text-sm mt-1",children:[e("span",{id:"apiUsageGrowth",children:"-"})," 前月比"]})]}),e("div",{class:"w-12 h-12 bg-cyber-orange/20 rounded-xl flex items-center justify-center",children:e("i",{class:"fas fa-chart-bar text-cyber-orange text-xl"})})]})})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e("div",{class:"lg:col-span-2",children:e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-gray-700/30 p-6",children:[e("div",{class:"flex items-center justify-between mb-6",children:[e("h2",{class:"text-xl font-semibold text-white",children:[e("i",{class:"fas fa-users-cog mr-2 text-cyber-blue"}),"ユーザー管理"]}),e("div",{class:"flex space-x-2",children:[e("select",{class:"bg-navy-700 text-white px-3 py-2 rounded-lg border border-gray-600 text-sm",children:[e("option",{children:"全プラン"}),e("option",{children:"フリー"}),e("option",{children:"ベーシック"}),e("option",{children:"プレミアム"})]}),e("button",{class:"bg-cyber-blue text-white px-4 py-2 rounded-lg hover:bg-cyber-purple transition-colors text-sm",children:[e("i",{class:"fas fa-download mr-2"}),"エクスポート"]})]})]}),e("div",{class:"overflow-x-auto",children:e("table",{class:"w-full",children:[e("thead",{children:e("tr",{class:"border-b border-gray-700",children:[e("th",{class:"text-left py-3 px-4 text-gray-400 font-medium text-sm",children:"ユーザー"}),e("th",{class:"text-left py-3 px-4 text-gray-400 font-medium text-sm",children:"プラン"}),e("th",{class:"text-left py-3 px-4 text-gray-400 font-medium text-sm",children:"使用数"}),e("th",{class:"text-left py-3 px-4 text-gray-400 font-medium text-sm",children:"登録日"}),e("th",{class:"text-left py-3 px-4 text-gray-400 font-medium text-sm",children:"操作"})]})}),e("tbody",{id:"userTableBody",children:e("tr",{class:"border-b border-gray-800 hover:bg-navy-700/30",children:[e("td",{class:"py-4 px-4",children:e("div",{class:"flex items-center",children:[e("div",{class:"w-10 h-10 bg-gradient-to-r from-cyber-blue to-cyber-purple rounded-full flex items-center justify-center mr-3",children:e("span",{class:"text-white font-semibold text-sm",children:"U"})}),e("div",{children:[e("p",{class:"text-white font-medium",children:"ローディング中..."}),e("p",{class:"text-gray-400 text-sm",children:"user@example.com"})]})]})}),e("td",{class:"py-4 px-4",children:e("span",{class:"bg-cyber-blue/20 text-cyber-blue px-2 py-1 rounded-lg text-xs font-medium",children:"フリー"})}),e("td",{class:"py-4 px-4",children:e("div",{class:"text-white text-sm",children:[e("div",{children:"診断: -/-"}),e("div",{class:"text-gray-400",children:"A/B: -/-, コピー: -/-"})]})}),e("td",{class:"py-4 px-4 text-gray-400 text-sm",children:"-"}),e("td",{class:"py-4 px-4",children:e("div",{class:"flex space-x-2",children:[e("button",{class:"text-cyber-blue hover:text-cyber-purple transition-colors text-sm",children:e("i",{class:"fas fa-edit"})}),e("button",{class:"text-cyber-pink hover:text-red-400 transition-colors text-sm",children:e("i",{class:"fas fa-ban"})})]})})]})})]})}),e("div",{class:"flex items-center justify-between mt-6",children:[e("p",{class:"text-gray-400 text-sm",children:"1-10 of 100 ユーザー"}),e("div",{class:"flex space-x-2",children:[e("button",{class:"bg-navy-700 text-gray-400 px-3 py-1 rounded text-sm hover:bg-navy-600 transition-colors",children:"前へ"}),e("button",{class:"bg-cyber-blue text-white px-3 py-1 rounded text-sm",children:"1"}),e("button",{class:"bg-navy-700 text-gray-400 px-3 py-1 rounded text-sm hover:bg-navy-600 transition-colors",children:"2"}),e("button",{class:"bg-navy-700 text-gray-400 px-3 py-1 rounded text-sm hover:bg-navy-600 transition-colors",children:"次へ"})]})]})]})}),e("div",{class:"space-y-6",children:[e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-gray-700/30 p-6",children:[e("h3",{class:"text-lg font-semibold text-white mb-4",children:[e("i",{class:"fas fa-chart-pie mr-2 text-cyber-green"}),"プラン別統計"]}),e("div",{class:"space-y-4",children:[e("div",{class:"flex items-center justify-between",children:[e("div",{class:"flex items-center",children:[e("div",{class:"w-3 h-3 bg-gray-400 rounded-full mr-2"}),e("span",{class:"text-gray-300 text-sm",children:"フリー"})]}),e("div",{class:"text-right",children:[e("span",{class:"text-white font-medium",id:"freePlanCount",children:"-"}),e("span",{class:"text-gray-400 text-xs ml-1",children:["(",e("span",{id:"freePlanPercent",children:"-"}),"%)"]})]})]}),e("div",{class:"flex items-center justify-between",children:[e("div",{class:"flex items-center",children:[e("div",{class:"w-3 h-3 bg-cyber-blue rounded-full mr-2"}),e("span",{class:"text-gray-300 text-sm",children:"ベーシック"})]}),e("div",{class:"text-right",children:[e("span",{class:"text-white font-medium",id:"basicPlanCount",children:"-"}),e("span",{class:"text-gray-400 text-xs ml-1",children:["(",e("span",{id:"basicPlanPercent",children:"-"}),"%)"]})]})]}),e("div",{class:"flex items-center justify-between",children:[e("div",{class:"flex items-center",children:[e("div",{class:"w-3 h-3 bg-cyber-pink rounded-full mr-2"}),e("span",{class:"text-gray-300 text-sm",children:"プレミアム"})]}),e("div",{class:"text-right",children:[e("span",{class:"text-white font-medium",id:"premiumPlanCount",children:"-"}),e("span",{class:"text-gray-400 text-xs ml-1",children:["(",e("span",{id:"premiumPlanPercent",children:"-"}),"%)"]})]})]})]})]}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-gray-700/30 p-6",children:[e("h3",{class:"text-lg font-semibold text-white mb-4",children:[e("i",{class:"fas fa-clock mr-2 text-cyber-orange"}),"最近のアクティビティ"]}),e("div",{class:"space-y-3",id:"recentActivity",children:[e("div",{class:"flex items-center text-sm",children:[e("div",{class:"w-2 h-2 bg-cyber-green rounded-full mr-3"}),e("div",{class:"flex-1",children:[e("span",{class:"text-gray-300",children:"新規ユーザー登録"}),e("span",{class:"text-gray-500 ml-2",children:"5分前"})]})]}),e("div",{class:"flex items-center text-sm",children:[e("div",{class:"w-2 h-2 bg-cyber-blue rounded-full mr-3"}),e("div",{class:"flex-1",children:[e("span",{class:"text-gray-300",children:"プラン変更 (Basic→Premium)"}),e("span",{class:"text-gray-500 ml-2",children:"12分前"})]})]}),e("div",{class:"flex items-center text-sm",children:[e("div",{class:"w-2 h-2 bg-cyber-pink rounded-full mr-3"}),e("div",{class:"flex-1",children:[e("span",{class:"text-gray-300",children:"AI診断実行"}),e("span",{class:"text-gray-500 ml-2",children:"18分前"})]})]})]})]}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-gray-700/30 p-6",children:[e("h3",{class:"text-lg font-semibold text-white mb-4",children:[e("i",{class:"fas fa-cogs mr-2 text-gray-400"}),"システム設定"]}),e("div",{class:"space-y-3",children:[e("button",{class:"w-full text-left bg-navy-700/50 hover:bg-navy-700 transition-colors p-3 rounded-lg",children:e("div",{class:"flex items-center justify-between",children:[e("span",{class:"text-gray-300 text-sm",children:[e("i",{class:"fas fa-refresh mr-2"}),"使用回数リセット"]}),e("i",{class:"fas fa-chevron-right text-gray-500"})]})}),e("button",{class:"w-full text-left bg-navy-700/50 hover:bg-navy-700 transition-colors p-3 rounded-lg",children:e("div",{class:"flex items-center justify-between",children:[e("span",{class:"text-gray-300 text-sm",children:[e("i",{class:"fas fa-download mr-2"}),"データエクスポート"]}),e("i",{class:"fas fa-chevron-right text-gray-500"})]})}),e("button",{class:"w-full text-left bg-navy-700/50 hover:bg-navy-700 transition-colors p-3 rounded-lg",children:e("div",{class:"flex items-center justify-between",children:[e("span",{class:"text-gray-300 text-sm",children:[e("i",{class:"fas fa-bell mr-2"}),"通知設定"]}),e("i",{class:"fas fa-chevron-right text-gray-500"})]})})]})]})]})]})]}),e("div",{id:"editUserModal",class:"fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50",children:e("div",{class:"flex items-center justify-center min-h-screen p-4",children:e("div",{class:"bg-navy-800 rounded-2xl border border-gray-700 p-6 w-full max-w-md",children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("h3",{class:"text-lg font-semibold text-white",children:"ユーザー編集"}),e("button",{id:"closeEditModal",class:"text-gray-400 hover:text-white",children:e("i",{class:"fas fa-times"})})]}),e("form",{id:"editUserForm",class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-gray-300 text-sm mb-2",children:"ユーザー名"}),e("input",{type:"text",id:"editUsername",class:"w-full bg-navy-700 text-white px-3 py-2 rounded-lg border border-gray-600 focus:border-cyber-blue focus:outline-none"})]}),e("div",{children:[e("label",{class:"block text-gray-300 text-sm mb-2",children:"メールアドレス"}),e("input",{type:"email",id:"editEmail",class:"w-full bg-navy-700 text-white px-3 py-2 rounded-lg border border-gray-600 focus:border-cyber-blue focus:outline-none"})]}),e("div",{children:[e("label",{class:"block text-gray-300 text-sm mb-2",children:"プラン"}),e("select",{id:"editPlan",class:"w-full bg-navy-700 text-white px-3 py-2 rounded-lg border border-gray-600 focus:border-cyber-blue focus:outline-none",children:[e("option",{value:"free",children:"フリー"}),e("option",{value:"basic",children:"ベーシック"}),e("option",{value:"premium",children:"プレミアム"})]})]}),e("div",{class:"flex space-x-3 pt-4",children:[e("button",{type:"submit",class:"flex-1 bg-cyber-blue text-white py-2 rounded-lg hover:bg-cyber-purple transition-colors",children:"保存"}),e("button",{type:"button",id:"cancelEdit",class:"flex-1 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-500 transition-colors",children:"キャンセル"})]})]})]})})})]}),gi=()=>e("div",{class:"min-h-screen bg-gradient-to-br from-navy-900 via-navy-800 to-navy-900",children:[e("header",{class:"bg-navy-800/50 backdrop-blur-lg border-b border-cyber-blue/20",children:e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e("div",{class:"flex justify-between items-center py-6",children:[e("div",{class:"flex items-center",children:[e("div",{class:"w-12 h-12 bg-gradient-to-r from-cyber-blue to-cyber-purple rounded-xl flex items-center justify-center mr-4",children:e("i",{class:"fas fa-user text-white text-xl"})}),e("div",{children:[e("h1",{class:"text-2xl font-orbitron font-bold text-white",children:"マイダッシュボード"}),e("p",{class:"text-cyber-blue text-sm",children:"バナスコAI 使用状況"})]})]}),e("div",{class:"flex items-center space-x-4",children:[e("div",{class:"text-right",children:[e("p",{class:"text-white font-medium user-name",children:"ユーザー名"}),e("p",{class:"text-gray-400 text-sm user-plan",children:"プラン"})]}),e("button",{class:"logout-btn bg-red-500/20 text-red-400 px-4 py-2 rounded-lg hover:bg-red-500/30 transition-colors",children:[e("i",{class:"fas fa-sign-out-alt mr-2"}),"ログアウト"]})]})]})})}),e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-blue/20 p-6 mb-8",children:e("div",{class:"flex items-center justify-between",children:[e("div",{class:"flex items-center",children:[e("div",{class:"w-20 h-20 bg-gradient-to-r from-cyber-blue to-cyber-purple rounded-2xl flex items-center justify-center mr-6",children:e("i",{class:"fas fa-user-circle text-white text-3xl"})}),e("div",{children:[e("h2",{class:"text-2xl font-semibold text-white user-name",children:"ユーザー名"}),e("p",{class:"text-gray-400 user-email",children:"user@example.com"}),e("div",{class:"flex items-center mt-2",children:[e("span",{class:"bg-cyber-blue/20 text-cyber-blue px-3 py-1 rounded-lg text-sm font-medium user-plan",children:"フリープラン"}),e("span",{class:"ml-3 text-gray-400 text-sm",children:[e("i",{class:"fas fa-calendar mr-1"}),e("span",{id:"daysUntilReset",children:"-"}),"日でリセット"]})]})]})]}),e("div",{class:"text-right",children:e("button",{id:"upgradePlanBtn",class:"bg-gradient-to-r from-cyber-pink to-cyber-orange text-white px-6 py-3 rounded-xl font-semibold hover:from-cyber-orange hover:to-yellow-500 transition-all duration-300 transform hover:scale-105",children:[e("i",{class:"fas fa-crown mr-2"}),"プランアップグレード"]})})]})}),e("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-blue/20 p-6",children:[e("div",{class:"flex items-center justify-between mb-4",children:e("div",{class:"flex items-center",children:[e("div",{class:"w-10 h-10 bg-cyber-blue/20 rounded-xl flex items-center justify-center mr-3",children:e("i",{class:"fas fa-chart-line text-cyber-blue"})}),e("h3",{class:"text-lg font-semibold text-white",children:"AI広告診断"})]})}),e("div",{class:"mb-4",children:[e("div",{class:"flex items-center justify-between mb-2",children:[e("span",{class:"text-gray-400 text-sm",children:"今月の使用量"}),e("span",{class:"text-white font-medium usage-single-analysis",children:"-/-"})]}),e("div",{class:"w-full bg-gray-700 rounded-full h-2",children:e("div",{id:"singleAnalysisProgress",class:"bg-cyber-blue h-2 rounded-full transition-all duration-300",style:"width: 0%"})}),e("div",{class:"flex items-center justify-between mt-2",children:[e("span",{class:"text-xs text-gray-500",children:"使用率"}),e("span",{id:"singleAnalysisPercentage",class:"text-xs text-cyber-blue",children:"0%"})]})]}),e("a",{href:"/analysis",class:"block w-full bg-cyber-blue/20 text-cyber-blue text-center py-2 rounded-lg hover:bg-cyber-blue/30 transition-colors text-sm font-medium",children:[e("i",{class:"fas fa-play mr-2"}),"診断を開始"]})]}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-green/20 p-6",children:[e("div",{class:"flex items-center justify-between mb-4",children:e("div",{class:"flex items-center",children:[e("div",{class:"w-10 h-10 bg-cyber-green/20 rounded-xl flex items-center justify-center mr-3",children:e("i",{class:"fas fa-balance-scale text-cyber-green"})}),e("h3",{class:"text-lg font-semibold text-white",children:"A/B比較分析"})]})}),e("div",{class:"mb-4",children:[e("div",{class:"flex items-center justify-between mb-2",children:[e("span",{class:"text-gray-400 text-sm",children:"今月の使用量"}),e("span",{class:"text-white font-medium usage-ab-comparison",children:"-/-"})]}),e("div",{class:"w-full bg-gray-700 rounded-full h-2",children:e("div",{id:"abComparisonProgress",class:"bg-cyber-green h-2 rounded-full transition-all duration-300",style:"width: 0%"})}),e("div",{class:"flex items-center justify-between mt-2",children:[e("span",{class:"text-xs text-gray-500",children:"使用率"}),e("span",{id:"abComparisonPercentage",class:"text-xs text-cyber-green",children:"0%"})]})]}),e("a",{href:"/analysis",class:"block w-full bg-cyber-green/20 text-cyber-green text-center py-2 rounded-lg hover:bg-cyber-green/30 transition-colors text-sm font-medium",children:[e("i",{class:"fas fa-play mr-2"}),"比較を開始"]})]}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-pink/20 p-6",children:[e("div",{class:"flex items-center justify-between mb-4",children:e("div",{class:"flex items-center",children:[e("div",{class:"w-10 h-10 bg-cyber-pink/20 rounded-xl flex items-center justify-center mr-3",children:e("i",{class:"fas fa-magic text-cyber-pink"})}),e("h3",{class:"text-lg font-semibold text-white",children:"AIコピー生成"})]})}),e("div",{class:"mb-4",children:[e("div",{class:"flex items-center justify-between mb-2",children:[e("span",{class:"text-gray-400 text-sm",children:"今月の使用量"}),e("span",{class:"text-white font-medium usage-copy-generation",children:"-/-"})]}),e("div",{class:"w-full bg-gray-700 rounded-full h-2",children:e("div",{id:"copyGenerationProgress",class:"bg-cyber-pink h-2 rounded-full transition-all duration-300",style:"width: 0%"})}),e("div",{class:"flex items-center justify-between mt-2",children:[e("span",{class:"text-xs text-gray-500",children:"使用率"}),e("span",{id:"copyGenerationPercentage",class:"text-xs text-cyber-pink",children:"0%"})]})]}),e("a",{href:"/copy-generation",class:"block w-full bg-cyber-pink/20 text-cyber-pink text-center py-2 rounded-lg hover:bg-cyber-pink/30 transition-colors text-sm font-medium",children:[e("i",{class:"fas fa-play mr-2"}),"生成を開始"]})]})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-gray-700/30 p-6",children:[e("h3",{class:"text-xl font-semibold text-white mb-6",children:[e("i",{class:"fas fa-clock mr-2 text-cyber-orange"}),"最近のアクティビティ"]}),e("div",{class:"space-y-4",id:"recentActivity",children:[e("div",{class:"flex items-center p-3 bg-navy-700/30 rounded-lg",children:[e("div",{class:"w-8 h-8 bg-cyber-blue/20 rounded-lg flex items-center justify-center mr-3",children:e("i",{class:"fas fa-chart-line text-cyber-blue text-sm"})}),e("div",{class:"flex-1",children:[e("p",{class:"text-white text-sm",children:"AI広告診断を実行"}),e("p",{class:"text-gray-400 text-xs",children:"2分前"})]})]}),e("div",{class:"text-center py-8 text-gray-500",children:[e("i",{class:"fas fa-spinner fa-spin text-2xl mb-2"}),e("p",{children:"アクティビティを読み込み中..."})]})]})]}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-gray-700/30 p-6",children:[e("h3",{class:"text-xl font-semibold text-white mb-6",children:[e("i",{class:"fas fa-crown mr-2 text-cyber-pink"}),"プラン変更"]}),e("div",{class:"space-y-4",children:[e("div",{class:"p-4 bg-gray-700/30 rounded-lg border border-gray-600",children:[e("div",{class:"flex items-center justify-between mb-2",children:[e("h4",{class:"text-lg font-semibold text-white",children:"フリープラン"}),e("span",{class:"text-gray-400 font-bold",children:"¥0"})]}),e("ul",{class:"text-gray-300 text-sm space-y-1 mb-3",children:[e("li",{children:"• AI広告診断 月10回まで"}),e("li",{children:"• A/B比較分析 月5回まで"}),e("li",{children:"• AIコピー生成 月3回まで"})]}),e("button",{class:"w-full bg-gray-600 text-gray-400 py-2 rounded-lg cursor-not-allowed",disabled:!0,children:"現在のプラン"})]}),e("div",{class:"p-4 bg-cyber-blue/10 rounded-lg border border-cyber-blue/30",children:[e("div",{class:"flex items-center justify-between mb-2",children:[e("h4",{class:"text-lg font-semibold text-white",children:"ベーシックプラン"}),e("span",{class:"text-cyber-blue font-bold",children:["¥2,980",e("span",{class:"text-sm",children:"/月"})]})]}),e("ul",{class:"text-gray-300 text-sm space-y-1 mb-3",children:[e("li",{children:"• AI広告診断 月100回まで"}),e("li",{children:"• A/B比較分析 月50回まで"}),e("li",{children:"• AIコピー生成 月30回まで"}),e("li",{children:"• 詳細レポート・統計機能"})]}),e("button",{class:"upgrade-plan-btn w-full bg-cyber-blue text-white py-2 rounded-lg hover:bg-cyber-purple transition-colors","data-plan":"basic",children:"ベーシックにアップグレード"})]}),e("div",{class:"p-4 bg-cyber-pink/10 rounded-lg border border-cyber-pink/30",children:[e("div",{class:"flex items-center justify-between mb-2",children:[e("h4",{class:"text-lg font-semibold text-white",children:"プレミアムプラン"}),e("span",{class:"text-cyber-pink font-bold",children:["¥9,800",e("span",{class:"text-sm",children:"/月"})]})]}),e("ul",{class:"text-gray-300 text-sm space-y-1 mb-3",children:[e("li",{children:"• 全機能 無制限利用"}),e("li",{children:"• 高度な分析・予測機能"}),e("li",{children:"• カスタムレポート作成"}),e("li",{children:"• API アクセス"})]}),e("button",{class:"upgrade-plan-btn w-full bg-cyber-pink text-white py-2 rounded-lg hover:bg-pink-500 transition-colors","data-plan":"premium",children:"プレミアムにアップグレード"})]})]})]})]})]}),e("div",{id:"planChangeModal",class:"fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50",children:e("div",{class:"flex items-center justify-center min-h-screen p-4",children:e("div",{class:"bg-navy-800 rounded-2xl border border-gray-700 p-6 w-full max-w-md",children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("h3",{class:"text-lg font-semibold text-white",children:"プラン変更確認"}),e("button",{id:"closePlanModal",class:"text-gray-400 hover:text-white",children:e("i",{class:"fas fa-times"})})]}),e("div",{class:"mb-6",children:[e("p",{class:"text-gray-300 mb-2",children:"以下のプランに変更しますか？"}),e("div",{class:"bg-navy-700 rounded-lg p-4",children:e("div",{class:"flex items-center justify-between",children:[e("span",{id:"newPlanName",class:"text-white font-medium",children:"プレミアムプラン"}),e("span",{id:"newPlanPrice",class:"text-cyber-pink font-bold",children:"¥9,800/月"})]})}),e("p",{class:"text-gray-400 text-sm mt-2",children:"※ プラン変更は即座に適用され、使用制限がリセットされます。"})]}),e("div",{class:"flex space-x-3",children:[e("button",{id:"confirmPlanChange",class:"flex-1 bg-cyber-blue text-white py-2 rounded-lg hover:bg-cyber-purple transition-colors",children:"変更する"}),e("button",{id:"cancelPlanChange",class:"flex-1 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-500 transition-colors",children:"キャンセル"})]})]})})})]}),yi=()=>e("div",{class:"min-h-screen bg-gradient-to-br from-navy-900 via-navy-800 to-navy-900",children:[e("header",{class:"bg-navy-800/50 backdrop-blur-lg border-b border-cyber-blue/20",children:e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e("div",{class:"flex justify-between items-center py-6",children:[e("div",{class:"flex items-center",children:[e("div",{class:"w-12 h-12 bg-gradient-to-r from-cyber-pink to-cyber-orange rounded-xl flex items-center justify-center mr-4",children:e("i",{class:"fas fa-crown text-white text-xl"})}),e("div",{children:[e("h1",{class:"text-2xl font-orbitron font-bold text-white",children:"プラン管理"}),e("p",{class:"text-cyber-pink text-sm",children:"最適なプランを選択"})]})]}),e("div",{class:"flex items-center space-x-4",children:e("a",{href:"/dashboard",class:"text-gray-400 hover:text-white transition-colors",children:[e("i",{class:"fas fa-arrow-left mr-2"}),"ダッシュボードに戻る"]})})]})})}),e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e("div",{class:"text-center mb-12",children:[e("h2",{class:"text-3xl font-bold text-white mb-4",children:"現在のプラン"}),e("div",{class:"inline-block bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-blue/20 px-8 py-6",children:e("div",{class:"flex items-center justify-center space-x-4",children:[e("div",{class:"w-16 h-16 bg-gradient-to-r from-cyber-blue to-cyber-purple rounded-2xl flex items-center justify-center",children:e("i",{class:"fas fa-user text-white text-2xl"})}),e("div",{class:"text-left",children:[e("h3",{class:"text-xl font-semibold text-white user-plan",children:"フリープラン"}),e("p",{class:"text-gray-400 text-sm user-email",children:"user@example.com"})]})]})})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12",children:[e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-gray-700/30 p-8 text-center",children:[e("div",{class:"mb-6",children:[e("div",{class:"w-20 h-20 bg-gray-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e("i",{class:"fas fa-user text-white text-2xl"})}),e("h3",{class:"text-2xl font-bold text-white mb-2",children:"フリープラン"}),e("div",{class:"text-4xl font-bold text-gray-400 mb-2",children:["¥0",e("span",{class:"text-lg font-normal",children:"/月"})]}),e("p",{class:"text-gray-400 text-sm",children:"個人利用向け"})]}),e("div",{class:"space-y-4 mb-8",children:[e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"AI広告診断"}),e("span",{class:"text-white font-medium",children:"月10回"})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"A/B比較分析"}),e("span",{class:"text-white font-medium",children:"月5回"})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"AIコピー生成"}),e("span",{class:"text-white font-medium",children:"月3回"})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"基本レポート"}),e("span",{class:"text-cyber-green",children:e("i",{class:"fas fa-check"})})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"メールサポート"}),e("span",{class:"text-red-400",children:e("i",{class:"fas fa-times"})})]})]}),e("button",{class:"w-full bg-gray-600 text-gray-400 py-3 rounded-xl font-semibold cursor-not-allowed",disabled:!0,children:"現在のプラン"})]}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-blue/30 p-8 text-center relative",children:[e("div",{class:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:e("span",{class:"bg-cyber-blue text-white px-4 py-1 rounded-full text-sm font-medium",children:"おすすめ"})}),e("div",{class:"mb-6",children:[e("div",{class:"w-20 h-20 bg-gradient-to-r from-cyber-blue to-cyber-purple rounded-2xl flex items-center justify-center mx-auto mb-4",children:e("i",{class:"fas fa-rocket text-white text-2xl"})}),e("h3",{class:"text-2xl font-bold text-white mb-2",children:"ベーシックプラン"}),e("div",{class:"text-4xl font-bold text-cyber-blue mb-2",children:["¥2,980",e("span",{class:"text-lg font-normal",children:"/月"})]}),e("p",{class:"text-gray-400 text-sm",children:"小〜中規模事業者向け"})]}),e("div",{class:"space-y-4 mb-8",children:[e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"AI広告診断"}),e("span",{class:"text-white font-medium",children:"月100回"})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"A/B比較分析"}),e("span",{class:"text-white font-medium",children:"月50回"})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"AIコピー生成"}),e("span",{class:"text-white font-medium",children:"月30回"})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"詳細レポート"}),e("span",{class:"text-cyber-green",children:e("i",{class:"fas fa-check"})})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"メールサポート"}),e("span",{class:"text-cyber-green",children:e("i",{class:"fas fa-check"})})]})]}),e("button",{class:"plan-select-btn w-full bg-gradient-to-r from-cyber-blue to-cyber-purple text-white py-3 rounded-xl font-semibold hover:from-cyber-purple hover:to-cyber-pink transition-all duration-300 transform hover:scale-105","data-plan":"basic",children:"ベーシックプランを選択"})]}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-cyber-pink/30 p-8 text-center relative",children:[e("div",{class:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:e("span",{class:"bg-gradient-to-r from-cyber-pink to-cyber-orange text-white px-4 py-1 rounded-full text-sm font-medium",children:"プロ向け"})}),e("div",{class:"mb-6",children:[e("div",{class:"w-20 h-20 bg-gradient-to-r from-cyber-pink to-cyber-orange rounded-2xl flex items-center justify-center mx-auto mb-4",children:e("i",{class:"fas fa-crown text-white text-2xl"})}),e("h3",{class:"text-2xl font-bold text-white mb-2",children:"プレミアムプラン"}),e("div",{class:"text-4xl font-bold text-cyber-pink mb-2",children:["¥9,800",e("span",{class:"text-lg font-normal",children:"/月"})]}),e("p",{class:"text-gray-400 text-sm",children:"大規模事業者・代理店向け"})]}),e("div",{class:"space-y-4 mb-8",children:[e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"AI広告診断"}),e("span",{class:"text-white font-medium",children:"無制限"})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"A/B比較分析"}),e("span",{class:"text-white font-medium",children:"無制限"})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"AIコピー生成"}),e("span",{class:"text-white font-medium",children:"無制限"})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"カスタムレポート"}),e("span",{class:"text-cyber-green",children:e("i",{class:"fas fa-check"})})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"優先サポート"}),e("span",{class:"text-cyber-green",children:e("i",{class:"fas fa-check"})})]}),e("div",{class:"flex items-center justify-between text-sm",children:[e("span",{class:"text-gray-300",children:"API アクセス"}),e("span",{class:"text-cyber-green",children:e("i",{class:"fas fa-check"})})]})]}),e("button",{class:"plan-select-btn w-full bg-gradient-to-r from-cyber-pink to-cyber-orange text-white py-3 rounded-xl font-semibold hover:from-cyber-orange hover:to-yellow-500 transition-all duration-300 transform hover:scale-105","data-plan":"premium",children:"プレミアムプランを選択"})]})]}),e("div",{class:"bg-navy-800/50 backdrop-blur-lg rounded-2xl border border-gray-700/30 p-8",children:[e("h3",{class:"text-2xl font-bold text-white mb-6 text-center",children:[e("i",{class:"fas fa-question-circle mr-2 text-cyber-blue"}),"よくある質問"]}),e("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e("div",{children:[e("h4",{class:"text-lg font-semibold text-white mb-3",children:"プラン変更について"}),e("div",{class:"space-y-4 text-gray-300 text-sm",children:[e("div",{children:[e("p",{class:"font-medium text-cyber-blue mb-1",children:"Q: いつでもプランを変更できますか？"}),e("p",{children:"A: はい、いつでもプランの変更が可能です。変更は即座に適用されます。"})]}),e("div",{children:[e("p",{class:"font-medium text-cyber-blue mb-1",children:"Q: ダウングレードはできますか？"}),e("p",{children:"A: はい、可能です。ただし、使用制限は次回リセット時（月初）に適用されます。"})]})]})]}),e("div",{children:[e("h4",{class:"text-lg font-semibold text-white mb-3",children:"料金・支払いについて"}),e("div",{class:"space-y-4 text-gray-300 text-sm",children:[e("div",{children:[e("p",{class:"font-medium text-cyber-green mb-1",children:"Q: 支払い方法は？"}),e("p",{children:"A: クレジットカード、銀行振込に対応しています。"})]}),e("div",{children:[e("p",{class:"font-medium text-cyber-green mb-1",children:"Q: 無料トライアルはありますか？"}),e("p",{children:"A: フリープランで機能をお試しいただけます。"})]})]})]})]})]})]}),e("div",{id:"planSelectModal",class:"fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50",children:e("div",{class:"flex items-center justify-center min-h-screen p-4",children:e("div",{class:"bg-navy-800 rounded-2xl border border-gray-700 p-6 w-full max-w-lg",children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("h3",{class:"text-lg font-semibold text-white",children:"プラン変更確認"}),e("button",{id:"closePlanSelectModal",class:"text-gray-400 hover:text-white",children:e("i",{class:"fas fa-times"})})]}),e("div",{class:"mb-6",children:[e("div",{class:"bg-navy-700 rounded-lg p-6 mb-4",children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("div",{children:[e("h4",{id:"selectedPlanName",class:"text-xl font-bold text-white",children:"プレミアムプラン"}),e("p",{class:"text-gray-400",children:"に変更します"})]}),e("div",{class:"text-right",children:[e("div",{id:"selectedPlanPrice",class:"text-2xl font-bold text-cyber-pink",children:"¥9,800"}),e("div",{class:"text-gray-400 text-sm",children:"/月"})]})]}),e("div",{class:"border-t border-gray-600 pt-4",children:[e("h5",{class:"text-white font-medium mb-2",children:"主な機能:"}),e("ul",{id:"selectedPlanFeatures",class:"text-gray-300 text-sm space-y-1",children:[e("li",{children:"• 全機能無制限利用"}),e("li",{children:"• カスタムレポート作成"}),e("li",{children:"• 優先サポート"})]})]})]}),e("div",{class:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4",children:e("div",{class:"flex items-start",children:[e("i",{class:"fas fa-exclamation-triangle text-yellow-500 mr-2 mt-1"}),e("div",{class:"text-yellow-200 text-sm",children:[e("p",{class:"font-medium mb-1",children:"ご注意:"}),e("p",{children:"プラン変更は即座に適用され、使用制限がリセットされます。課金は変更日から開始されます。"})]})]})})]}),e("div",{class:"flex space-x-3",children:[e("button",{id:"confirmPlanSelect",class:"flex-1 bg-cyber-blue text-white py-3 rounded-lg hover:bg-cyber-purple transition-colors font-semibold",children:"変更を確定する"}),e("button",{id:"cancelPlanSelect",class:"flex-1 bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-500 transition-colors",children:"キャンセル"})]})]})})}),e("script",{src:"/static/js/plan-management.js"})]}),P=new ws;P.use("/api/*",Kn({origin:"*",allowHeaders:["Content-Type","Authorization"],allowMethods:["GET","POST","PUT","DELETE","OPTIONS"]}));P.use("/static/*",Vn({root:"./public"}));const xi=Ma(new URL("https://www.googleapis.com/service_accounts/v1/jwk/securetoken@system.gserviceaccount.com"));P.post("/api/session",async t=>{console.log("🔥 Firebase session endpoint called");try{let r;try{const a=await t.req.json();r=a==null?void 0:a.idToken,console.log("📨 Received idToken:",r?r.substring(0,20)+"...":"none")}catch(a){return console.error("❌ JSON parsing error:",a),t.json({ok:!1,message:"Invalid JSON body"},400)}if(!r)return console.log("❌ No idToken provided"),t.json({ok:!1,message:"idToken required"},400);const s=t.env.FIREBASE_PROJECT_ID||"banasuko-auth";console.log("🔧 Using Firebase project:",s);const{payload:n}=await Ca(r,xi,{issuer:`https://securetoken.google.com/${s}`,audience:s});return console.log("✅ Token verified successfully for user:",n.user_id),t.header("Set-Cookie",`bn_session=uid:${n.user_id}; Path=/; HttpOnly; Secure; SameSite=Lax; Max-Age=2592000`),t.json({ok:!0,uid:n.user_id,email:n.email??null,message:"Session created successfully"})}catch(r){return console.error("💥 Token verification error:",r),t.json({ok:!1,message:(r==null?void 0:r.message)||"Invalid token",error:r.toString()},401)}});P.options("/api/session",t=>t.body(null,204));P.options("/api/auth/user",t=>t.body(null,204));P.options("/api/user/profile",t=>t.body(null,204));P.options("/api/usage/dashboard",t=>t.body(null,204));P.options("/api/analysis/single",t=>t.body(null,204));P.options("/api/analysis/ab",t=>t.body(null,204));const ut=t=>{var n;const r=(n=t.req.header("Cookie"))==null?void 0:n.split(";").find(a=>a.trim().startsWith("bn_session="));if(!r)return null;const s=r.split("=")[1];return s!=null&&s.startsWith("uid:")?{uid:s.replace("uid:",""),authenticated:!0}:null};P.get("/api/auth/user",async t=>{try{const r=ut(t);return r?t.json({success:!0,user:{uid:r.uid,email:`user-${r.uid.substring(0,8)}@example.com`,plan:"free",authenticated:!0}}):t.json({success:!1,message:"Not authenticated"},401)}catch(r){return console.error("ユーザー認証確認エラー:",r),t.json({success:!1,message:"Authentication check failed"},500)}});P.post("/api/user/profile",async t=>{try{const r=ut(t);if(!r)return t.json({success:!1,message:"Not authenticated"},401);const s=await t.req.json();return console.log("ユーザープロファイル作成:",{uid:r.uid,...s}),t.json({success:!0,message:"Profile created successfully",user:{uid:r.uid,email:s.email,plan:"free",createdAt:new Date().toISOString()}})}catch(r){return console.error("プロファイル作成エラー:",r),t.json({success:!1,message:"Profile creation failed"},500)}});P.get("/api/usage/dashboard",async t=>{try{const r=ut(t);if(!r)return t.json({success:!1,message:"Not authenticated"},401);const s={user:{uid:r.uid,email:`user-${r.uid.substring(0,8)}@example.com`,plan:"free",planName:"フリープラン"},usage:{singleAnalysis:{used:0,limit:10},abComparison:{used:0,limit:5},copyGeneration:{used:0,limit:3}},daysUntilReset:30};return t.json({success:!0,data:s})}catch(r){return console.error("ダッシュボードデータ取得エラー:",r),t.json({success:!1,message:"Dashboard data fetch failed"},500)}});P.post("/api/auth/logout",async t=>{console.log("🚪 ログアウトエンドポイント呼び出し");try{return t.header("Set-Cookie","bn_session=; Path=/; HttpOnly; Secure; SameSite=Lax; Max-Age=0"),console.log("✅ ログアウト成功 - セッションクッキー削除完了"),t.json({success:!0,message:"Logged out successfully"})}catch(r){return console.error("❌ ログアウトエラー:",r),t.json({success:!1,message:"Logout failed"},500)}});P.options("/api/auth/logout",t=>t.body(null,204));P.post("/api/analysis/single",async t=>{console.log("🔍 単一画像分析エンドポイント呼び出し");try{const r=ut(t);if(!r)return t.json({success:!1,message:"Not authenticated"},401);const s=await t.req.json(),{image:n,platform:a,adType:i}=s;if(!n||!a)return t.json({success:!1,message:"Image and platform are required"},400);const l=t.env.OPENAI_API_KEY;if(!l)return console.error("❌ OpenAI API Key not configured"),t.json({success:!1,message:"AI service not configured"},500);console.log("🎯 分析開始:",{platform:a,adType:i,user:r.uid});const c=await Zt(n,a,i,l);return console.log("✅ 分析完了:",c.score||c.grade),t.json({success:!0,result:c,message:"分析が完了しました"})}catch(r){return console.error("❌ 分析エラー:",r),t.json({success:!1,message:"分析中にエラーが発生しました。もう一度試してください。",error:r.message},500)}});P.post("/api/analysis/ab",async t=>{console.log("🔍 A/B比較分析エンドポイント呼び出し");try{const r=ut(t);if(!r)return t.json({success:!1,message:"Not authenticated"},401);const s=await t.req.json(),{imageA:n,imageB:a,platform:i,adType:l}=s;if(!n||!a||!i)return t.json({success:!1,message:"Both images and platform are required"},400);const c=t.env.OPENAI_API_KEY;if(!c)return t.json({success:!1,message:"AI service not configured"},500);console.log("🎯 A/B分析開始:",{platform:i,adType:l,user:r.uid});const[o,d]=await Promise.all([Zt(n,i,l,c),Zt(a,i,l,c)]);return console.log("✅ A/B分析完了"),t.json({success:!0,result:{patternA:o,patternB:d,comparison:vi(o,d)},message:"A/B比較分析が完了しました"})}catch(r){return console.error("❌ A/B分析エラー:",r),t.json({success:!1,message:"分析中にエラーが発生しました。もう一度試してください。",error:r.message},500)}});async function Zt(t,r,s,n){const a={"instagram-post":"このInstagram投稿画像を100点満点で採点してください。視覚的魅力、エンゲージメント予測、投稿としての効果を評価し、改善提案も含めてください。","instagram-ad":`このInstagram${s}広告を A/B/C の3段階で評価してください。訴求力、視覚的インパクト、コンバージョン予測を基準に判定し、詳細な改善提案を含めてください。`,gdn:"このGDN（Google Display Network）バナー広告をA/B/Cの3段階で評価してください。クリック率予測、視認性、訴求効果を分析してください。",yahoo:"このYahoo広告バナーをA/B/Cの3段階で評価してください。Yahoo広告の特徴を踏まえ、効果的な改善案を提案してください。"},i=a[r]||a["instagram-post"],l=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4-vision-preview",messages:[{role:"user",content:[{type:"text",text:i},{type:"image_url",image_url:{url:t}}]}],max_tokens:500})});if(!l.ok)throw new Error(`OpenAI API error: ${l.status}`);const o=(await l.json()).choices[0].message.content;if(r==="instagram-post"){const d=o.match(/(\d+)点|(\d+)\/100|Score:\s*(\d+)/i);return{score:d?parseInt(d[1]||d[2]||d[3]):75,analysis:o,improvements:Br(o),platform:r}}else{const d=o.match(/[評価判定]?\s*[：:]\s*([ABC])/i)||o.match(/\b([ABC])\s*[評価段階]/i);return{grade:d?d[1]:"B",analysis:o,improvements:Br(o),platform:r}}}function Br(t){const r=[],s=t.split(`
`);for(const n of s)(n.includes("改善")||n.includes("提案")||n.includes("向上")||n.includes("最適化"))&&r.push(n.trim());return r.length>0?r:["より詳細な分析のため、画像の解像度を上げることをお勧めします。"]}function vi(t,r){if(t.score&&r.score){const s=t.score>r.score?"A":"B",n=Math.abs(t.score-r.score);return{winner:s,difference:n,summary:`パターン${s}が${n}点高い評価です。`}}else{const s={A:3,B:2,C:1},n=s[t.grade]||2,a=s[r.grade]||2,i=n>a?"A":n<a?"B":"引き分け";return{winner:i,summary:i==="引き分け"?"両パターンとも同程度の評価です。":`パターン${i}がより高い評価です。`}}}P.get("/api/status",async t=>{const r=t.env.OPENAI_API_KEY,s=t.env.PING,n=Object.keys(t.env||{}).length;return t.json({success:!0,status:{openai_configured:!!r,key_prefix:r?r.slice(0,3)+"...":"undefined...",ping_seen:s==="ok",env_keys_count:n,environment:"pages",cloudflare_context:!0,timestamp:new Date().toISOString()}})});P.use(ui);P.get("/",t=>t.render(e(hi,{})));P.get("/login",t=>t.render(e(fi,{})));P.get("/analysis",t=>t.render(e(bi,{})));P.get("/copy-generation",t=>t.render(e(mi,{})));P.get("/admin",t=>t.render(e(pi,{})));P.get("/dashboard",t=>t.render(e(gi,{})));P.get("/plan",t=>t.render(e(yi,{})));P.notFound(t=>t.render(e("div",{class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-navy-900 via-navy-800 to-navy-900",children:e("div",{class:"text-center",children:[e("h1",{class:"text-6xl font-bold text-cyber-blue mb-4",children:"404"}),e("p",{class:"text-xl text-gray-300 mb-8",children:"ページが見つかりません"}),e("a",{href:"/",class:"btn btn-primary",children:[e("i",{class:"fas fa-home mr-2"}),"ホームに戻る"]})]})})));const Lr=new ws,wi=Object.assign({"/src/app.tsx":P});let Ws=!1;for(const[,t]of Object.entries(wi))t&&(Lr.all("*",r=>{let s;try{s=r.executionCtx}catch{}return t.fetch(r.req.raw,r.env,s)}),Lr.notFound(r=>{let s;try{s=r.executionCtx}catch{}return t.fetch(r.req.raw,r.env,s)}),Ws=!0);if(!Ws)throw new Error("Can't import modules from ['/src/app.tsx']");export{Lr as default};
